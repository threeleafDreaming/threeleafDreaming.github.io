<?xml version="1.0" encoding="utf-8"?>
<search>
  
  
  
  <entry>
    <title>【SpringBoot】SpringBoot中的注解作用</title>
    <link href="/blog/docs/springboot-06/spring/springboot-06/"/>
    <url>/blog/docs/springboot-06/spring/springboot-06/</url>
    
    <content type="html"><![CDATA[<blockquote><p>汝之观览，吾之幸也！</p></blockquote>]]></content>
    
    
    <categories>
      
      <category>springboot</category>
      
    </categories>
    
    
    <tags>
      
      <tag>springboot</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>【Java】学习中引申的其他问题合集</title>
    <link href="/blog/docs/java-problem/java/java-problem/"/>
    <url>/blog/docs/java-problem/java/java-problem/</url>
    
    <content type="html"><![CDATA[<blockquote><p>汝之观览，吾之幸也！</p></blockquote><h3 id="一、Java基础"><a href="#一、Java基础" class="headerlink" title="一、Java基础"></a>一、Java基础</h3><h4 id="1、对象的哈希值存在哪里"><a href="#1、对象的哈希值存在哪里" class="headerlink" title="1、对象的哈希值存在哪里"></a>1、对象的哈希值存在哪里</h4><h4 id="2、为什么键值对（key-value）可快速查询，具体的算法是什么？时间复杂度是多少？"><a href="#2、为什么键值对（key-value）可快速查询，具体的算法是什么？时间复杂度是多少？" class="headerlink" title="2、为什么键值对（key-value）可快速查询，具体的算法是什么？时间复杂度是多少？"></a>2、为什么键值对（key-value）可快速查询，具体的算法是什么？时间复杂度是多少？</h4><h4 id="3、SpringBoot是否重写对象的hashcode和equals方法？"><a href="#3、SpringBoot是否重写对象的hashcode和equals方法？" class="headerlink" title="3、SpringBoot是否重写对象的hashcode和equals方法？"></a>3、SpringBoot是否重写对象的hashcode和equals方法？</h4>]]></content>
    
    
    <categories>
      
      <category>java</category>
      
    </categories>
    
    
    <tags>
      
      <tag>java</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>【Java】实际开发中用到的小技巧整理</title>
    <link href="/blog/docs/java-antic/java/java-antic/"/>
    <url>/blog/docs/java-antic/java/java-antic/</url>
    
    <content type="html"><![CDATA[<blockquote><p>汝之观览，吾之幸也！</p></blockquote><h3 id="一、列表"><a href="#一、列表" class="headerlink" title="一、列表"></a>一、列表</h3><h4 id="1、对列表进行去重"><a href="#1、对列表进行去重" class="headerlink" title="1、对列表进行去重"></a>1、对列表进行去重</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs java">String[] strArr = <span class="hljs-keyword">new</span> <span class="hljs-title class_">String</span>[]&#123;<span class="hljs-string">&quot;2&quot;</span>,<span class="hljs-string">&quot;3&quot;</span>,<span class="hljs-string">&quot;2&quot;</span>&#125;;<br>Set&lt;String&gt; primarySourceSet =  <span class="hljs-keyword">new</span> <span class="hljs-title class_">LinkedHashSet</span>(Arrays.asList(strArr))<br></code></pre></td></tr></table></figure><h4 id="2、树结构查询"><a href="#2、树结构查询" class="headerlink" title="2、树结构查询"></a>2、树结构查询</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">import</span> cn.hutool.core.lang.tree.Tree;<br><span class="hljs-keyword">import</span> cn.hutool.core.lang.tree.TreeNodeConfig;<br><span class="hljs-keyword">import</span> cn.hutool.core.lang.tree.TreeUtil;<br><span class="hljs-keyword">import</span> cn.hutool.core.util.StrUtil;<br><span class="hljs-comment">// treeVOList 查询到的实体类数据，根据业务修改；rootId 根节点id</span><br> <span class="hljs-keyword">private</span> List&lt;Tree&lt;String&gt;&gt; <span class="hljs-title function_">getTreeList</span><span class="hljs-params">(List&lt;AssetCategoryTreeVO&gt; treeVOList, String rootId)</span> &#123;<br>  <span class="hljs-comment">// 配置</span><br>  <span class="hljs-type">TreeNodeConfig</span> <span class="hljs-variable">treeNodeConfig</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">TreeNodeConfig</span>();<br>  treeNodeConfig.setIdKey(<span class="hljs-string">&quot;id&quot;</span>);<br>  treeNodeConfig.setParentIdKey(<span class="hljs-string">&quot;parentId&quot;</span>);<br>  treeNodeConfig.setChildrenKey(<span class="hljs-string">&quot;childrenList&quot;</span>);<br>  <span class="hljs-comment">// 转换器</span><br>  List&lt;Tree&lt;String&gt;&gt; treeNodes = TreeUtil.build(treeVOList, rootId, treeNodeConfig, (treeNode, tree) -&gt; &#123;<br>      tree.setId(treeNode.getId().toString());<br>      tree.setParentId(<br>          StrUtil.isEmpty(String.valueOf(treeNode.getParentId())) ? <span class="hljs-string">&quot;0&quot;</span> : String.valueOf(treeNode.getParentId()));<br>      tree.setChildren(<span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;());<br>      <span class="hljs-comment">// 扩展属性 ...</span><br>      tree.putExtra(<span class="hljs-string">&quot;tenementCode&quot;</span>, treeNode.getTenementCode());<br>      tree.putExtra(<span class="hljs-string">&quot;projectCode&quot;</span>, treeNode.getProjectCode());<br>      tree.putExtra(<span class="hljs-string">&quot;label&quot;</span>, treeNode.getCategoryName());<br>      tree.putExtra(<span class="hljs-string">&quot;code&quot;</span>, treeNode.getCategoryCode());<br>      tree.putExtra(<span class="hljs-string">&quot;assetTag&quot;</span>, treeNode.getAssetTag());<br>  &#125;);<br>  <span class="hljs-keyword">return</span> treeNodes;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="二、SQL技巧"><a href="#二、SQL技巧" class="headerlink" title="二、SQL技巧"></a>二、SQL技巧</h3><h4 id="1、查询树形数据的路径"><a href="#1、查询树形数据的路径" class="headerlink" title="1、查询树形数据的路径"></a>1、查询树形数据的路径</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs sql"># 获取父类到子类的路径数据，前置数据是根节点数据，后置数据是全部表数据，反之更改位置可查询子类到父类路径数据<br><span class="hljs-keyword">WITH</span> <span class="hljs-keyword">RECURSIVE</span> cte (id, parent_id,space_name, spaceName) <span class="hljs-keyword">AS</span> (<br>  <span class="hljs-keyword">SELECT</span> id, parent_id, space_name,space_name <span class="hljs-keyword">as</span> spaceName<br>  <span class="hljs-keyword">FROM</span> illp_device_space<br>  <span class="hljs-keyword">WHERE</span> parent_id <span class="hljs-keyword">IS</span> <span class="hljs-keyword">NULL</span><br>  <span class="hljs-keyword">UNION</span> <span class="hljs-keyword">ALL</span><br>  <span class="hljs-keyword">SELECT</span> t.id,   t.parent_id,<br>  t.space_name, CONCAT(cte.spaceName, <span class="hljs-string">&#x27;,&#x27;</span>, t.space_name)<br>  <span class="hljs-keyword">FROM</span> illp_device_space t<br>  <span class="hljs-keyword">INNER</span> <span class="hljs-keyword">JOIN</span> cte <span class="hljs-keyword">ON</span> t.parent_id <span class="hljs-operator">=</span> cte.id<br>)<br><span class="hljs-keyword">SELECT</span> spaceName<br><span class="hljs-keyword">FROM</span> cte  <span class="hljs-keyword">where</span> id <span class="hljs-operator">=</span><span class="hljs-number">89</span>;<br></code></pre></td></tr></table></figure><h4 id="2、上移下移"><a href="#2、上移下移" class="headerlink" title="2、上移下移"></a>2、上移下移</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs sql"># 更改排序 上移<br><span class="hljs-keyword">UPDATE</span> illp_emergency_evaluation_item_score t1<br><span class="hljs-keyword">INNER</span> <span class="hljs-keyword">JOIN</span> illp_emergency_evaluation_item_score t2<br>    <span class="hljs-keyword">ON</span> t1.sort_index <span class="hljs-operator">-</span> <span class="hljs-number">1</span> <span class="hljs-operator">=</span> t2.sort_index<br><span class="hljs-keyword">SET</span><br>    t1.sort_index <span class="hljs-operator">=</span> t1.sort_index <span class="hljs-operator">-</span> <span class="hljs-number">1</span>,<br>    t2.sort_index <span class="hljs-operator">=</span> t2.sort_index <span class="hljs-operator">+</span> <span class="hljs-number">1</span><br><span class="hljs-keyword">WHERE</span>  t1.state<span class="hljs-operator">=</span><span class="hljs-string">&#x27;A&#x27;</span><br><span class="hljs-keyword">and</span> t1.id <span class="hljs-operator">=</span> <span class="hljs-number">1</span>;<br><br># 更改排序 下移<br><span class="hljs-keyword">UPDATE</span> illp_emergency_evaluation_item_score t1<br><span class="hljs-keyword">INNER</span> <span class="hljs-keyword">JOIN</span> illp_emergency_evaluation_item_score t2<br>    <span class="hljs-keyword">ON</span> t1.sort_index <span class="hljs-operator">+</span> <span class="hljs-number">1</span> <span class="hljs-operator">=</span> t2.sort_index<br><span class="hljs-keyword">SET</span><br>    t1.sort_index <span class="hljs-operator">=</span> t1.sort_index <span class="hljs-operator">+</span> <span class="hljs-number">1</span>,<br>    t2.sort_index <span class="hljs-operator">=</span> t2.sort_index <span class="hljs-operator">-</span> <span class="hljs-number">1</span><br><span class="hljs-keyword">WHERE</span> t1.state<span class="hljs-operator">=</span><span class="hljs-string">&#x27;A&#x27;</span><br><span class="hljs-keyword">and</span> t1.id <span class="hljs-operator">=</span> <span class="hljs-number">2</span>;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>java</category>
      
    </categories>
    
    
    <tags>
      
      <tag>java</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>【SpringBoot】SpringBoot+网关</title>
    <link href="/blog/docs/springboot-05/spring/springboot-05/"/>
    <url>/blog/docs/springboot-05/spring/springboot-05/</url>
    
    <content type="html"><![CDATA[<blockquote><p>汝之观览，吾之幸也！</p></blockquote>]]></content>
    
    
    <categories>
      
      <category>spring</category>
      
    </categories>
    
    
    <tags>
      
      <tag>springboot</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>【SpringBoot】SpringBoot+Nacos+Jenkins+JarManage 部署法宝</title>
    <link href="/blog/docs/springboot-04/spring/springboot-04/"/>
    <url>/blog/docs/springboot-04/spring/springboot-04/</url>
    
    <content type="html"><![CDATA[<blockquote><p>汝之观览，吾之幸也！</p></blockquote>]]></content>
    
    
    <categories>
      
      <category>spring</category>
      
    </categories>
    
    
    <tags>
      
      <tag>springboot</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>【SpringBoot】SpringBoot+redis/kafka+Plumelog 日志管理</title>
    <link href="/blog/docs/springboot-03/spring/springboot-03/"/>
    <url>/blog/docs/springboot-03/spring/springboot-03/</url>
    
    <content type="html"><![CDATA[<blockquote><p>汝之观览，吾之幸也！</p></blockquote>]]></content>
    
    
    <categories>
      
      <category>spring</category>
      
    </categories>
    
    
    <tags>
      
      <tag>springboot</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>【SpringBoot】SpringBoot的启动流程</title>
    <link href="/blog/docs/springboot-02/spring/springboot-02/"/>
    <url>/blog/docs/springboot-02/spring/springboot-02/</url>
    
    <content type="html"><![CDATA[<blockquote><p>汝之观览，吾之幸也！本文主要讲解SpringBoot的启动流程中的源码，了解SpringBoot的启动机制</p></blockquote><h3 id="一、搭建简单的SpringBoot项目"><a href="#一、搭建简单的SpringBoot项目" class="headerlink" title="一、搭建简单的SpringBoot项目"></a>一、搭建简单的SpringBoot项目</h3><p>可参考文章<a href="https://blog.csdn.net/m0_37172770/article/details/132592020?spm=1001.2014.3001.5501">最基础的项目架构（SpringBoot+Mybatis-plus+lombok+knife4j+hutool）</a></p><h3 id="二、启动项目"><a href="#二、启动项目" class="headerlink" title="二、启动项目"></a>二、启动项目</h3><h4 id="1、构造SpringApplication对象"><a href="#1、构造SpringApplication对象" class="headerlink" title="1、构造SpringApplication对象"></a>1、构造SpringApplication对象</h4><p>1、推测web应用类型 （NONE、SERVLET、REACTIVE）<br>2、从spring.factories 中获取BootstrapRegistryInitializer对象 （启动注册表）<br>3、从spring.factories 中获取ApplicationContextInitializer对象 （上下文）<br>4、从spring.factories 中获取ApplicationListener对象 （监听器）<br>5、推测出Main类（main()方法所在的类）</p><h4 id="2、执行run方法"><a href="#2、执行run方法" class="headerlink" title="2、执行run方法"></a>2、执行run方法</h4><p>1、创建并初始化 DefaultBootstrapContext<br>2、从spring.factories 中获取 SpringApplicationRunListeners 对象 ，提供EventPublishingRunListener，在启动过程中负责发布事件<br>调用starting()方法<br>3、将启动参数封装到 ApplicationArguments 对象中<br>4、准备 Environment 对象<br>5、打印Banner<br>6、创建Spring容器（ApplicationContext）<br>7、预处理Spring容器<br>8、刷新Spring容器、解析配置类<br>9、Spring容器刷新后处理，空方法、扩展点、模板方法<br>10、调用 SpringApplicationRunListeners 的 started() 方法<br>11、调用 ApplicationRunner 和 CommandLineRunner<br>12、调用 SpringApplicationRunListeners 的 ready() 方法</p><h4 id="3、总结"><a href="#3、总结" class="headerlink" title="3、总结"></a>3、总结</h4><p>加载启动类<br>构建应用程序上下文<br>自动配置<br>加载外部属性<br>创建Bean实例<br>启动内嵌服务器<br>执行初始化和回调<br>应用程序运行</p><p>1、调用有@SpringBootApplication注解的启动类的main方法<br>2、通过调用SpringApplication内部的run()方法构建SpringApplication对象。<br>    创建SpringApplication对象：<br>    2.1 PrimarySources 不为空，将启动类赋值给primarySources 对象。<br>    2.2 从classpath类路径推断Web应用类型，有三种Web应用类型NONE、SERVLET、REACTIVE<br>       2.3 初始化bootstrapRegistryInitializers<br>       2.4 初始化ApplicationContextInitializer集合<br>       2.5 初始化ApplicationListener<br>       2.6 获取StackTraceElement数组遍历，通过反射获取堆栈中有main方法A的。<br>3、调用SpringBootApplication的run方法。<br>4、long startTime = System.nanoTime(); 记录项目启动时间。<br>5、通过BootstrapRegistryInitializer来初始化DefaultBootstrapContext<br>6、getRunListeners(args)获取SpringApplicationRunListeners监听器<br>7、 listeners.starting()触发ApplicationStartingEvent事件<br>8、prepareEnvironment(listeners, bootstrapContext, applicationArguments) 将配置文件读取到容器中，返回ConfigurableEnvironment 对象。<br>9、printBanner(environment) 打印Banner图，即SpringBoot启动时的图案。<br>10、根据WebApplicationType从ApplicationContextFactory工厂创建ConfigurableApplicationContext，并设置ConfigurableApplicationContext中的ApplicationStartup为DefaultApplicationStartup<br>11、 调用prepareContext()初始化context等，打印启动日志信息，启动Profile日志信息，并为BeanFactory中的部分属性赋值。<br>12、刷新容器，在该方法中集成了Tomcat容器<br>13、加载SpringMVC.<br>14、刷新后的方法，空方法，给用户自定义重写afterRefresh（）<br>15、Duration timeTakenToStartup = Duration.ofNanos(System.nanoTime() - startTime)算出启动花费的时间。<br>16、打印日志Started xxx in xxx seconds (JVM running for xxxx)<br>17、listeners.started(context, timeTakenToStartup)触发ApplicationStartedEvent事件监听。上下文已刷新，应用程序已启动。<br>18、调用ApplicationRunner和CommandLineRunner<br>19、返回上下文。</p>]]></content>
    
    
    <categories>
      
      <category>spring</category>
      
    </categories>
    
    
    <tags>
      
      <tag>springboot</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>【SpringBoot】最基础的项目架构（SpringBoot+Mybatis-plus+lombok+knife4j+hutool）</title>
    <link href="/blog/docs/springboot-01/spring/springboot-01/"/>
    <url>/blog/docs/springboot-01/spring/springboot-01/</url>
    
    <content type="html"><![CDATA[<blockquote><p>汝之观览，吾之幸也！ 从本文开始讲下项目中用到的一些框架和技术，最基本的框架使用的是SpringBoot(2.5.10)+Mybatis-plus(3.5.3.2)+lombok(1.18.28)+knife4j(3.0.3)+hutool(5.8.21),可以做到代码自动生成，满足最基本的增删查改。</p></blockquote><h3 id="一、新建SpringBoot项目"><a href="#一、新建SpringBoot项目" class="headerlink" title="一、新建SpringBoot项目"></a>一、新建SpringBoot项目</h3><p>使用Idea工具直接创建项目<br><img src="https://jimmy-blog-images.oss-cn-shanghai.aliyuncs.com/img/springboot%E6%96%B0%E5%BB%BAspringboot%E9%A1%B9%E7%9B%AE1.png"></p><p>输入项目名称等<br><img src="https://jimmy-blog-images.oss-cn-shanghai.aliyuncs.com/img/springboot%E6%96%B0%E5%BB%BAspringboot%E9%A1%B9%E7%9B%AE2.png"><br>生成web项目<br><img src="https://jimmy-blog-images.oss-cn-shanghai.aliyuncs.com/img/springboot%E6%96%B0%E5%BB%BAspringboot%E9%A1%B9%E7%9B%AE3.png"></p><h3 id="二、配置pom"><a href="#二、配置pom" class="headerlink" title="二、配置pom"></a>二、配置pom</h3><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br></pre></td><td class="code"><pre><code class="hljs yml"><span class="hljs-string">&lt;?xml</span> <span class="hljs-string">version=&quot;1.0&quot;</span> <span class="hljs-string">encoding=&quot;UTF-8&quot;?&gt;</span><br><span class="hljs-string">&lt;project</span> <span class="hljs-string">xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot;</span> <span class="hljs-string">xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span><br>         <span class="hljs-string">xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0</span> <span class="hljs-string">https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;</span><br>    <span class="hljs-string">&lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;</span><br>    <span class="hljs-string">&lt;parent&gt;</span><br>        <span class="hljs-string">&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;</span><br>        <span class="hljs-string">&lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;</span><br>        <span class="hljs-string">&lt;version&gt;2.5.10&lt;/version&gt;</span><br>        <span class="hljs-string">&lt;relativePath/&gt;</span> <span class="hljs-string">&lt;!--</span> <span class="hljs-string">lookup</span> <span class="hljs-string">parent</span> <span class="hljs-string">from</span> <span class="hljs-string">repository</span> <span class="hljs-string">--&gt;</span><br>    <span class="hljs-string">&lt;/parent&gt;</span><br>    <span class="hljs-string">&lt;groupId&gt;com.mitool&lt;/groupId&gt;</span><br>    <span class="hljs-string">&lt;artifactId&gt;springboot&lt;/artifactId&gt;</span><br>    <span class="hljs-string">&lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;</span><br>    <span class="hljs-string">&lt;name&gt;springboot&lt;/name&gt;</span><br>    <span class="hljs-string">&lt;description&gt;Demo</span> <span class="hljs-string">project</span> <span class="hljs-string">for</span> <span class="hljs-string">Spring</span> <span class="hljs-string">Boot&lt;/description&gt;</span><br>    <span class="hljs-string">&lt;properties&gt;</span><br>        <span class="hljs-string">&lt;java.version&gt;1.8&lt;/java.version&gt;</span><br>        <span class="hljs-string">&lt;mybatis-plus.version&gt;3.5.3.2&lt;/mybatis-plus.version&gt;</span><br>        <span class="hljs-string">&lt;freemarker.version&gt;2.3.29&lt;/freemarker.version&gt;</span><br>        <span class="hljs-string">&lt;lombok.version&gt;1.18.28&lt;/lombok.version&gt;</span><br>        <span class="hljs-string">&lt;knife4j.version&gt;3.0.3&lt;/knife4j.version&gt;</span><br>        <span class="hljs-string">&lt;hutool.version&gt;5.8.21&lt;/hutool.version&gt;</span><br>        <span class="hljs-string">&lt;pagehelper.version&gt;1.4.7&lt;/pagehelper.version&gt;</span><br>        <span class="hljs-string">&lt;ali.cola.version&gt;4.3.2&lt;/ali.cola.version&gt;</span><br>        <span class="hljs-string">&lt;org.mapstruct.version&gt;1.4.2.Final&lt;/org.mapstruct.version&gt;</span><br>    <span class="hljs-string">&lt;/properties&gt;</span><br>    <span class="hljs-string">&lt;dependencies&gt;</span><br>        <span class="hljs-string">&lt;dependency&gt;</span><br>            <span class="hljs-string">&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;</span><br>            <span class="hljs-string">&lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;</span><br>        <span class="hljs-string">&lt;/dependency&gt;</span><br>        <span class="hljs-string">&lt;dependency&gt;</span><br>            <span class="hljs-string">&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;</span><br>            <span class="hljs-string">&lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;</span><br>            <span class="hljs-string">&lt;scope&gt;test&lt;/scope&gt;</span><br>        <span class="hljs-string">&lt;/dependency&gt;</span><br>        <span class="hljs-string">&lt;!--</span> <span class="hljs-string">mysql</span> <span class="hljs-string">链接--&gt;</span><br>        <span class="hljs-string">&lt;dependency&gt;</span><br>            <span class="hljs-string">&lt;groupId&gt;mysql&lt;/groupId&gt;</span><br>            <span class="hljs-string">&lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt;</span><br>            <span class="hljs-string">&lt;scope&gt;runtime&lt;/scope&gt;</span><br>        <span class="hljs-string">&lt;/dependency&gt;</span><br>        <span class="hljs-string">&lt;!--</span> <span class="hljs-string">mybatis-plus</span> <span class="hljs-string">--&gt;</span><br>        <span class="hljs-string">&lt;dependency&gt;</span><br>            <span class="hljs-string">&lt;groupId&gt;com.baomidou&lt;/groupId&gt;</span><br>            <span class="hljs-string">&lt;artifactId&gt;mybatis-plus-boot-starter&lt;/artifactId&gt;</span><br>            <span class="hljs-string">&lt;version&gt;$&#123;mybatis-plus.version&#125;&lt;/version&gt;</span><br>        <span class="hljs-string">&lt;/dependency&gt;</span><br>        <span class="hljs-string">&lt;!--</span> <span class="hljs-string">Mybatis-plus</span> <span class="hljs-string">代码生成器</span> <span class="hljs-string">依赖配置</span> <span class="hljs-string">--&gt;</span><br>        <span class="hljs-string">&lt;dependency&gt;</span><br>            <span class="hljs-string">&lt;groupId&gt;com.baomidou&lt;/groupId&gt;</span><br>            <span class="hljs-string">&lt;artifactId&gt;mybatis-plus-generator&lt;/artifactId&gt;</span><br>            <span class="hljs-string">&lt;version&gt;$&#123;mybatis-plus.version&#125;&lt;/version&gt;</span><br>            <span class="hljs-string">&lt;exclusions&gt;</span><br>                <span class="hljs-string">&lt;exclusion&gt;</span><br>                    <span class="hljs-string">&lt;groupId&gt;com.baomidou&lt;/groupId&gt;</span><br>                    <span class="hljs-string">&lt;artifactId&gt;mybatis-plus-extension&lt;/artifactId&gt;</span><br>                <span class="hljs-string">&lt;/exclusion&gt;</span><br>            <span class="hljs-string">&lt;/exclusions&gt;</span><br>        <span class="hljs-string">&lt;/dependency&gt;</span><br>        <span class="hljs-string">&lt;!--freemarker依赖--&gt;</span><br>        <span class="hljs-string">&lt;dependency&gt;</span><br>            <span class="hljs-string">&lt;groupId&gt;org.freemarker&lt;/groupId&gt;</span><br>            <span class="hljs-string">&lt;artifactId&gt;freemarker&lt;/artifactId&gt;</span><br>            <span class="hljs-string">&lt;version&gt;$&#123;freemarker.version&#125;&lt;/version&gt;</span><br>        <span class="hljs-string">&lt;/dependency&gt;</span><br>        <span class="hljs-string">&lt;!--</span> <span class="hljs-string">lombok</span> <span class="hljs-string">--&gt;</span><br>        <span class="hljs-string">&lt;dependency&gt;</span><br>            <span class="hljs-string">&lt;groupId&gt;org.projectlombok&lt;/groupId&gt;</span><br>            <span class="hljs-string">&lt;artifactId&gt;lombok&lt;/artifactId&gt;</span><br>            <span class="hljs-string">&lt;version&gt;$&#123;lombok.version&#125;&lt;/version&gt;</span><br>            <span class="hljs-string">&lt;scope&gt;provided&lt;/scope&gt;</span><br>        <span class="hljs-string">&lt;/dependency&gt;</span><br>        <span class="hljs-string">&lt;!--</span> <span class="hljs-string">knife4j</span> <span class="hljs-string">--&gt;</span><br>        <span class="hljs-string">&lt;dependency&gt;</span><br>            <span class="hljs-string">&lt;groupId&gt;com.github.xiaoymin&lt;/groupId&gt;</span><br>            <span class="hljs-string">&lt;artifactId&gt;knife4j-spring-boot-starter&lt;/artifactId&gt;</span><br>            <span class="hljs-string">&lt;version&gt;$&#123;knife4j.version&#125;&lt;/version&gt;</span><br>        <span class="hljs-string">&lt;/dependency&gt;</span><br>        <span class="hljs-string">&lt;!--</span> <span class="hljs-string">hutool</span> <span class="hljs-string">--&gt;</span><br>        <span class="hljs-string">&lt;dependency&gt;</span><br>            <span class="hljs-string">&lt;groupId&gt;cn.hutool&lt;/groupId&gt;</span><br>            <span class="hljs-string">&lt;artifactId&gt;hutool-all&lt;/artifactId&gt;</span><br>            <span class="hljs-string">&lt;version&gt;$&#123;hutool.version&#125;&lt;/version&gt;</span><br>        <span class="hljs-string">&lt;/dependency&gt;</span><br>        <span class="hljs-string">&lt;!--</span> <span class="hljs-string">pagehelper</span> <span class="hljs-string">--&gt;</span><br>        <span class="hljs-string">&lt;dependency&gt;</span><br>            <span class="hljs-string">&lt;groupId&gt;com.github.pagehelper&lt;/groupId&gt;</span><br>            <span class="hljs-string">&lt;artifactId&gt;pagehelper-spring-boot-starter&lt;/artifactId&gt;</span><br>            <span class="hljs-string">&lt;version&gt;$&#123;pagehelper.version&#125;&lt;/version&gt;</span><br>        <span class="hljs-string">&lt;/dependency&gt;</span><br>        <span class="hljs-string">&lt;!--</span> <span class="hljs-string">阿里cola</span> <span class="hljs-string">--&gt;</span><br>        <span class="hljs-string">&lt;dependency&gt;</span><br>            <span class="hljs-string">&lt;groupId&gt;com.alibaba.cola&lt;/groupId&gt;</span><br>            <span class="hljs-string">&lt;artifactId&gt;cola-component-dto&lt;/artifactId&gt;</span><br>            <span class="hljs-string">&lt;version&gt;$&#123;ali.cola.version&#125;&lt;/version&gt;</span><br>        <span class="hljs-string">&lt;/dependency&gt;</span><br>        <span class="hljs-string">&lt;dependency&gt;</span><br>            <span class="hljs-string">&lt;groupId&gt;org.mapstruct&lt;/groupId&gt;</span><br>            <span class="hljs-string">&lt;artifactId&gt;mapstruct&lt;/artifactId&gt;</span><br>            <span class="hljs-string">&lt;version&gt;$&#123;org.mapstruct.version&#125;&lt;/version&gt;</span><br>        <span class="hljs-string">&lt;/dependency&gt;</span><br>    <span class="hljs-string">&lt;/dependencies&gt;</span><br><br>    <span class="hljs-string">&lt;build&gt;</span><br>        <span class="hljs-string">&lt;plugins&gt;</span><br>            <span class="hljs-string">&lt;plugin&gt;</span><br>                <span class="hljs-string">&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;</span><br>                <span class="hljs-string">&lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;</span><br>            <span class="hljs-string">&lt;/plugin&gt;</span><br>            <span class="hljs-string">&lt;plugin&gt;</span><br>                <span class="hljs-string">&lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;</span><br>                <span class="hljs-string">&lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;</span><br>                <span class="hljs-string">&lt;version&gt;3.8.1&lt;/version&gt;</span><br>                <span class="hljs-string">&lt;configuration&gt;</span><br>                    <span class="hljs-string">&lt;source&gt;1.8&lt;/source&gt;</span><br>                    <span class="hljs-string">&lt;target&gt;1.8&lt;/target&gt;</span><br>                    <span class="hljs-string">&lt;annotationProcessorPaths&gt;</span><br>                        <span class="hljs-string">&lt;path&gt;</span><br>                            <span class="hljs-string">&lt;groupId&gt;org.projectlombok&lt;/groupId&gt;</span><br>                            <span class="hljs-string">&lt;artifactId&gt;lombok&lt;/artifactId&gt;</span><br>                            <span class="hljs-string">&lt;version&gt;$&#123;lombok.version&#125;&lt;/version&gt;</span><br>                        <span class="hljs-string">&lt;/path&gt;</span><br>                        <span class="hljs-string">&lt;path&gt;</span><br>                            <span class="hljs-string">&lt;groupId&gt;org.mapstruct&lt;/groupId&gt;</span><br>                            <span class="hljs-string">&lt;artifactId&gt;mapstruct-processor&lt;/artifactId&gt;</span><br>                            <span class="hljs-string">&lt;version&gt;$&#123;org.mapstruct.version&#125;&lt;/version&gt;</span><br>                        <span class="hljs-string">&lt;/path&gt;</span><br>                    <span class="hljs-string">&lt;/annotationProcessorPaths&gt;</span><br>                <span class="hljs-string">&lt;/configuration&gt;</span><br>            <span class="hljs-string">&lt;/plugin&gt;</span><br>        <span class="hljs-string">&lt;/plugins&gt;</span><br>    <span class="hljs-string">&lt;/build&gt;</span><br><br><span class="hljs-string">&lt;/project&gt;</span><br></code></pre></td></tr></table></figure><h3 id="三、配置application-properties"><a href="#三、配置application-properties" class="headerlink" title="三、配置application.properties"></a>三、配置application.properties</h3><h4 id="1、配置application-properties"><a href="#1、配置application-properties" class="headerlink" title="1、配置application.properties"></a>1、配置application.properties</h4><p>配置application.properties文件，文件中包含数据库配置、knife4j配置</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs text"># 应用名称<br>spring.application.name=spring-demo<br># 开发环境设置<br>spring.profiles.active=dev<br># 应用路径<br>server.servlet.context-path=/springboot<br># 编码字符集<br>server.servlet.encoding.charset=utf-8<br># swagger<br>knife4j.enable=true<br>knife4j.production=false<br>knife4j.basic.enable=false<br></code></pre></td></tr></table></figure><h4 id="2、配置application-dev-properties"><a href="#2、配置application-dev-properties" class="headerlink" title="2、配置application-dev.properties"></a>2、配置application-dev.properties</h4><p>配置数据库，<br>localhost：数据库IP<br>db_source：数据库名称<br>username：用户名<br>password：密码</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs text"># 端口<br>server.port=9900<br>spring.datasource.url=jdbc:mysql://localhost:3306/db_source?serverTimezone=Asia/Shanghai&amp;useUnicode=true&amp;characterEncoding=utf8&amp;useSSL=false<br>spring.datasource.username=username<br>spring.datasource.password=password<br>spring.datasource.driver-class-name=com.mysql.cj.jdbc.Driver<br><br># SSO<br>zsc.open.token.check=false<br></code></pre></td></tr></table></figure><h3 id="四、新建代码生成工具类-CodeGeneratorUtil"><a href="#四、新建代码生成工具类-CodeGeneratorUtil" class="headerlink" title="四、新建代码生成工具类 CodeGeneratorUtil"></a>四、新建代码生成工具类 CodeGeneratorUtil</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.mitool.springboot.utils;<br><span class="hljs-keyword">import</span> cn.hutool.core.io.FileUtil;<br><span class="hljs-keyword">import</span> cn.hutool.core.util.StrUtil;<br><span class="hljs-keyword">import</span> com.baomidou.mybatisplus.core.exceptions.MybatisPlusException;<br><span class="hljs-keyword">import</span> com.baomidou.mybatisplus.core.mapper.BaseMapper;<br><span class="hljs-keyword">import</span> com.baomidou.mybatisplus.extension.service.IService;<br><span class="hljs-keyword">import</span> com.baomidou.mybatisplus.generator.FastAutoGenerator;<br><span class="hljs-keyword">import</span> com.baomidou.mybatisplus.generator.config.DataSourceConfig;<br><span class="hljs-keyword">import</span> com.baomidou.mybatisplus.generator.config.InjectionConfig;<br><span class="hljs-keyword">import</span> com.baomidou.mybatisplus.generator.engine.FreemarkerTemplateEngine;<br><span class="hljs-keyword">import</span> lombok.extern.slf4j.Slf4j;<br><br><span class="hljs-keyword">import</span> java.util.Arrays;<br><span class="hljs-keyword">import</span> java.util.Scanner;<br><br><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * &lt;p&gt;Title: CodeGeneratorUtil&lt;/p&gt;</span><br><span class="hljs-comment"> * &lt;p&gt;Description:</span><br><span class="hljs-comment"> * 描述：mybatis-plus 自动生成代码工具类</span><br><span class="hljs-comment"> * &lt;/p&gt;</span><br><span class="hljs-comment"> *</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@author</span> Jimmy.Shen</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@version</span> v1.0.0</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@since</span> 2022-10-19 9:58</span><br><span class="hljs-comment"> */</span><br><span class="hljs-meta">@Slf4j</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">CodeGeneratorUtil</span> &#123;<br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * 表前缀</span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> String[] PREFIX = <span class="hljs-keyword">new</span> <span class="hljs-title class_">String</span>[]&#123;<span class="hljs-string">&quot;illp_&quot;</span>, <span class="hljs-string">&quot;t_&quot;</span>&#125;;<br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * 是否生成controller、service、serviceImpl、converter</span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">boolean</span> <span class="hljs-variable">ONLY_UPDATE_COLUMNS</span> <span class="hljs-operator">=</span> <span class="hljs-literal">true</span>;<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * 数据源配置</span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> DataSourceConfig.<span class="hljs-type">Builder</span> <span class="hljs-variable">DATA_SOURCE_CONFIG</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">DataSourceConfig</span><br>            .Builder(<span class="hljs-string">&quot;jdbc:mysql://10.10.177.151:3309/smart_park?useUnicode=true&amp;characterEncoding=utf8&amp;zeroDateTimeBehavior=convertToNull&amp;useSSL=true&amp;serverTimezone=GMT%2B8&amp;nullCatalogMeansCurrent=true&quot;</span>,<br>            <span class="hljs-string">&quot;root&quot;</span>, <span class="hljs-string">&quot;ztesoft&quot;</span>);<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * 读取控制台内容</span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> String <span class="hljs-title function_">scanner</span><span class="hljs-params">(String tip)</span> &#123;<br>        <span class="hljs-type">Scanner</span> <span class="hljs-variable">scanner</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Scanner</span>(System.in);<br>        log.info(<span class="hljs-string">&quot;### 请输入&quot;</span> + tip);<br>        <span class="hljs-keyword">if</span> (scanner.hasNext()) &#123;<br>            <span class="hljs-type">String</span> <span class="hljs-variable">ipt</span> <span class="hljs-operator">=</span> scanner.next();<br>            <span class="hljs-keyword">if</span> (StrUtil.isNotEmpty(ipt)) &#123;<br>                <span class="hljs-keyword">return</span> ipt;<br>            &#125;<br>        &#125;<br>        <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">MybatisPlusException</span>(<span class="hljs-string">&quot;请输入正确的&quot;</span> + tip + <span class="hljs-string">&quot;！&quot;</span>);<br>    &#125;<br><br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-type">String</span> <span class="hljs-variable">projectPath</span> <span class="hljs-operator">=</span> System.getProperty(<span class="hljs-string">&quot;user.dir&quot;</span>);<br>        <span class="hljs-type">String</span> <span class="hljs-variable">outputDir</span> <span class="hljs-operator">=</span> projectPath + <span class="hljs-string">&quot;/springboot/src/main/java/&quot;</span>;<br>        String[] scannerArr = scanner(<span class="hljs-string">&quot;作者名,包名,表名&quot;</span>).split(<span class="hljs-string">&quot;,&quot;</span>);<br>        <span class="hljs-type">String</span> <span class="hljs-variable">authorName</span> <span class="hljs-operator">=</span> scannerArr[<span class="hljs-number">0</span>];<br>        <span class="hljs-type">String</span> <span class="hljs-variable">packageName</span> <span class="hljs-operator">=</span> scannerArr[<span class="hljs-number">1</span>];<br>        <span class="hljs-type">String</span> <span class="hljs-variable">tableName</span> <span class="hljs-operator">=</span> scannerArr[<span class="hljs-number">2</span>];<br>        <span class="hljs-comment">// 规定代码路径，如果代码在不同项目中可进行调整</span><br>        <span class="hljs-type">String</span> <span class="hljs-variable">controllerName</span> <span class="hljs-operator">=</span><br>                projectPath + <span class="hljs-string">&quot;/springboot/src/main/java/com/mitool/springboot/controller/&quot;</span> + packageName;<br>        <span class="hljs-type">String</span> <span class="hljs-variable">serviceName</span> <span class="hljs-operator">=</span><br>                projectPath + <span class="hljs-string">&quot;/springboot/src/main/java/com/mitool/springboot/service/&quot;</span> + packageName;<br>        <span class="hljs-type">String</span> <span class="hljs-variable">serviceImplName</span> <span class="hljs-operator">=</span><br>                projectPath + <span class="hljs-string">&quot;/springboot/src/main/java/com/mitool/springboot/service/&quot;</span> + packageName + <span class="hljs-string">&quot;/impl/&quot;</span>;<br>        <span class="hljs-type">String</span> <span class="hljs-variable">entityName</span> <span class="hljs-operator">=</span><br>                projectPath + <span class="hljs-string">&quot;/springboot/src/main/java/com/mitool/springboot/entity/dataobject/&quot;</span> + packageName;<br>        <span class="hljs-type">String</span> <span class="hljs-variable">mapperName</span> <span class="hljs-operator">=</span><br>                projectPath + <span class="hljs-string">&quot;/springboot/src/main/java/com/mitool/springboot/mapper/&quot;</span> + packageName;<br>        <span class="hljs-type">String</span> <span class="hljs-variable">mapperXmlName</span> <span class="hljs-operator">=</span><br>                projectPath + <span class="hljs-string">&quot;/springboot/src/main/resources/mybatis-mapper/&quot;</span> + packageName;<br>        <span class="hljs-type">String</span> <span class="hljs-variable">voName</span> <span class="hljs-operator">=</span><br>                projectPath + <span class="hljs-string">&quot;/springboot/src/main/java/com/mitool/springboot/entity/vo/&quot;</span> + packageName;<br>        <span class="hljs-type">String</span> <span class="hljs-variable">converterName</span> <span class="hljs-operator">=</span><br>                projectPath + <span class="hljs-string">&quot;/springboot/src/main/java/com/mitool/springboot/converter/&quot;</span> + packageName;<br>        FastAutoGenerator.create(DATA_SOURCE_CONFIG)<br>                <span class="hljs-comment">// 全局配置</span><br>                .globalConfig(builder -&gt;<br>                        <span class="hljs-comment">//作者名</span><br>                        builder.author(authorName)<br>                                <span class="hljs-comment">// 开启 swagger 模式默认值:false</span><br>                                .enableSwagger()<br>                                <span class="hljs-comment">// 禁止打开输出目录默认值:true</span><br>                                .disableOpenDir()<br>                                <span class="hljs-comment">// 指定输出目录</span><br>                                .outputDir(outputDir))<br>                .packageConfig(builder -&gt; builder.moduleName(packageName))<br>                .injectionConfig(builder -&gt; &#123;<br>                    updateColumn(entityName, mapperName, mapperXmlName, voName, builder);<br>                    <span class="hljs-keyword">if</span> (ONLY_UPDATE_COLUMNS) &#123;<br>                        updateTemplate(controllerName, serviceName, serviceImplName, converterName, builder);<br>                    &#125;<br>                &#125;)<br>                <span class="hljs-comment">//具体的生成文件的策略配置</span><br>                .strategyConfig(builder -&gt; &#123;<br>                    builder.addInclude(tableName.split(<span class="hljs-string">&quot;#&quot;</span>))<br>                            <span class="hljs-comment">// .enableSkipView()</span><br>                            .addTablePrefix(Arrays.asList(PREFIX))<br>                            .entityBuilder()<br>                            .enableFileOverride()<br>                            .enableLombok()<br>                            <span class="hljs-comment">// // controller</span><br>                            .controllerBuilder()<br>                            .enableRestStyle()<br>                            .formatFileName(<span class="hljs-string">&quot;%sController&quot;</span>)<br>                            .enableFileOverride()<br>                            <span class="hljs-comment">// service</span><br>                            .serviceBuilder()<br>                            .superServiceClass(IService.class)<br>                            .formatServiceFileName(<span class="hljs-string">&quot;%sService&quot;</span>)<br>                            .formatServiceImplFileName(<span class="hljs-string">&quot;%sServiceImpl&quot;</span>)<br>                            .enableFileOverride()<br>                            <span class="hljs-comment">//开启生成mapper</span><br>                            .mapperBuilder()<br>                            .enableBaseResultMap()<br>                            .enableBaseColumnList()<br>                            .superClass(BaseMapper.class)<br>                            .formatMapperFileName(<span class="hljs-string">&quot;%sMapper&quot;</span>)<br>                            .formatXmlFileName(<span class="hljs-string">&quot;%sXml&quot;</span>)<br>                            .enableFileOverride();<br><br>                &#125;)<br>                <span class="hljs-comment">//模板配置，如果你没有自定义的一些模板配置，这里直接使用默认即可。</span><br>                .templateConfig(config -&gt; config.entity(<span class="hljs-string">&quot;/templates/entity.java&quot;</span>))<br>                <span class="hljs-comment">//模板引擎配置</span><br>                .templateEngine(<span class="hljs-keyword">new</span> <span class="hljs-title class_">FreemarkerTemplateEngine</span>())<br>                .execute();<br><br>        <span class="hljs-comment">// 删除生成的自带的 baomidou代码</span><br>        FileUtil.del(projectPath + <span class="hljs-string">&quot;/springboot/src/main/java/com/baomidou&quot;</span>);<br>    &#125;<br><br><br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">updateColumn</span><span class="hljs-params">(String entityName, String mapperName, String mapperXmlName, String voName, InjectionConfig.Builder builder)</span> &#123;<br>        builder.customFile(consumer -&gt; consumer<br>                .fileName(<span class="hljs-string">&quot;DO.java&quot;</span>)<br>                .filePath(entityName)<br>                .enableFileOverride()<br>                .templatePath(<span class="hljs-string">&quot;/templates/entity.java.ftl&quot;</span>));<br>        builder.customFile(consumer -&gt; consumer<br>                .fileName(<span class="hljs-string">&quot;Mapper.java&quot;</span>)<br>                .filePath(mapperName)<br>                .enableFileOverride()<br>                .templatePath(<span class="hljs-string">&quot;/templates/mapper.java.ftl&quot;</span>));<br>        builder.customFile(consumer -&gt; consumer<br>                .fileName(<span class="hljs-string">&quot;Mapper.xml&quot;</span>)<br>                .filePath(mapperXmlName)<br>                .enableFileOverride()<br>                .templatePath(<span class="hljs-string">&quot;/templates/mapper.xml.ftl&quot;</span>));<br>        builder.customFile(consumer -&gt; consumer<br>                .fileName(<span class="hljs-string">&quot;VO.java&quot;</span>)<br>                .filePath(voName)<br>                .enableFileOverride()<br>                .templatePath(<span class="hljs-string">&quot;/templates/vo.java.ftl&quot;</span>));<br>    &#125;<br><br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">updateTemplate</span><span class="hljs-params">(String controllerName,</span><br><span class="hljs-params">                                       String serviceName, String serviceImplName,</span><br><span class="hljs-params">                                       String converterName, InjectionConfig.Builder builder)</span> &#123;<br>        builder.customFile(consumer -&gt; consumer<br>                .fileName(<span class="hljs-string">&quot;Controller.java&quot;</span>)<br>                .filePath(controllerName)<br>                .enableFileOverride()<br>                .templatePath(<span class="hljs-string">&quot;/templates/controller.java.ftl&quot;</span>));<br>        builder.customFile(consumer -&gt; consumer<br>                .fileName(<span class="hljs-string">&quot;Service.java&quot;</span>)<br>                .filePath(serviceName)<br>                .enableFileOverride()<br>                .templatePath(<span class="hljs-string">&quot;/templates/service.java.ftl&quot;</span>));<br>        builder.customFile(consumer -&gt; consumer<br>                .fileName(<span class="hljs-string">&quot;ServiceImpl.java&quot;</span>)<br>                .filePath(serviceImplName)<br>                .enableFileOverride()<br>                .templatePath(<span class="hljs-string">&quot;/templates/serviceImpl.java.ftl&quot;</span>));<br>        builder.customFile(consumer -&gt; consumer<br>                .fileName(<span class="hljs-string">&quot;AppConverter.java&quot;</span>)<br>                .filePath(converterName)<br>                .enableFileOverride()<br>                .templatePath(<span class="hljs-string">&quot;/templates/converter.java.ftl&quot;</span>));<br>    &#125;<br><br>&#125;<br></code></pre></td></tr></table></figure><h3 id="五、模板（FreemarkerTemplate）"><a href="#五、模板（FreemarkerTemplate）" class="headerlink" title="五、模板（FreemarkerTemplate）"></a>五、模板（FreemarkerTemplate）</h3><p>模板文件放在resource/templates下</p><h4 id="1、controller-java-ftl"><a href="#1、controller-java-ftl" class="headerlink" title="1、controller.java.ftl"></a>1、controller.java.ftl</h4><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br></pre></td><td class="code"><pre><code class="hljs kotlin"><span class="hljs-keyword">package</span> com.mitool.springboot.controller.$&#123;<span class="hljs-keyword">package</span>.ModuleName&#125;;<br><br><span class="hljs-keyword">import</span> com.mitool.springboot.utils.PageUtil;<br><span class="hljs-keyword">import</span> io.swagger.annotations.Api;<br><span class="hljs-keyword">import</span> io.swagger.annotations.ApiOperation;<br><span class="hljs-keyword">import</span> lombok.extern.slf4j.Slf4j;<br><span class="hljs-keyword">import</span> com.mitool.springboot.service.$&#123;<span class="hljs-keyword">package</span>.ModuleName&#125;.$&#123;table.serviceName&#125;;<br><span class="hljs-keyword">import</span> com.mitool.springboot.entity.dataobject.$&#123;<span class="hljs-keyword">package</span>.ModuleName&#125;.$&#123;entity&#125;DO;<br><span class="hljs-keyword">import</span> com.mitool.springboot.entity.vo.$&#123;<span class="hljs-keyword">package</span>.ModuleName&#125;.$&#123;entity&#125;VO;<br><span class="hljs-keyword">import</span> com.mitool.springboot.converter.$&#123;<span class="hljs-keyword">package</span>.ModuleName&#125;.$&#123;entity&#125;AppConverter;<br><span class="hljs-keyword">import</span> com.alibaba.cola.dto.SingleResponse;<br><span class="hljs-keyword">import</span> com.github.pagehelper.PageHelper;<br><span class="hljs-keyword">import</span> com.github.pagehelper.PageInfo;<br>&lt;#<span class="hljs-keyword">if</span> superControllerClassPackage??&gt;<br>    <span class="hljs-keyword">import</span> $&#123;superControllerClassPackage&#125;;<br>&lt;/#<span class="hljs-keyword">if</span>&gt;<br><span class="hljs-keyword">import</span> org.springframework.web.bind.<span class="hljs-keyword">annotation</span>.GetMapping;<br><span class="hljs-keyword">import</span> org.springframework.web.bind.<span class="hljs-keyword">annotation</span>.PostMapping;<br><span class="hljs-keyword">import</span> org.springframework.web.bind.<span class="hljs-keyword">annotation</span>.RequestBody;<br><span class="hljs-keyword">import</span> org.springframework.web.bind.<span class="hljs-keyword">annotation</span>.RequestMapping;<br><span class="hljs-keyword">import</span> org.springframework.web.bind.<span class="hljs-keyword">annotation</span>.RequestParam;<br><span class="hljs-keyword">import</span> org.springframework.web.bind.<span class="hljs-keyword">annotation</span>.RestController;<br><br><span class="hljs-keyword">import</span> javax.<span class="hljs-keyword">annotation</span>.Resource;<br><span class="hljs-keyword">import</span> java.util.List;<br><span class="hljs-comment">/**</span><br><span class="hljs-comment">* &lt;p&gt;</span><br><span class="hljs-comment">* $&#123;table.comment!&#125; 前端控制器</span><br><span class="hljs-comment">* &lt;/p&gt;</span><br><span class="hljs-comment">*</span><br><span class="hljs-comment">* <span class="hljs-doctag">@author</span> $&#123;author&#125;</span><br><span class="hljs-comment">* <span class="hljs-doctag">@since</span> $&#123;date&#125;</span><br><span class="hljs-comment">*/</span><br><span class="hljs-meta">@Slf4j</span><br><span class="hljs-meta">@RestController</span><br><span class="hljs-meta">@RequestMapping(<span class="hljs-string">&quot;/api/&lt;#if controllerMappingHyphenStyle&gt;<span class="hljs-subst">$&#123;controllerMappingHyphen&#125;</span>&lt;#else&gt;<span class="hljs-subst">$&#123;table.entityPath&#125;</span>&lt;/#if&gt;&quot;</span>)</span><br><span class="hljs-meta">@Api(value = <span class="hljs-string">&quot;<span class="hljs-subst">$&#123;table.comment!&#125;</span>&quot;</span>, tags = <span class="hljs-string">&quot;<span class="hljs-subst">$&#123;table.comment!&#125;</span> 管理模块&quot;</span>)</span><br>&lt;#<span class="hljs-keyword">if</span> superControllerClass??&gt;<br>    <span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> $</span>&#123;table.controllerName&#125; extends $&#123;superControllerClass&#125; &#123;<br>&lt;#<span class="hljs-keyword">else</span>&gt;<br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> $</span>&#123;table.controllerName&#125; &#123;<br>&lt;/#<span class="hljs-keyword">if</span>&gt;<br><br>    <span class="hljs-meta">@Resource</span><br>    <span class="hljs-keyword">private</span> $&#123;table.serviceName&#125; service;<br><br>    <span class="hljs-meta">@Resource</span><br>    <span class="hljs-keyword">private</span> $&#123;entity&#125;AppConverter converter;<br><br>    <span class="hljs-meta">@ApiOperation(value = <span class="hljs-string">&quot;<span class="hljs-subst">$&#123;table.comment!&#125;</span>分页查询&quot;</span>, notes = <span class="hljs-string">&quot;<span class="hljs-subst">$&#123;table.comment!&#125;</span>分页查询&quot;</span>)</span><br>    <span class="hljs-meta">@GetMapping(<span class="hljs-string">&quot;/page&quot;</span>)</span><br>    <span class="hljs-keyword">public</span> SingleResponse&lt;?&gt; page(<span class="hljs-meta">@RequestParam</span> Integer pageIndex, <span class="hljs-meta">@RequestParam</span> Integer pageSize) &#123;<br>        PageHelper.startPage(pageIndex, pageSize);<br>        List&lt;$&#123;entity&#125;DO&gt; list = service.list();<br>        <span class="hljs-keyword">return</span> SingleResponse.of(PageUtil.pageInfoCopy(new PageInfo&lt;&gt;(list), $&#123;entity&#125;VO.<span class="hljs-keyword">class</span>, converter::toValueObject));<br>    &#125;<br><br>    <span class="hljs-meta">@ApiOperation(value = <span class="hljs-string">&quot;<span class="hljs-subst">$&#123;table.comment!&#125;</span>列表查询&quot;</span>, notes = <span class="hljs-string">&quot;<span class="hljs-subst">$&#123;table.comment!&#125;</span>列表查询&quot;</span>)</span><br>    <span class="hljs-meta">@GetMapping(<span class="hljs-string">&quot;/list&quot;</span>)</span><br>    <span class="hljs-keyword">public</span> SingleResponse&lt;?&gt; list() &#123;<br>        List&lt;$&#123;entity&#125;DO&gt; list = service.list();<br>        <span class="hljs-keyword">return</span> SingleResponse.of(converter.toValueObject(list));<br>    &#125;<br><br>    <span class="hljs-meta">@ApiOperation(value = <span class="hljs-string">&quot;<span class="hljs-subst">$&#123;table.comment!&#125;</span>详情&quot;</span>, notes = <span class="hljs-string">&quot;<span class="hljs-subst">$&#123;table.comment!&#125;</span>详情&quot;</span>)</span><br>    <span class="hljs-meta">@GetMapping(<span class="hljs-string">&quot;/detail&quot;</span>)</span><br>    <span class="hljs-keyword">public</span> SingleResponse&lt;?&gt; detail(<span class="hljs-meta">@RequestParam</span> Integer id) &#123;<br>        <span class="hljs-keyword">return</span> SingleResponse.of(converter.toValueObject(service.getById(id)));<br>    &#125;<br><br>    <span class="hljs-meta">@ApiOperation(<span class="hljs-string">&quot;新增&quot;</span>)</span><br>    <span class="hljs-meta">@PostMapping(<span class="hljs-string">&quot;/save&quot;</span>)</span><br>    <span class="hljs-keyword">public</span> SingleResponse&lt;?&gt; save(<span class="hljs-meta">@RequestBody</span> $&#123;entity&#125;VO param) &#123;<br>        $&#123;entity&#125;DO dataObject = converter.toDataObject(param);<br>        service.save(dataObject);<br>        <span class="hljs-keyword">return</span> SingleResponse.buildSuccess();<br>    &#125;<br><br>    <span class="hljs-meta">@ApiOperation(<span class="hljs-string">&quot;更新&quot;</span>)</span><br>    <span class="hljs-meta">@PostMapping(<span class="hljs-string">&quot;/update&quot;</span>)</span><br>    <span class="hljs-keyword">public</span> SingleResponse&lt;?&gt; update(<span class="hljs-meta">@RequestBody</span> $&#123;entity&#125;VO param) &#123;<br>        $&#123;entity&#125;DO dataObject = converter.toDataObject(param);<br>        service.updateById(dataObject);<br>        <span class="hljs-keyword">return</span> SingleResponse.buildSuccess();<br>    &#125;<br><br>    <span class="hljs-meta">@ApiOperation(<span class="hljs-string">&quot;删除&quot;</span>)</span><br>    <span class="hljs-meta">@PostMapping(<span class="hljs-string">&quot;/remove&quot;</span>)</span><br>    <span class="hljs-keyword">public</span> SingleResponse&lt;?&gt; remove(<span class="hljs-meta">@RequestBody</span> $&#123;entity&#125;VO param) &#123;<br>        service.removeById(param.getId());<br>        <span class="hljs-keyword">return</span> SingleResponse.buildSuccess();<br>    &#125;<br>&#125;<br><br></code></pre></td></tr></table></figure><h4 id="2、converter-java-ftl"><a href="#2、converter-java-ftl" class="headerlink" title="2、converter.java.ftl"></a>2、converter.java.ftl</h4><figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><code class="hljs elixir">package com.mitool.springboot.converter.<span class="hljs-variable">$&#123;</span>package.<span class="hljs-title class_">ModuleName</span>&#125;;<br><br><span class="hljs-keyword">import</span> com.mitool.springboot.entity.dataobject.<span class="hljs-variable">$&#123;</span>package.<span class="hljs-title class_">ModuleName</span>&#125;.<span class="hljs-variable">$&#123;</span>entity&#125;<span class="hljs-title class_">DO</span>;<br><span class="hljs-keyword">import</span> com.mitool.springboot.entity.vo.<span class="hljs-variable">$&#123;</span>package.<span class="hljs-title class_">ModuleName</span>&#125;.<span class="hljs-variable">$&#123;</span>entity&#125;<span class="hljs-title class_">VO</span>;<br><br><span class="hljs-keyword">import</span> org.mapstruct.<span class="hljs-title class_">Mapper</span>;<br><br><span class="hljs-keyword">import</span> java.util.<span class="hljs-title class_">List</span>;<br><br>/**<br> * &lt;p&gt;<br> * <span class="hljs-variable">$&#123;</span>table.comment!&#125; app 模型转换服务<br> * &lt;/p&gt;<br> *<br> * <span class="hljs-variable">@author</span> <span class="hljs-variable">$&#123;</span>author&#125;<br> * <span class="hljs-variable">@since</span> <span class="hljs-variable">$&#123;</span>date&#125;<br> */<br><span class="hljs-variable">@Mapper</span>(componentModel = <span class="hljs-string">&quot;spring&quot;</span>)<br>public interface <span class="hljs-variable">$&#123;</span>entity&#125;<span class="hljs-title class_">AppConverter</span> &#123;<br><br>    <span class="hljs-variable">$&#123;</span>entity&#125;<span class="hljs-title class_">DO</span> toDataObject(<span class="hljs-variable">$&#123;</span>entity&#125;<span class="hljs-title class_">VO</span> <span class="hljs-variable">$&#123;</span>entity?uncap_first&#125;<span class="hljs-title class_">VO</span>);<br><br>    <span class="hljs-title class_">List</span>&lt;<span class="hljs-variable">$&#123;</span>entity&#125;<span class="hljs-title class_">DO</span>&gt; toDataObject(<span class="hljs-title class_">List</span>&lt;<span class="hljs-variable">$&#123;</span>entity&#125;<span class="hljs-title class_">VO</span>&gt; <span class="hljs-variable">$&#123;</span>entity?uncap_first&#125;<span class="hljs-title class_">VOList</span>);<br><br>    <span class="hljs-variable">$&#123;</span>entity&#125;<span class="hljs-title class_">VO</span> toValueObject(<span class="hljs-variable">$&#123;</span>entity&#125;<span class="hljs-title class_">DO</span> <span class="hljs-variable">$&#123;</span>entity?uncap_first&#125;<span class="hljs-title class_">DO</span>);<br><br>    <span class="hljs-title class_">List</span>&lt;<span class="hljs-variable">$&#123;</span>entity&#125;<span class="hljs-title class_">VO</span>&gt; toValueObject(<span class="hljs-title class_">List</span>&lt;<span class="hljs-variable">$&#123;</span>entity&#125;<span class="hljs-title class_">DO</span>&gt; <span class="hljs-variable">$&#123;</span>entity?uncap_first&#125;<span class="hljs-title class_">DOList</span>);<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="3、entity-java-ftl"><a href="#3、entity-java-ftl" class="headerlink" title="3、entity.java.ftl"></a>3、entity.java.ftl</h4><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><code class="hljs kotlin"><span class="hljs-keyword">package</span> com.mitool.springboot.entity.dataobject.$&#123;<span class="hljs-keyword">package</span>.ModuleName&#125;;<br><br><span class="hljs-keyword">import</span> com.baomidou.mybatisplus.<span class="hljs-keyword">annotation</span>.IdType;<br><span class="hljs-keyword">import</span> com.baomidou.mybatisplus.<span class="hljs-keyword">annotation</span>.TableId;<br><span class="hljs-keyword">import</span> com.baomidou.mybatisplus.<span class="hljs-keyword">annotation</span>.TableName;<br><span class="hljs-keyword">import</span> lombok.Data;<br><br><span class="hljs-keyword">import</span> java.io.Serializable;<br><span class="hljs-keyword">import</span> java.time.LocalDateTime;<br><br><span class="hljs-comment">/**</span><br><span class="hljs-comment">* &lt;p&gt;</span><br><span class="hljs-comment"> * Title:$&#123;entity&#125;</span><br><span class="hljs-comment"> * &lt;/p&gt;</span><br><span class="hljs-comment"> * &lt;p&gt;</span><br><span class="hljs-comment"> * Description:描述：$&#123;table.comment&#125; 对象</span><br><span class="hljs-comment"> * &lt;/p&gt;</span><br><span class="hljs-comment"> *</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@author</span> $&#123;author&#125;</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@version</span> 1.0.0</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@since</span> $&#123;date&#125;</span><br><span class="hljs-comment">**/</span><br><span class="hljs-meta">@Data</span><br><span class="hljs-meta">@TableName(<span class="hljs-string">&quot;<span class="hljs-subst">$&#123;table.name&#125;</span>&quot;</span>)</span><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> $</span>&#123;entity&#125;DO implements Serializable &#123;<br><br>    <span class="hljs-keyword">private</span> static <span class="hljs-keyword">final</span> long serialVersionUID = <span class="hljs-number">1L</span>;<br>&lt;#-- ----------  BEGIN 字段循环遍历  ----------&gt;<br>&lt;#list table.fields <span class="hljs-keyword">as</span> field&gt;<br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * $&#123;field.comment&#125;</span><br><span class="hljs-comment">     */</span><br> &lt;#<span class="hljs-keyword">if</span> field.keyFlag&gt;<br>  &lt;#assign keyPropertyName=<span class="hljs-string">&quot;<span class="hljs-subst">$&#123;field.propertyName&#125;</span>&quot;</span>/&gt;<br>    <span class="hljs-meta">@TableId(value = <span class="hljs-string">&quot;<span class="hljs-subst">$&#123;field.name&#125;</span>&quot;</span>, type = IdType.AUTO)</span><br> &lt;/#<span class="hljs-keyword">if</span>&gt;<br>    <span class="hljs-keyword">private</span> $&#123;field.propertyType&#125; $&#123;field.propertyName&#125;;<br>&lt;/#list&gt;<br>&lt;#------------  END 字段循环遍历  ----------&gt;<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="4、mapper-java-ftl"><a href="#4、mapper-java-ftl" class="headerlink" title="4、mapper.java.ftl"></a>4、mapper.java.ftl</h4><figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><code class="hljs elixir">package com.mitool.springboot.mapper.<span class="hljs-variable">$&#123;</span>package.<span class="hljs-title class_">ModuleName</span>&#125;;<br><br><span class="hljs-keyword">import</span> com.mitool.springboot.entity.dataobject.<span class="hljs-variable">$&#123;</span>package.<span class="hljs-title class_">ModuleName</span>&#125;.<span class="hljs-variable">$&#123;</span>entity&#125;<span class="hljs-title class_">DO</span>;<br><span class="hljs-keyword">import</span> <span class="hljs-variable">$&#123;</span>superMapperClassPackage&#125;;<br>&lt;<span class="hljs-comment">#if mapperAnnotationClass??&gt;</span><br> <span class="hljs-keyword">import</span> <span class="hljs-variable">$&#123;</span>mapperAnnotationClass.name&#125;;<br>&lt;/<span class="hljs-comment">#if&gt;</span><br><span class="hljs-keyword">import</span> org.apache.ibatis.annotations.<span class="hljs-title class_">Mapper</span>;<br><br>/**<br>* &lt;p&gt;<br> * <span class="hljs-variable">$&#123;</span>table.comment!&#125; <span class="hljs-title class_">Mapper</span> 接口<br> * &lt;/p&gt;<br> *<br> * <span class="hljs-variable">@author</span> <span class="hljs-variable">$&#123;</span>author&#125;<br> * <span class="hljs-variable">@since</span> <span class="hljs-variable">$&#123;</span>date&#125;<br> */<br>&lt;<span class="hljs-comment">#if mapperAnnotationClass??&gt;</span><br>@<span class="hljs-variable">$&#123;</span>mapperAnnotationClass.simpleName&#125;<br>&lt;/<span class="hljs-comment">#if&gt;</span><br>&lt;<span class="hljs-comment">#if kotlin&gt;</span><br>interface <span class="hljs-variable">$&#123;</span>table.mapperName&#125; : <span class="hljs-variable">$&#123;</span>superMapperClass&#125;&lt;<span class="hljs-variable">$&#123;</span>entity&#125;<span class="hljs-title class_">DO</span>&gt;<br>&lt;<span class="hljs-comment">#else&gt;</span><br><span class="hljs-variable">@Mapper</span><br>public interface <span class="hljs-variable">$&#123;</span>table.mapperName&#125; extends <span class="hljs-variable">$&#123;</span>superMapperClass&#125;&lt;<span class="hljs-variable">$&#123;</span>entity&#125;<span class="hljs-title class_">DO</span>&gt; &#123;<br><br>&#125;<br>&lt;/<span class="hljs-comment">#if&gt;</span><br><br></code></pre></td></tr></table></figure><h4 id="5、mapper-xml-ftl"><a href="#5、mapper-xml-ftl" class="headerlink" title="5、mapper.xml.ftl"></a>5、mapper.xml.ftl</h4><figure class="highlight dust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><code class="hljs dust"><span class="language-xml"><span class="hljs-meta">&lt;?xml version=<span class="hljs-string">&quot;1.0&quot;</span> encoding=<span class="hljs-string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="language-xml"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">mapper</span> <span class="hljs-keyword">PUBLIC</span> <span class="hljs-string">&quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;</span> <span class="hljs-string">&quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;</span>&gt;</span></span><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">mapper</span> <span class="hljs-attr">namespace</span>=<span class="hljs-string">&quot;com.mitool.springboot.mapper.$</span></span></span><span class="hljs-template-variable">&#123;package.ModuleName&#125;</span><span class="language-xml"><span class="hljs-tag"><span class="hljs-string">.$</span></span></span><span class="hljs-template-variable">&#123;table.mapperName&#125;</span><span class="language-xml"><span class="hljs-tag"><span class="hljs-string">&quot;</span>&gt;</span></span><br><span class="language-xml"></span><br><span class="language-xml">    &lt;#if enableCache&gt;</span><br><span class="language-xml">        <span class="hljs-comment">&lt;!-- 开启二级缓存 --&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">cache</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;$</span></span></span><span class="hljs-template-variable">&#123;cacheClassName&#125;</span><span class="language-xml"><span class="hljs-tag"><span class="hljs-string">&quot;</span>/&gt;</span></span><br><span class="language-xml"></span><br><span class="language-xml">    &lt;/#if&gt;</span><br><span class="language-xml"></span><br><span class="language-xml">    <span class="hljs-comment">&lt;!-- 通用查询映射结果 --&gt;</span></span><br><span class="language-xml">    <span class="hljs-tag">&lt;<span class="hljs-name">resultMap</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;BaseResultMap&quot;</span></span></span><br><span class="hljs-tag"><span class="language-xml">               <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;com.mitool.springboot.entity.dataobject.$</span></span></span><span class="hljs-template-variable">&#123;package.ModuleName&#125;</span><span class="language-xml"><span class="hljs-tag"><span class="hljs-string">.$</span></span></span><span class="hljs-template-variable">&#123;entity&#125;</span><span class="language-xml"><span class="hljs-tag"><span class="hljs-string">DO&quot;</span>&gt;</span></span><br><span class="language-xml">        &lt;#list table.fields as field&gt;</span><br><span class="language-xml">            &lt;#if field.keyFlag&gt;&lt;#--生成主键排在第一位--&gt;</span><br><span class="language-xml">            <span class="hljs-tag">&lt;<span class="hljs-name">id</span> <span class="hljs-attr">column</span>=<span class="hljs-string">&quot;$</span></span></span><span class="hljs-template-variable">&#123;field.name&#125;</span><span class="language-xml"><span class="hljs-tag"><span class="hljs-string">&quot;</span> <span class="hljs-attr">property</span>=<span class="hljs-string">&quot;$</span></span></span><span class="hljs-template-variable">&#123;field.propertyName&#125;</span><span class="language-xml"><span class="hljs-tag"><span class="hljs-string">&quot;</span>/&gt;</span></span><br><span class="language-xml">            &lt;/#if&gt;</span><br><span class="language-xml">        &lt;/#list&gt;</span><br><span class="language-xml">        &lt;#list table.commonFields as field&gt;&lt;#--生成公共字段 --&gt;</span><br><span class="language-xml">            <span class="hljs-tag">&lt;<span class="hljs-name">result</span> <span class="hljs-attr">column</span>=<span class="hljs-string">&quot;$</span></span></span><span class="hljs-template-variable">&#123;field.name&#125;</span><span class="language-xml"><span class="hljs-tag"><span class="hljs-string">&quot;</span> <span class="hljs-attr">property</span>=<span class="hljs-string">&quot;$</span></span></span><span class="hljs-template-variable">&#123;field.propertyName&#125;</span><span class="language-xml"><span class="hljs-tag"><span class="hljs-string">&quot;</span>/&gt;</span></span><br><span class="language-xml">        &lt;/#list&gt;</span><br><span class="language-xml">        &lt;#list table.fields as field&gt;</span><br><span class="language-xml">            &lt;#if !field.keyFlag&gt;&lt;#--生成普通字段 --&gt;</span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">result</span> <span class="hljs-attr">column</span>=<span class="hljs-string">&quot;$</span></span></span><span class="hljs-template-variable">&#123;field.name&#125;</span><span class="language-xml"><span class="hljs-tag"><span class="hljs-string">&quot;</span> <span class="hljs-attr">property</span>=<span class="hljs-string">&quot;$</span></span></span><span class="hljs-template-variable">&#123;field.propertyName&#125;</span><span class="language-xml"><span class="hljs-tag"><span class="hljs-string">&quot;</span> /&gt;</span></span><br><span class="language-xml">&lt;/#if&gt;</span><br><span class="language-xml">&lt;/#list&gt;</span><br><span class="language-xml">    <span class="hljs-tag">&lt;/<span class="hljs-name">resultMap</span>&gt;</span></span><br><span class="language-xml"></span><br><span class="language-xml"></span><br><span class="language-xml">&lt;#if baseColumnList&gt;</span><br><span class="language-xml">    <span class="hljs-comment">&lt;!-- 通用查询结果列 --&gt;</span></span><br><span class="language-xml">    <span class="hljs-tag">&lt;<span class="hljs-name">sql</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;Base_Column_List&quot;</span>&gt;</span></span><br><span class="language-xml">&lt;#list table.commonFields as field&gt;</span><br><span class="language-xml">        $</span><span class="hljs-template-variable">&#123;field.columnName&#125;</span><span class="language-xml">,</span><br><span class="language-xml">&lt;/#list&gt;</span><br><span class="language-xml">        $</span><span class="hljs-template-variable">&#123;table.fieldNames&#125;</span><span class="language-xml"></span><br><span class="language-xml">    <span class="hljs-tag">&lt;/<span class="hljs-name">sql</span>&gt;</span></span><br><span class="language-xml"></span><br><span class="language-xml">&lt;/#if&gt;</span><br><span class="language-xml"><span class="hljs-tag">&lt;/<span class="hljs-name">mapper</span>&gt;</span></span><br><span class="language-xml"></span><br></code></pre></td></tr></table></figure><h4 id="6、service-java-ftl"><a href="#6、service-java-ftl" class="headerlink" title="6、service.java.ftl"></a>6、service.java.ftl</h4><figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs elixir">package com.mitool.springboot.service.<span class="hljs-variable">$&#123;</span>package.<span class="hljs-title class_">ModuleName</span>&#125;;<br><br><span class="hljs-keyword">import</span> <span class="hljs-variable">$&#123;</span>superServiceClassPackage&#125;;<br><span class="hljs-keyword">import</span> com.mitool.springboot.entity.dataobject.<span class="hljs-variable">$&#123;</span>package.<span class="hljs-title class_">ModuleName</span>&#125;.<span class="hljs-variable">$&#123;</span>entity&#125;<span class="hljs-title class_">DO</span>;<br><br>/**<br>* &lt;p&gt;<br> * <span class="hljs-variable">$&#123;</span>table.comment!&#125; 服务类<br> * &lt;/p&gt;<br>*<br>* <span class="hljs-variable">@author</span> <span class="hljs-variable">$&#123;</span>author&#125;<br>* <span class="hljs-variable">@since</span> <span class="hljs-variable">$&#123;</span>date&#125;<br>*/<br>&lt;<span class="hljs-comment">#if kotlin&gt;</span><br>interface <span class="hljs-variable">$&#123;</span>table.serviceName&#125; : <span class="hljs-variable">$&#123;</span>superServiceClass&#125;&lt;<span class="hljs-variable">$&#123;</span>entity&#125;<span class="hljs-title class_">DO</span>&gt;<br>&lt;<span class="hljs-comment">#else&gt;</span><br>public interface <span class="hljs-variable">$&#123;</span>table.serviceName&#125; extends <span class="hljs-variable">$&#123;</span>superServiceClass&#125;&lt;<span class="hljs-variable">$&#123;</span>entity&#125;<span class="hljs-title class_">DO</span>&gt; &#123;<br><br>&#125;<br>&lt;/<span class="hljs-comment">#if&gt;</span><br><br></code></pre></td></tr></table></figure><h4 id="7、serviceImpl-java-ftl"><a href="#7、serviceImpl-java-ftl" class="headerlink" title="7、serviceImpl.java.ftl"></a>7、serviceImpl.java.ftl</h4><figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs elixir">package com.mitool.springboot.service.<span class="hljs-variable">$&#123;</span>package.<span class="hljs-title class_">ModuleName</span>&#125;.impl;<br><br><span class="hljs-keyword">import</span> com.mitool.springboot.mapper.<span class="hljs-variable">$&#123;</span>package.<span class="hljs-title class_">ModuleName</span>&#125;.<span class="hljs-variable">$&#123;</span>table.mapperName&#125;;<br><span class="hljs-keyword">import</span> com.mitool.springboot.service.<span class="hljs-variable">$&#123;</span>package.<span class="hljs-title class_">ModuleName</span>&#125;.<span class="hljs-variable">$&#123;</span>table.serviceName&#125;;<br><span class="hljs-keyword">import</span> com.mitool.springboot.entity.dataobject.<span class="hljs-variable">$&#123;</span>package.<span class="hljs-title class_">ModuleName</span>&#125;.<span class="hljs-variable">$&#123;</span>entity&#125;<span class="hljs-title class_">DO</span>;<br><span class="hljs-keyword">import</span> <span class="hljs-variable">$&#123;</span>superServiceImplClassPackage&#125;;<br><span class="hljs-keyword">import</span> org.springframework.stereotype.<span class="hljs-title class_">Service</span>;<br><br>/**<br>* &lt;p&gt;<br> * <span class="hljs-variable">$&#123;</span>table.comment!&#125; 服务实现类<br> * &lt;/p&gt;<br>*<br>* <span class="hljs-variable">@author</span> <span class="hljs-variable">$&#123;</span>author&#125;<br>* <span class="hljs-variable">@since</span> <span class="hljs-variable">$&#123;</span>date&#125;<br> */<br><span class="hljs-variable">@Service</span><br>&lt;<span class="hljs-comment">#if kotlin&gt;</span><br>open class <span class="hljs-variable">$&#123;</span>table.serviceImplName&#125; : <span class="hljs-variable">$&#123;</span>superServiceImplClass&#125;&lt;<span class="hljs-variable">$&#123;</span>table.mapperName&#125;, <span class="hljs-variable">$&#123;</span>entity&#125;<span class="hljs-title class_">DO</span>&gt;(), <span class="hljs-variable">$&#123;</span>table.serviceName&#125; &#123;<br><br>&#125;<br>&lt;<span class="hljs-comment">#else&gt;</span><br>public class <span class="hljs-variable">$&#123;</span>table.serviceImplName&#125; extends <span class="hljs-variable">$&#123;</span>superServiceImplClass&#125;&lt;<span class="hljs-variable">$&#123;</span>table.mapperName&#125;, <span class="hljs-variable">$&#123;</span>entity&#125;<span class="hljs-title class_">DO</span>&gt; implements <span class="hljs-variable">$&#123;</span>table.serviceName&#125; &#123;<br><br>&#125;<br>&lt;/<span class="hljs-comment">#if&gt;</span><br><br></code></pre></td></tr></table></figure><h4 id="8、vo-java-ftl"><a href="#8、vo-java-ftl" class="headerlink" title="8、vo.java.ftl"></a>8、vo.java.ftl</h4><figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><code class="hljs elixir">package com.mitool.springboot.entity.vo.<span class="hljs-variable">$&#123;</span>package.<span class="hljs-title class_">ModuleName</span>&#125;;<br><br>&lt;<span class="hljs-comment">#list table.importPackages as pkg&gt;</span><br>    &lt;<span class="hljs-comment">#if pkg?contains(&quot;baomidou&quot;)&gt;</span><br>    &lt;<span class="hljs-comment">#elseif pkg?contains(&quot;Serializable&quot;)&gt;</span><br>    &lt;<span class="hljs-comment">#else&gt;</span><br><span class="hljs-keyword">import</span> <span class="hljs-variable">$&#123;</span>pkg&#125;;<br>    &lt;/<span class="hljs-comment">#if&gt;</span><br>&lt;/<span class="hljs-comment">#list&gt;</span><br><span class="hljs-keyword">import</span> lombok.<span class="hljs-title class_">Data</span>;<br><span class="hljs-keyword">import</span> io.swagger.annotations.<span class="hljs-title class_">ApiModel</span>;<br><span class="hljs-keyword">import</span> io.swagger.annotations.<span class="hljs-title class_">ApiModelProperty</span>;<br><br>/**<br> * &lt;p&gt;<br> * <span class="hljs-variable">$&#123;</span>table.comment!&#125; 请求模型<br> * &lt;/p&gt;<br> *<br> * <span class="hljs-variable">@author</span> <span class="hljs-variable">$&#123;</span>author&#125;<br> * <span class="hljs-variable">@since</span> <span class="hljs-variable">$&#123;</span>date&#125;<br> */<br><span class="hljs-variable">@ApiModel</span>(value=<span class="hljs-string">&quot;$&#123;entity&#125;对象&quot;</span>, description=<span class="hljs-string">&quot;$&#123;table.comment!&#125;&quot;</span>)<br><span class="hljs-variable">@Data</span><br>public class <span class="hljs-variable">$&#123;</span>entity&#125;<span class="hljs-title class_">VO</span> &#123;<br><br>&lt;<span class="hljs-comment">#-- ----------  BEGIN 字段循环遍历  ----------&gt;</span><br>&lt;<span class="hljs-comment">#list table.fields as field&gt;</span><br>    &lt;<span class="hljs-comment">#if field.name != &quot;is_delete&quot;&gt;</span><br>        &lt;<span class="hljs-comment">#if field.keyFlag&gt;</span><br>            &lt;<span class="hljs-comment">#assign keyPropertyName=&quot;$&#123;field.propertyName&#125;&quot;/&gt;</span><br>        &lt;/<span class="hljs-comment">#if&gt;</span><br><br>        &lt;<span class="hljs-comment">#if field.comment!?length gt 0&gt;</span><br>    /**<br>     * <span class="hljs-variable">$&#123;</span>field.comment&#125;<br>     */<br>    <span class="hljs-variable">@ApiModelProperty</span>(value = <span class="hljs-string">&quot;$&#123;field.comment&#125;&quot;</span>)<br>        &lt;/<span class="hljs-comment">#if&gt;</span><br>    private <span class="hljs-variable">$&#123;</span>field.propertyType&#125; <span class="hljs-variable">$&#123;</span>field.propertyName&#125;;<br>    &lt;/<span class="hljs-comment">#if&gt;</span><br>&lt;/<span class="hljs-comment">#list&gt;</span><br>&lt;<span class="hljs-comment">#------------  END 字段循环遍历  ----------&gt;</span><br>&#125;<br><br></code></pre></td></tr></table></figure><h3 id="六、用到的其他类-PageUtil"><a href="#六、用到的其他类-PageUtil" class="headerlink" title="六、用到的其他类 PageUtil"></a>六、用到的其他类 PageUtil</h3><p>使用到了分页的工具类,放在utils目录下</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.mitool.springboot.utils;<br><br><span class="hljs-keyword">import</span> com.github.pagehelper.PageInfo;<br><br><span class="hljs-keyword">import</span> java.util.List;<br><span class="hljs-keyword">import</span> java.util.function.Function;<br><span class="hljs-keyword">import</span> java.util.stream.Collectors;<br><br><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * 分页工具类</span><br><span class="hljs-comment"> *</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@author</span> Jimmy.Shen</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@since</span> 2021/11/26</span><br><span class="hljs-comment"> */</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">PageUtil</span> &#123;<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * 通用pageInfo转换</span><br><span class="hljs-comment">     *</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> sourcePageInfo 源数据</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> targetClass    目标类型</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> mapper         list转换方法</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> &lt;T&gt;            目标类型</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> &lt;S&gt;            源类型</span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> &lt;T, S&gt; PageInfo&lt;T&gt; <span class="hljs-title function_">pageInfoCopy</span><span class="hljs-params">(PageInfo&lt;S&gt; sourcePageInfo, Class&lt;T&gt; targetClass, Function&lt;S, T&gt; mapper)</span> &#123;<br>        PageInfo&lt;T&gt; respPageInfo = <span class="hljs-keyword">new</span> <span class="hljs-title class_">PageInfo</span>&lt;&gt;();<br>        respPageInfo.setPageNum(sourcePageInfo.getPageNum());<br>        respPageInfo.setPageSize(sourcePageInfo.getPageSize());<br>        respPageInfo.setSize(sourcePageInfo.getSize());<br>        respPageInfo.setStartRow(sourcePageInfo.getStartRow());<br>        respPageInfo.setEndRow(sourcePageInfo.getEndRow());<br>        respPageInfo.setPages(sourcePageInfo.getPages());<br>        respPageInfo.setPrePage(sourcePageInfo.getPrePage());<br>        respPageInfo.setNextPage(sourcePageInfo.getNextPage());<br>        respPageInfo.setIsFirstPage(sourcePageInfo.isIsFirstPage());<br>        respPageInfo.setIsLastPage(sourcePageInfo.isIsLastPage());<br>        respPageInfo.setHasPreviousPage(sourcePageInfo.isHasPreviousPage());<br>        respPageInfo.setHasNextPage(sourcePageInfo.isHasNextPage());<br>        respPageInfo.setNavigatePages(sourcePageInfo.getNavigatePages());<br>        respPageInfo.setNavigatepageNums(sourcePageInfo.getNavigatepageNums());<br>        respPageInfo.setNavigateFirstPage(sourcePageInfo.getNavigateFirstPage());<br>        respPageInfo.setNavigateLastPage(sourcePageInfo.getNavigateLastPage());<br>        respPageInfo.setTotal(sourcePageInfo.getTotal());<br><br>        List&lt;T&gt; pageList = sourcePageInfo.getList().stream().map(mapper).collect(Collectors.toList());<br>        respPageInfo.setList(pageList);<br>        <span class="hljs-keyword">return</span> respPageInfo;<br>    &#125;<br>&#125;<br><br><br></code></pre></td></tr></table></figure><h3 id="七、运行-CodeGeneratorUtil-main方法"><a href="#七、运行-CodeGeneratorUtil-main方法" class="headerlink" title="七、运行 CodeGeneratorUtil main方法"></a>七、运行 CodeGeneratorUtil main方法</h3><p>输入作者、包、表名生成文件，启动项目后可生成代码<br><img src="https://jimmy-blog-images.oss-cn-shanghai.aliyuncs.com/img/springboot%E8%BE%93%E5%85%A5%E4%BD%9C%E8%80%85-%E5%8C%85-%E8%A1%A8%E5%90%8D.png"></p><p>生成的项目架构<br><img src="https://jimmy-blog-images.oss-cn-shanghai.aliyuncs.com/img/springboot%E4%BB%A3%E7%A0%81%E8%87%AA%E5%8A%A8%E7%94%9F%E6%88%90%E5%90%8E%E7%9A%84%E7%9B%AE%E5%BD%95.png"><br>使用swagger查看<br><img src="https://jimmy-blog-images.oss-cn-shanghai.aliyuncs.com/img/springbootswagger%E7%95%8C%E9%9D%A2.png"></p>]]></content>
    
    
    <categories>
      
      <category>spring</category>
      
    </categories>
    
    
    <tags>
      
      <tag>springboot</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>【大数据模型】LeonardoAi让心中所想跃然纸上</title>
    <link href="/blog/docs/leonardo-01/chatgpt/leonardo-01/"/>
    <url>/blog/docs/leonardo-01/chatgpt/leonardo-01/</url>
    
    <content type="html"><![CDATA[<blockquote><p>汝之观览，吾之幸也！ 本文主要聊聊LeonardoAi绘图工具</p></blockquote><h3 id="一、注册Discord账号"><a href="#一、注册Discord账号" class="headerlink" title="一、注册Discord账号"></a>一、注册Discord账号</h3><p>不管LeonardoAi还是midjourney，都需要注册一个Discord账号，Discord是一个社区软件，在这里可以进行讨论和交流使用心得<br><a href="https://leonardo.ai/">LeonardoAi官网地址</a></p><h4 id="1、请在下方输入邮箱，点击【Count-me-in】"><a href="#1、请在下方输入邮箱，点击【Count-me-in】" class="headerlink" title="1、请在下方输入邮箱，点击【Count me in】"></a>1、请在下方输入邮箱，点击【Count me in】</h4><p><img src="https://jimmy-blog-images.oss-cn-shanghai.aliyuncs.com/img/leonardoAileonardo%E4%B8%BB%E7%95%8C%E9%9D%A2.png"></p><h4 id="2、点击【Join-Discord】，进入Discord界面"><a href="#2、点击【Join-Discord】，进入Discord界面" class="headerlink" title="2、点击【Join Discord】，进入Discord界面"></a>2、点击【Join Discord】，进入Discord界面</h4><p><img src="https://jimmy-blog-images.oss-cn-shanghai.aliyuncs.com/img/leonardoAi%E5%8A%A0%E5%85%A5discord%E7%A4%BE%E5%8C%BA.png"></p><h4 id="3、下载Discord"><a href="#3、下载Discord" class="headerlink" title="3、下载Discord"></a>3、下载Discord</h4><p><img src="https://jimmy-blog-images.oss-cn-shanghai.aliyuncs.com/img/leonardoAidiscord%E4%B8%8B%E8%BD%BD.png"></p><h4 id="4、Discord邮箱验证"><a href="#4、Discord邮箱验证" class="headerlink" title="4、Discord邮箱验证"></a>4、Discord邮箱验证</h4><p><img src="https://jimmy-blog-images.oss-cn-shanghai.aliyuncs.com/img/leonardoAidiscord%E9%82%AE%E7%AE%B1%E9%AA%8C%E8%AF%81.png"></p><h4 id="5、Discord中LeonardoAi社区"><a href="#5、Discord中LeonardoAi社区" class="headerlink" title="5、Discord中LeonardoAi社区"></a>5、Discord中LeonardoAi社区</h4><p><img src="https://jimmy-blog-images.oss-cn-shanghai.aliyuncs.com/img/leonardoAi%E4%B8%BB%E7%95%8C%E9%9D%A2.png"></p><h3 id="二、注册LeonardoAi账号"><a href="#二、注册LeonardoAi账号" class="headerlink" title="二、注册LeonardoAi账号"></a>二、注册LeonardoAi账号</h3><p><a href="https://leonardo.ai/">LeonardoAi官网地址</a></p><h4 id="1、选择右上角的【Launch-App】"><a href="#1、选择右上角的【Launch-App】" class="headerlink" title="1、选择右上角的【Launch App】"></a>1、选择右上角的【Launch App】</h4><p>点击【Yes,I am whitelisted】<br><img src="https://jimmy-blog-images.oss-cn-shanghai.aliyuncs.com/img/leonardoAi%E5%BC%80%E5%A7%8B%E7%99%BB%E5%BD%95.png"></p><h4 id="2、登录邮箱"><a href="#2、登录邮箱" class="headerlink" title="2、登录邮箱"></a>2、登录邮箱</h4><p><img src="https://jimmy-blog-images.oss-cn-shanghai.aliyuncs.com/img/leonardoAi%E4%BD%BF%E7%94%A8%E9%82%AE%E7%AE%B1%E7%99%BB%E5%BD%95.png"></p><h4 id="3、输入昵称和选择主题"><a href="#3、输入昵称和选择主题" class="headerlink" title="3、输入昵称和选择主题"></a>3、输入昵称和选择主题</h4><p><img src="https://jimmy-blog-images.oss-cn-shanghai.aliyuncs.com/img/leonardoAi%E8%BE%93%E5%85%A5%E6%98%B5%E7%A7%B0.png"></p><h3 id="三、使用LeonardoAi绘图"><a href="#三、使用LeonardoAi绘图" class="headerlink" title="三、使用LeonardoAi绘图"></a>三、使用LeonardoAi绘图</h3><h4 id="1、LeonardoAi主界面"><a href="#1、LeonardoAi主界面" class="headerlink" title="1、LeonardoAi主界面"></a>1、LeonardoAi主界面</h4><p>主界面主要包含【Home】-主页、【Community Feed】-社区动态、【Pensonal Feed】-个人动态（存放自己生成的一些图片和模板）、<br>【Training &amp; Datasets】-训练模板/数据集、【Finetuned Models】-微调模板、【AI Image Generation】-Ai 图片生成等其他功能<br><img src="https://jimmy-blog-images.oss-cn-shanghai.aliyuncs.com/img/leonardoAiai%E4%B8%BB%E7%95%8C%E9%9D%A2.png"></p><h4 id="2、通过模板进行生成图片"><a href="#2、通过模板进行生成图片" class="headerlink" title="2、通过模板进行生成图片"></a>2、通过模板进行生成图片</h4><p>点击【Generate With This Model】跳转到图片生成界面，输入提示词和负面提示词（这很重要），选择图片生成的张数、分辨率、图片比例等其他参数，<br>点击【Generate】即可生成图片，可能会根据自己的配置需要消耗不等的tokens，一般一天会有免费的150tokens可以使用，一张图片一般会消耗4-11不等的tokens。<br>在生成的图片中可删除不喜欢的图片，其他的图片都可在【Pensonal Feed】中进行查看<br><img src="https://jimmy-blog-images.oss-cn-shanghai.aliyuncs.com/img/leonardoAi%E4%BD%BF%E7%94%A8%E6%A8%A1%E6%9D%BF%E7%94%9F%E6%88%90.png"></p><h4 id="3、通过其他生成的图片生成图片"><a href="#3、通过其他生成的图片生成图片" class="headerlink" title="3、通过其他生成的图片生成图片"></a>3、通过其他生成的图片生成图片</h4><p>选择一个图片，点击【Remix】,跳转到图片生成界面，提示词与负面提示词会自动带入，可根据自己想要生成的图片进行修改提示词，在配置好图片参数后点击【Generate】即可生成图片<br><img src="https://jimmy-blog-images.oss-cn-shanghai.aliyuncs.com/img/leonardoAi%E7%82%B9%E5%87%BBRemix.png"></p><h4 id="4、创建自己的模型-并根据自己的模型生成图片"><a href="#4、创建自己的模型-并根据自己的模型生成图片" class="headerlink" title="4、创建自己的模型,并根据自己的模型生成图片"></a>4、创建自己的模型,并根据自己的模型生成图片</h4><p>点击【Training &amp; Datasets】，输入生成模板的名称，上传20-40张数据集，大约需要30分钟左右，会邮箱提醒你模板生成成功。需要12天才能重置再次训练模型的机会。</p><h5 id="1、上传图片生成模板"><a href="#1、上传图片生成模板" class="headerlink" title="1、上传图片生成模板"></a>1、上传图片生成模板</h5><p>命名新模板的名称<br><img src="https://jimmy-blog-images.oss-cn-shanghai.aliyuncs.com/img/leonardoAi%E8%AE%AD%E7%BB%83%E6%A8%A1%E5%9E%8B-%E6%96%B0%E6%B5%B7%E8%AF%9A.png"><br>上传数据集，最好是20-40张图片<br><img src="https://jimmy-blog-images.oss-cn-shanghai.aliyuncs.com/img/leonardoAi%E4%B8%8A%E4%BC%A0%E6%95%B0%E6%8D%AE%E9%9B%86-%E6%96%B0%E6%B5%B7%E8%AF%9A.png"><br><img src="https://jimmy-blog-images.oss-cn-shanghai.aliyuncs.com/img/leonardoAi%E5%BC%80%E5%A7%8B%E8%AE%AD%E7%BB%83-%E6%96%B0%E6%B5%B7%E8%AF%9A.png"><br>输入训练后的提示词，开始训练<br><img src="https://jimmy-blog-images.oss-cn-shanghai.aliyuncs.com/img/leonardoAi%E5%BC%80%E5%A7%8B%E8%AE%AD%E7%BB%83-%E6%96%B0%E6%B5%B7%E8%AF%9A2.png"><br>一般在30分钟左右会发邮件提醒，模板生成成功<br><img src="https://jimmy-blog-images.oss-cn-shanghai.aliyuncs.com/img/leonardoAi%E8%AE%AD%E7%BB%83%E5%AE%8C%E6%88%90.jpg"></p><h5 id="2、在【AI-Image-Generation】选择模板"><a href="#2、在【AI-Image-Generation】选择模板" class="headerlink" title="2、在【AI Image Generation】选择模板"></a>2、在【AI Image Generation】选择模板</h5><p>下拉框中点击【Select Custom Model】<br><img src="https://jimmy-blog-images.oss-cn-shanghai.aliyuncs.com/img/leonardoAi%E9%80%89%E6%8B%A9%E6%A8%A1%E6%9D%BF.png"></p><h5 id="3、查看自己生成的模板"><a href="#3、查看自己生成的模板" class="headerlink" title="3、查看自己生成的模板"></a>3、查看自己生成的模板</h5><p>点击【View】<br><img src="https://jimmy-blog-images.oss-cn-shanghai.aliyuncs.com/img/leonardoAi%E6%9F%A5%E7%9C%8B%E6%A8%A1%E6%9D%BF.png"></p><h5 id="4、使用模板生成"><a href="#4、使用模板生成" class="headerlink" title="4、使用模板生成"></a>4、使用模板生成</h5><p>点击【Generate With This Model】跳转到图片生成界面<br><img src="https://jimmy-blog-images.oss-cn-shanghai.aliyuncs.com/img/leonardoAi%E4%BD%BF%E7%94%A8%E8%87%AA%E5%B7%B1%E6%A8%A1%E6%9D%BF.png"></p><h5 id="5、生成后的图片"><a href="#5、生成后的图片" class="headerlink" title="5、生成后的图片"></a>5、生成后的图片</h5><p>输入提示词信息，点击【Generate】即可生成图片<br><img src="https://jimmy-blog-images.oss-cn-shanghai.aliyuncs.com/img/leonardoAi%E6%A0%B9%E6%8D%AE%E8%87%AA%E5%B7%B1%E6%A8%A1%E6%9D%BF%E7%94%9F%E6%88%90%E7%9A%84%E5%9B%BE%E7%89%87.png"></p><h3 id="四、使用技巧"><a href="#四、使用技巧" class="headerlink" title="四、使用技巧"></a>四、使用技巧</h3><h4 id="1、提示词"><a href="#1、提示词" class="headerlink" title="1、提示词"></a>1、提示词</h4><p>在前面一般是对图片的描述，后面是对图片的整体效果描述。比如<br>提示词（Prompt details）</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs json">Waist high Portrait of an exotic beautiful caucasian woman wearing trendy clothing at a beach<span class="hljs-punctuation">,</span> perfect detailed face<span class="hljs-punctuation">,</span> detailed symmetric hazel eyes with circular iris<span class="hljs-punctuation">,</span> realistic<span class="hljs-punctuation">,</span> stunning realistic photograph<span class="hljs-punctuation">,</span> <span class="hljs-number">3</span>d render<span class="hljs-punctuation">,</span> octane render<span class="hljs-punctuation">,</span> intricately detailed<span class="hljs-punctuation">,</span> cinematic<span class="hljs-punctuation">,</span> trending on artstation<span class="hljs-punctuation">,</span> Isometric<span class="hljs-punctuation">,</span> Centered hipereallistic cover photo<span class="hljs-punctuation">,</span> awesome full color<span class="hljs-punctuation">,</span> hand drawn<span class="hljs-punctuation">,</span> dark<span class="hljs-punctuation">,</span> gritty<span class="hljs-punctuation">,</span> mucha<span class="hljs-punctuation">,</span> klimt<span class="hljs-punctuation">,</span> erte <span class="hljs-number">12</span>k<span class="hljs-punctuation">,</span> high definition<span class="hljs-punctuation">,</span> cinematic<span class="hljs-punctuation">,</span> neoprene<span class="hljs-punctuation">,</span> behance contest winner<span class="hljs-punctuation">,</span> portrait featured on unsplash<span class="hljs-punctuation">,</span> stylized digital art<span class="hljs-punctuation">,</span> smooth<span class="hljs-punctuation">,</span> ultra high definition<span class="hljs-punctuation">,</span> <span class="hljs-number">8</span>k<span class="hljs-punctuation">,</span> unreal engine <span class="hljs-number">5</span><span class="hljs-punctuation">,</span> ultra sharp focus<span class="hljs-punctuation">,</span> intricate artwork masterpiece<span class="hljs-punctuation">,</span> ominous<span class="hljs-punctuation">,</span> epic<span class="hljs-punctuation">,</span> TanvirTamim<span class="hljs-punctuation">,</span> trending on artstation<span class="hljs-punctuation">,</span> by artgerm<span class="hljs-punctuation">,</span> h. r. giger and beksinski<span class="hljs-punctuation">,</span> highly detailed<span class="hljs-punctuation">,</span> vibrant<br></code></pre></td></tr></table></figure><p>负面提示词（Negative prompt）</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs json">Negative prompt<span class="hljs-punctuation">:</span>close up<span class="hljs-punctuation">,</span> two heads<span class="hljs-punctuation">,</span> two faces<span class="hljs-punctuation">,</span> plastic<span class="hljs-punctuation">,</span> Deformed<span class="hljs-punctuation">,</span> blurry<span class="hljs-punctuation">,</span> bad anatomy<span class="hljs-punctuation">,</span> bad eyes<span class="hljs-punctuation">,</span> crossed eyes<span class="hljs-punctuation">,</span> disfigured<span class="hljs-punctuation">,</span> poorly drawn face<span class="hljs-punctuation">,</span> mutation<span class="hljs-punctuation">,</span> mutated<span class="hljs-punctuation">,</span> ((extra limb))<span class="hljs-punctuation">,</span> ugly<span class="hljs-punctuation">,</span> poorly drawn hands<span class="hljs-punctuation">,</span> missing limb<span class="hljs-punctuation">,</span> blurry<span class="hljs-punctuation">,</span> floating limbs<span class="hljs-punctuation">,</span> disconnected limbs<span class="hljs-punctuation">,</span> malformed hands<span class="hljs-punctuation">,</span> blur<span class="hljs-punctuation">,</span> out of focus<span class="hljs-punctuation">,</span> long neck<span class="hljs-punctuation">,</span> long body<span class="hljs-punctuation">,</span> ((((mutated hands and fingers))))<span class="hljs-punctuation">,</span> (((out of frame)))<span class="hljs-punctuation">,</span> blender<span class="hljs-punctuation">,</span> doll<span class="hljs-punctuation">,</span> cropped<span class="hljs-punctuation">,</span> low-res<span class="hljs-punctuation">,</span> close-up<span class="hljs-punctuation">,</span> poorly-drawn face<span class="hljs-punctuation">,</span> out of frame double<span class="hljs-punctuation">,</span> two heads<span class="hljs-punctuation">,</span> blurred<span class="hljs-punctuation">,</span> ugly<span class="hljs-punctuation">,</span> disfigured<span class="hljs-punctuation">,</span> too many fingers<span class="hljs-punctuation">,</span> deformed<span class="hljs-punctuation">,</span> repetitive<span class="hljs-punctuation">,</span> black and white<span class="hljs-punctuation">,</span> grainy<span class="hljs-punctuation">,</span> extra limbs<span class="hljs-punctuation">,</span> bad anatomyHigh pass filter<span class="hljs-punctuation">,</span> airbrush<span class="hljs-punctuation">,</span> portrait<span class="hljs-punctuation">,</span> zoomed<span class="hljs-punctuation">,</span> soft light<span class="hljs-punctuation">,</span> smooth skin<span class="hljs-punctuation">,</span> closeup<span class="hljs-punctuation">,</span> deformed<span class="hljs-punctuation">,</span> extra limbs<span class="hljs-punctuation">,</span> extra fingers<span class="hljs-punctuation">,</span> mutated hands<span class="hljs-punctuation">,</span> bad anatomy<span class="hljs-punctuation">,</span> bad proportions <span class="hljs-punctuation">,</span> blind<span class="hljs-punctuation">,</span> bad eyes<span class="hljs-punctuation">,</span> ugly eyes<span class="hljs-punctuation">,</span> dead eyes<span class="hljs-punctuation">,</span> blur<span class="hljs-punctuation">,</span> vignette<span class="hljs-punctuation">,</span> out of shot<span class="hljs-punctuation">,</span> out of focus<span class="hljs-punctuation">,</span> gaussian<span class="hljs-punctuation">,</span> closeup<span class="hljs-punctuation">,</span> monochrome<span class="hljs-punctuation">,</span> grainy<span class="hljs-punctuation">,</span> noisy<span class="hljs-punctuation">,</span> text<span class="hljs-punctuation">,</span> writing<span class="hljs-punctuation">,</span> watermark<span class="hljs-punctuation">,</span> logo<span class="hljs-punctuation">,</span> oversaturation <span class="hljs-punctuation">,</span> over saturation<span class="hljs-punctuation">,</span> over shadow<span class="hljs-punctuation">,</span> bra<br></code></pre></td></tr></table></figure><p>可以直接使用其他图片的提示词，然后前面的描述进行修改处理<br><img src="https://jimmy-blog-images.oss-cn-shanghai.aliyuncs.com/img/leonardoAi%E5%9B%BE%E7%89%87%E9%85%8D%E7%BD%AE.png"></p><h4 id="2、姿势复刻"><a href="#2、姿势复刻" class="headerlink" title="2、姿势复刻"></a>2、姿势复刻</h4><p>在【AI Image Generation】 中选择【Image to Image】上传一张人物图像，之后生成的图片会复刻上传的人物姿势<br><img src="https://jimmy-blog-images.oss-cn-shanghai.aliyuncs.com/img/leonardoAi%E5%A7%BF%E5%8A%BF%E5%A4%8D%E5%88%BB.png"></p><h4 id="3、社区讨论"><a href="#3、社区讨论" class="headerlink" title="3、社区讨论"></a>3、社区讨论</h4><p>如果想更好的学习一些小技巧和提示词调整，可之家在Discord的LeonardoAi社区中查看<br><img src="https://jimmy-blog-images.oss-cn-shanghai.aliyuncs.com/img/leonardoAiDiscord%E4%B8%AD%E7%9A%84leonardo%E7%A4%BE%E5%8C%BA%E5%B0%8F%E6%8A%80%E5%B7%A7.png"><br>参考文章<a href="https://zhuanlan.zhihu.com/p/618911569">Midjourney的挑战者 - AI绘图新秀Leonardo.ai</a></p>]]></content>
    
    
    <categories>
      
      <category>chatgpt</category>
      
    </categories>
    
    
    <tags>
      
      <tag>leonardo</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>【大数据模型】让chatgpt为开发增速（开发专用提示词）</title>
    <link href="/blog/docs/chatgpt-02/chatgpt/chatgpt-02/"/>
    <url>/blog/docs/chatgpt-02/chatgpt/chatgpt-02/</url>
    
    <content type="html"><![CDATA[<blockquote><p>汝之观览，吾之幸也！本文主要聊聊怎样才能更好的使用提示词，给开发提速，大大缩减我们的开发时间，比如在开发中使用生成表结构脚本的提示词，生成代码的提示词等等。</p></blockquote><h3 id="一、准备"><a href="#一、准备" class="headerlink" title="一、准备"></a>一、准备</h3><p>本文主要根据Claude进行演示，关于如何使用Claude技术（主要是免费），请参考文章<br><a href="https://blog.csdn.net/m0_37172770/article/details/130710134?spm=1001.2014.3001.5501">【大数据模型】使用Claude浅试一下</a><br>，也可使用其他大数据模型的产品，如百度的<a href="https://yiyan.baidu.com/welcome">文心一言</a>，有阿里的<a href="tongyi.aliyun.com">通义千问</a>，也有复旦大学的<a href="https://moss.fastnlp.top/">MOSS</a>、科大讯飞<a href="https://xinghuo.xfyun.cn/desk">星火大模型</a>等等，有条件的可以使用ChatGpt，会更准确。</p><h3 id="二、输出sql脚本"><a href="#二、输出sql脚本" class="headerlink" title="二、输出sql脚本"></a>二、输出sql脚本</h3><h4 id="1、输出建表语句"><a href="#1、输出建表语句" class="headerlink" title="1、输出建表语句"></a>1、输出建表语句</h4><figure class="highlight sqf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><code class="hljs sqf">请你担任mysql建表设计师，我将与你进行对话，我将输入字段，你根据字段生成一张mysql的表，以下是建表的一些要求<br>【强制】表名满足要求,以illp开头。<br>【强制】数据库表字段必须有注释，主键不加注释。<br>【强制】名称只能含有字母，数字和下划线“_”三类字符。<br>【强制】表名要避免使用关键字<br>【强制】命名应采用能够准确反映其中文含义的英文单词或英文单词的缩写构成，避免出现英文单词和汉语拼音混用的情况。如果英文单词已定义了缩写，应该用缩写<br>【推荐】在不同位置出现的、表示相同含义及内容的字段名称命名应该一致。<br>后缀名参考<br>表分类命名要求<br>关系表以<span class="hljs-variable">_rel</span>结尾<br>属性表以<span class="hljs-variable">_attr</span>结尾<br>历史表以<span class="hljs-variable">_his</span>结尾<br>日志表以<span class="hljs-variable">_log</span>结尾<br>对照表以<span class="hljs-variable">_map</span>结尾<br>规则表以<span class="hljs-variable">_rul</span>结尾<br>配置表以<span class="hljs-variable">_cfg</span>结尾<br>以下是一些特别的前后缀，代表了这个字段特殊的含义。在其他的情况，应避免使用以下的前后缀：<br><br>前后缀定义<br><span class="hljs-variable">_desc</span>参数表内的描叙字段 如字段名是offer_desc,表示销售品描述<br><span class="hljs-variable">_flag</span>布尔型字段<br><span class="hljs-variable">_nbr</span>/no编号字段<br><span class="hljs-variable">_num</span>/<span class="hljs-variable">_nbr</span>号码字段<br><span class="hljs-variable">_id</span>标识字段<br><span class="hljs-variable">_type</span>类型字段，用来表示有类型含义的字段 如字段名是offer_type，表示销售品类型<br>is_描述含有是否含义的字段,主数据值只有<span class="hljs-number">0</span>/<span class="hljs-number">1</span>或者N/Y两种情况，如is_default，表示是否默认 数据类型是char(<span class="hljs-number">1</span>)（N/Y）或者unsigned tinyint （<span class="hljs-number">1</span>表示是，<span class="hljs-number">0</span>表示否）。<br>【推荐】表常备字段：xxx_id, created_time,create_by<br>update_time,update_by表示主键、创建时间、创建人、更新时间、更新人。时间类型均为 datetime类型。<br><br>你只需要输出建表语句，在我输入字段的基础上其中加上创建时间、创建人、更新时间、更新人与id，其他什么都不要输出<br>我的第一个表是用户表<br>用户名称、用户编码、性别、身份证、手机号<br></code></pre></td></tr></table></figure><p>输出后的数据如下,”illp_”是表前缀，可进行修改，DDL语句可做下加工处理</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> illp_user (<br>  id <span class="hljs-type">INT</span> <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> AUTO_INCREMENT COMMENT <span class="hljs-string">&#x27;主键&#x27;</span>,<br>  user_name <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">50</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">&#x27;用户名称&#x27;</span>,<br>  user_code <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">20</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">&#x27;用户编码&#x27;</span>, <br>  gender TINYINT <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">&#x27;性别&#x27;</span>,<br>  id_card <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">18</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">&#x27;身份证&#x27;</span>,<br>  mobile <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">11</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">&#x27;手机号&#x27;</span>,<br>  created_time DATETIME <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">&#x27;创建时间&#x27;</span>,<br>  created_by <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">20</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">&#x27;创建人&#x27;</span>,<br>  updated_time DATETIME <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">&#x27;更新时间&#x27;</span>,<br>  updated_by <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">20</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">&#x27;更新人&#x27;</span>,<br>  <span class="hljs-keyword">PRIMARY</span> KEY (id)<br>) COMMENT <span class="hljs-string">&#x27;用户表&#x27;</span>;<br></code></pre></td></tr></table></figure><p><img src="https://jimmy-blog-images.oss-cn-shanghai.aliyuncs.com/img/chatgpt%E5%BB%BA%E8%A1%A8%E8%AF%AD%E5%8F%A5.png"></p><h4 id="2、输出mock数据的新增语句"><a href="#2、输出mock数据的新增语句" class="headerlink" title="2、输出mock数据的新增语句"></a>2、输出mock数据的新增语句</h4><p>在创建表结构后，开发需要一些数据进行测试接口，可直接输出mock数据，帮助快速的接口联调工作,<br>具体的数据要求可根据实际开发进行添加修改</p><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs pgsql">请你担任mysql数据分析师，我将与你进行对话，我将输入表结构，你根据字段生成mock数据，<br>表结构如下<br><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> illp_user (<br>  id <span class="hljs-type">INT</span> <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> AUTO_INCREMENT <span class="hljs-keyword">COMMENT</span> <span class="hljs-string">&#x27;主键&#x27;</span>,<br>  user_name <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">50</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> <span class="hljs-keyword">COMMENT</span> <span class="hljs-string">&#x27;用户名称&#x27;</span>,<br>  user_code <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">20</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> <span class="hljs-keyword">COMMENT</span> <span class="hljs-string">&#x27;用户编码&#x27;</span>, <br>  gender TINYINT <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> <span class="hljs-keyword">COMMENT</span> <span class="hljs-string">&#x27;性别&#x27;</span>,<br>  id_card <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">18</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> <span class="hljs-keyword">COMMENT</span> <span class="hljs-string">&#x27;身份证&#x27;</span>,<br>  mobile <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">11</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> <span class="hljs-keyword">COMMENT</span> <span class="hljs-string">&#x27;手机号&#x27;</span>,<br>  created_time DATETIME <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> <span class="hljs-keyword">COMMENT</span> <span class="hljs-string">&#x27;创建时间&#x27;</span>,<br>  created_by <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">20</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> <span class="hljs-keyword">COMMENT</span> <span class="hljs-string">&#x27;创建人&#x27;</span>,<br>  updated_time DATETIME <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> <span class="hljs-keyword">COMMENT</span> <span class="hljs-string">&#x27;更新时间&#x27;</span>,<br>  updated_by <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">20</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> <span class="hljs-keyword">COMMENT</span> <span class="hljs-string">&#x27;更新人&#x27;</span>,<br>  <span class="hljs-keyword">PRIMARY KEY</span> (id)<br>) <span class="hljs-keyword">COMMENT</span> <span class="hljs-string">&#x27;用户表&#x27;</span>;<br>输出<span class="hljs-number">10</span>条数据，输出的数据有以下要求：<br>【强制】创建人、更新人使用汉字，创建时间、更新时间使用now()<br></code></pre></td></tr></table></figure><p>输出语句</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> illp_user (user_name, user_code, gender, id_card, mobile, created_time, created_by, updated_time, updated_by) <span class="hljs-keyword">VALUES</span><br>(<span class="hljs-string">&#x27;张三&#x27;</span>, <span class="hljs-string">&#x27;1001&#x27;</span>, <span class="hljs-number">1</span>, <span class="hljs-string">&#x27;110101199003077331&#x27;</span>, <span class="hljs-string">&#x27;13811111111&#x27;</span>, now(), <span class="hljs-string">&#x27;王五&#x27;</span>, now(), <span class="hljs-string">&#x27;王五&#x27;</span>), <br>(<span class="hljs-string">&#x27;李四&#x27;</span>, <span class="hljs-string">&#x27;1002&#x27;</span>, <span class="hljs-number">2</span>, <span class="hljs-string">&#x27;110101199102087744&#x27;</span>, <span class="hljs-string">&#x27;13822222222&#x27;</span>, now(), <span class="hljs-string">&#x27;王五&#x27;</span>, now(), <span class="hljs-string">&#x27;王五&#x27;</span>),<br>(<span class="hljs-string">&#x27;王五&#x27;</span>, <span class="hljs-string">&#x27;1003&#x27;</span>, <span class="hljs-number">1</span>, <span class="hljs-string">&#x27;110101199103067555&#x27;</span>, <span class="hljs-string">&#x27;13833333333&#x27;</span>, now(), <span class="hljs-string">&#x27;王五&#x27;</span>, now(), <span class="hljs-string">&#x27;王五&#x27;</span>),<br>(<span class="hljs-string">&#x27;赵六&#x27;</span>, <span class="hljs-string">&#x27;1004&#x27;</span>, <span class="hljs-number">2</span>, <span class="hljs-string">&#x27;110101199104067666&#x27;</span>, <span class="hljs-string">&#x27;13844444444&#x27;</span>, now(), <span class="hljs-string">&#x27;王五&#x27;</span>, now(), <span class="hljs-string">&#x27;王五&#x27;</span>),<br>(<span class="hljs-string">&#x27;孙七&#x27;</span>, <span class="hljs-string">&#x27;1005&#x27;</span>, <span class="hljs-number">1</span>, <span class="hljs-string">&#x27;110101199105072777&#x27;</span>, <span class="hljs-string">&#x27;13855555555&#x27;</span>, now(), <span class="hljs-string">&#x27;王五&#x27;</span>, now(), <span class="hljs-string">&#x27;王五&#x27;</span>),<br>(<span class="hljs-string">&#x27;周八&#x27;</span>, <span class="hljs-string">&#x27;1006&#x27;</span>, <span class="hljs-number">2</span>, <span class="hljs-string">&#x27;110101199106017388&#x27;</span>, <span class="hljs-string">&#x27;13866666666&#x27;</span>, now(), <span class="hljs-string">&#x27;王五&#x27;</span>, now(), <span class="hljs-string">&#x27;王五&#x27;</span>), <br>(<span class="hljs-string">&#x27;吴九&#x27;</span>, <span class="hljs-string">&#x27;1007&#x27;</span>, <span class="hljs-number">1</span>, <span class="hljs-string">&#x27;110101199107072899&#x27;</span>, <span class="hljs-string">&#x27;13877777777&#x27;</span>, now(), <span class="hljs-string">&#x27;王五&#x27;</span>, now(), <span class="hljs-string">&#x27;王五&#x27;</span>),  <br>(<span class="hljs-string">&#x27;郑十&#x27;</span>, <span class="hljs-string">&#x27;1008&#x27;</span>, <span class="hljs-number">2</span>, <span class="hljs-string">&#x27;110101199108037910&#x27;</span>, <span class="hljs-string">&#x27;13888888888&#x27;</span>, now(), <span class="hljs-string">&#x27;王五&#x27;</span>, now(), <span class="hljs-string">&#x27;王五&#x27;</span>),<br>(<span class="hljs-string">&#x27;冯十一&#x27;</span>, <span class="hljs-string">&#x27;1009&#x27;</span>, <span class="hljs-number">1</span>, <span class="hljs-string">&#x27;110101199109051021&#x27;</span>, <span class="hljs-string">&#x27;13899999999&#x27;</span>, now(), <span class="hljs-string">&#x27;王五&#x27;</span>, now(), <span class="hljs-string">&#x27;王五&#x27;</span>),<br>(<span class="hljs-string">&#x27;蒋十二&#x27;</span>, <span class="hljs-string">&#x27;1010&#x27;</span>, <span class="hljs-number">2</span>, <span class="hljs-string">&#x27;110101199110221011&#x27;</span>, <span class="hljs-string">&#x27;13800000000&#x27;</span>, now(), <span class="hljs-string">&#x27;王五&#x27;</span>, now(), <span class="hljs-string">&#x27;王五&#x27;</span>);<br></code></pre></td></tr></table></figure><p><img src="https://jimmy-blog-images.oss-cn-shanghai.aliyuncs.com/img/chatgptmock%E6%95%B0%E6%8D%AE.png"></p><h4 id="3、将接口数据输出到表中，数据迁移mock"><a href="#3、将接口数据输出到表中，数据迁移mock" class="headerlink" title="3、将接口数据输出到表中，数据迁移mock"></a>3、将接口数据输出到表中，数据迁移mock</h4><p>在开发阶段，有些原始数据无法得到，只能获取到其他系统的接口数据，为了开发方便，可通过以下方式将接口数据<br>输出到表中</p><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs pgsql">[<br>        &#123;<br>            &quot;id&quot;: &quot;1682064228009291777&quot;,<br>            &quot;businessType&quot;: <span class="hljs-number">2</span>,<br>            &quot;dictCode&quot;: &quot;DICT_CODE_1495695289843849946&quot;,<br>            &quot;parentTypeId&quot;: <span class="hljs-number">0</span>,<br>            &quot;typeId&quot;: &quot;1495695289843849945&quot;,<br>            &quot;dictKey&quot;: &quot;不推送消息&quot;,<br>            &quot;dictValue&quot;: &quot;1&quot;,<br>            &quot;dictParam&quot;: <span class="hljs-number">0</span>,<br>            &quot;projectCode&quot;: &quot;ZH_00015_XM_00000001&quot;,<br>            &quot;map&quot;: <span class="hljs-keyword">null</span><br>        &#125;<br>    ]<br>请将上述的<span class="hljs-type">json</span>数据转化为<span class="hljs-keyword">insert</span>语句，<span class="hljs-keyword">insert</span>语句中的&quot;#&#123;&#125;&quot;包含的值取自<span class="hljs-type">json</span>中对应的字段的值，<span class="hljs-keyword">insert</span>语句如下所示，<br><span class="hljs-keyword">insert</span> <span class="hljs-keyword">into</span> illp_inspection_policyconfig(bussiness_type,`<span class="hljs-keyword">type</span>`,<span class="hljs-type">name</span>,description,order_num,create_time,logic_del)<br><span class="hljs-keyword">values</span><br>(<span class="hljs-string">&#x27;#&#123;businessType&#125;&#x27;</span>,<span class="hljs-string">&#x27;#&#123;businessType&#125;&#x27;</span>,<span class="hljs-string">&#x27;#&#123;dictKey&#125;&#x27;</span>,<span class="hljs-string">&#x27;#&#123;dictKey&#125;&#x27;</span>,<span class="hljs-string">&#x27;#&#123;closeTypeName&#125;&#x27;</span>,<span class="hljs-string">&#x27;admin&#x27;</span>,<span class="hljs-string">&#x27;0&#x27;</span>)<br>请输出<span class="hljs-keyword">insert</span>语句，输出的<span class="hljs-keyword">values</span>用,分割,并且换行，只有一个<span class="hljs-keyword">values</span><br></code></pre></td></tr></table></figure><p>输出语句</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">insert</span> <span class="hljs-keyword">into</span> illp_inspection_policyconfig(bussiness_type,`type`,name,description,order_num,create_time,logic_del)<br><span class="hljs-keyword">values</span><br>(<span class="hljs-string">&#x27;2&#x27;</span>,<span class="hljs-string">&#x27;2&#x27;</span>,<span class="hljs-string">&#x27;不推送消息&#x27;</span>,<span class="hljs-string">&#x27;不推送消息&#x27;</span>,<span class="hljs-string">&#x27;1&#x27;</span>,<span class="hljs-string">&#x27;admin&#x27;</span>,<span class="hljs-string">&#x27;0&#x27;</span>)<br></code></pre></td></tr></table></figure><p><img src="https://jimmy-blog-images.oss-cn-shanghai.aliyuncs.com/img/chatgpt%E6%8E%A5%E5%85%A5%E6%95%B0%E6%8D%AE.png"></p>]]></content>
    
    
    <categories>
      
      <category>chatgpt</category>
      
    </categories>
    
    
    <tags>
      
      <tag>chatgpt</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>【大数据模型】使用Claude浅试一下大数据模型</title>
    <link href="/blog/docs/claude-01/chatgpt/claude-01/"/>
    <url>/blog/docs/claude-01/chatgpt/claude-01/</url>
    
    <content type="html"><![CDATA[<blockquote><p>汝之观览，吾之幸也！本文主要聊聊Claude使用的流程</p></blockquote><h3 id="一、产品介绍"><a href="#一、产品介绍" class="headerlink" title="一、产品介绍"></a>一、产品介绍</h3><p><a href="https://www.anthropic.com/product">claude官网</a><br>Claude是一款由前OpenAI的研究员和工程师开发的新型聊天机器人，它可以执行各种对话和文本处理任务，同时保持高度的可靠性和可预测性。Claude目前借助Slack这个成熟平台。所以需要先注册slack账号登录，之后将claude加入到slack应用中。<br><img src="https://jimmy-blog-images.oss-cn-shanghai.aliyuncs.com/img/chatclaude%E7%99%BB%E5%BD%95%E7%95%8C%E9%9D%A2.png"></p><h3 id="二、账号注册"><a href="#二、账号注册" class="headerlink" title="二、账号注册"></a>二、账号注册</h3><h4 id="1、使用邮箱进行登录Slack"><a href="#1、使用邮箱进行登录Slack" class="headerlink" title="1、使用邮箱进行登录Slack"></a>1、使用邮箱进行登录Slack</h4><p><a href="https://slack.com/intl/zh-cn/">slack官网</a><br>如果没有账号可自行创建账户，登录时会发送一个验证码到你的邮箱，输入即可<br><img src="https://jimmy-blog-images.oss-cn-shanghai.aliyuncs.com/img/chatslack%E5%AE%98%E7%BD%91.png"></p><h4 id="2、创建频道"><a href="#2、创建频道" class="headerlink" title="2、创建频道"></a>2、创建频道</h4><p>相当于加一个分组，可以在这个分组里增加你的同事<br><img src="https://jimmy-blog-images.oss-cn-shanghai.aliyuncs.com/img/chatslack%E9%A2%91%E9%81%93%E5%88%86%E7%BB%84.png"></p><h4 id="3、设置工作区名称"><a href="#3、设置工作区名称" class="headerlink" title="3、设置工作区名称"></a>3、设置工作区名称</h4><p>主要就是设置下当前工作区名称，可编辑<br><img src="https://jimmy-blog-images.oss-cn-shanghai.aliyuncs.com/img/chatslack%E5%B7%A5%E4%BD%9C%E5%8C%BA.png"></p><h3 id="三、嵌入claude"><a href="#三、嵌入claude" class="headerlink" title="三、嵌入claude"></a>三、嵌入claude</h3><p>注册完slack后可进行嵌入claude应用,<br><a href="https://www.anthropic.com/index/claude-now-in-slack">add to slack</a><br>添加完可以在左侧应用下看到claude应用，进入后输入信息，返回信息中点击“Agree”,之后就可以体验下claude产品了。<br><img src="https://jimmy-blog-images.oss-cn-shanghai.aliyuncs.com/img/chatadd%20to%20slack.png"></p><h3 id="四、其他产品对比"><a href="#四、其他产品对比" class="headerlink" title="四、其他产品对比"></a>四、其他产品对比</h3><p>使用claude<br><img src="https://jimmy-blog-images.oss-cn-shanghai.aliyuncs.com/img/chat%E4%BD%BF%E7%94%A8claude.png"><br>百度<a href="https://yiyan.baidu.com/welcome">文心一言</a><br><img src="https://jimmy-blog-images.oss-cn-shanghai.aliyuncs.com/img/chat%E7%99%BE%E5%BA%A6%E6%96%87%E5%BF%83%E4%B8%80%E8%A8%80.png"><br>阿里<a href="tongyi.aliyun.com">通义千问</a>，暂时没申请到<br>科大讯飞<a href="https://xinghuo.xfyun.cn/desk">星火大模型</a><br><img src="https://jimmy-blog-images.oss-cn-shanghai.aliyuncs.com/img/chat%E8%AE%AF%E9%A3%9E%E6%98%9F%E7%81%AB.png"><br>使用openAi<br><img src="https://jimmy-blog-images.oss-cn-shanghai.aliyuncs.com/img/chatopenai-chatgpt.png"><br>我测试了一个问题“请说一个小故事，关于小兔和小猫”做了下对比，对于小故事来说有点区别，claude与openAi都提到了给小猫吃胡萝卜，然后是简单的故事，国内的文心一言和星火大模型<br>会在最后做一个总结，说下这个故事的意义。可能是因为数据集不同，国内外还是有一点点的差异。</p><h3 id="五、展望"><a href="#五、展望" class="headerlink" title="五、展望"></a>五、展望</h3><p>现在大数据模型百家齐放，希望国内的大厂可以加速赶超。</p>]]></content>
    
    
    <categories>
      
      <category>chatgpt</category>
      
    </categories>
    
    
    <tags>
      
      <tag>claude</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>【大数据模型】认识ChatGpt以及对当前行业的影响</title>
    <link href="/blog/docs/chatgpt-01/chatgpt/chatgpt-01/"/>
    <url>/blog/docs/chatgpt-01/chatgpt/chatgpt-01/</url>
    
    <content type="html"><![CDATA[<blockquote><p>汝之观览，吾之幸也！本文主要讲解的是一些ChatGpt的基本原理，以及浅说下国内外的大数据模型的对比，最后会谈下大数据模型对我们现有行业的影响。</p></blockquote><h3 id="一、大数据模型的背景"><a href="#一、大数据模型的背景" class="headerlink" title="一、大数据模型的背景"></a>一、大数据模型的背景</h3><h3 id="二、大数据模型的定义"><a href="#二、大数据模型的定义" class="headerlink" title="二、大数据模型的定义"></a>二、大数据模型的定义</h3><h3 id="三、大数据模型可以做什么"><a href="#三、大数据模型可以做什么" class="headerlink" title="三、大数据模型可以做什么"></a>三、大数据模型可以做什么</h3><h3 id="一、提示词"><a href="#一、提示词" class="headerlink" title="一、提示词"></a>一、提示词</h3><p>对于目前的一些大数据模型，主要就是自然语言处理（NLP）和人工智能的迭代，主要处理的就是文本语言，比如国外的openai、leonardoAi、Midjouney、Image Bing、Claude，或者国内的文心一言、通义千问、星火大模型等等，都是通过解析文本进行生成文本和图片。所以对于提示词（prompt）就格外重要。本文主要说的就是开发中用到的一些提示词。</p><h3 id="四、国内外的大数据模型对比"><a href="#四、国内外的大数据模型对比" class="headerlink" title="四、国内外的大数据模型对比"></a>四、国内外的大数据模型对比</h3><p>随着openAI发布ChatGpt（全名：Chat Generative Pre-trained Transformer）发布,基于语言模型的聊天机器人就入雨后春笋般出现了，有百度的<a href="https://yiyan.baidu.com/welcome">文心一言</a>，有阿里的<a href="tongyi.aliyun.com">通义千问</a>，也有复旦大学的<a href="https://moss.fastnlp.top/">MOSS</a>、科大讯飞<a href="https://xinghuo.xfyun.cn/desk">星火大模型</a>等等，国内外都在争先恐后的发布新的大数据模型，</p><h3 id="五、对当前行业的影响"><a href="#五、对当前行业的影响" class="headerlink" title="五、对当前行业的影响"></a>五、对当前行业的影响</h3><h3 id="六、展望未来"><a href="#六、展望未来" class="headerlink" title="六、展望未来"></a>六、展望未来</h3><h3 id="视频"><a href="#视频" class="headerlink" title="视频"></a>视频</h3><p><a href="https://www.bilibili.com/video/BV1No4y1t7Zn/?spm_id_from=333.337.search-card.all.click">吴恩达 提示词</a></p>]]></content>
    
    
    <categories>
      
      <category>chatgpt</category>
      
    </categories>
    
    
    <tags>
      
      <tag>chatgpt</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>【软考】信息系统项目管理师-项目管理概论</title>
    <link href="/blog/docs/part8/exam/part8/"/>
    <url>/blog/docs/part8/exam/part8/</url>
    
    <content type="html"><![CDATA[<blockquote><p>汝之观览，吾之幸也！本文主要说明《信息系统项目管理师》第4版第六章内容</p></blockquote><p>###二、项目基础要素</p><h4 id="1、项目基础"><a href="#1、项目基础" class="headerlink" title="1、项目基础"></a>1、项目基础</h4><p>定义：项目是为创造独特的产品、服务或成果而进行的临时性工作</p><h5 id="独特的产品、服务或成果"><a href="#独特的产品、服务或成果" class="headerlink" title="独特的产品、服务或成果"></a>独特的产品、服务或成果</h5><p>项目可以在组织的任何层级上开展。</p><h5 id="临时性工作"><a href="#临时性工作" class="headerlink" title="临时性工作"></a>临时性工作</h5><p>项目的“临时性”是指项目有明确的起点和终点。<br>虽然项目是临时性工作，但其可交付成果可能会在项目终止后依然存在。</p><h5 id="项目驱动变更"><a href="#项目驱动变更" class="headerlink" title="项目驱动变更"></a>项目驱动变更</h5><h4 id="2、项目管理的重要性"><a href="#2、项目管理的重要性" class="headerlink" title="2、项目管理的重要性"></a>2、项目管理的重要性</h4><p>项目管理不善或缺失可能导致：8个问题</p><h4 id="3、项目成功的标准"><a href="#3、项目成功的标准" class="headerlink" title="3、项目成功的标准"></a>3、项目成功的标准</h4>]]></content>
    
    
    <categories>
      
      <category>exam</category>
      
    </categories>
    
    
    <tags>
      
      <tag>软考,高项</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>【Java】小而全的Java工具类（Hutool）</title>
    <link href="/blog/docs/java-hutool/java/java-hutool/"/>
    <url>/blog/docs/java-hutool/java/java-hutool/</url>
    
    <content type="html"><![CDATA[<blockquote><p>汝之观览，吾之幸也！本文主要讲解项目中使用到的Hutool工具类的一些常用类。<br><a href="https://www.hutool.cn/">Hutool官网</a></p></blockquote><h3 id="作用"><a href="#作用" class="headerlink" title="作用"></a>作用</h3><h3 id="导入依赖"><a href="#导入依赖" class="headerlink" title="导入依赖"></a>导入依赖</h3>]]></content>
    
    
    <categories>
      
      <category>java</category>
      
    </categories>
    
    
    <tags>
      
      <tag>java,hutool</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>【Java】API接口文档宝典（knife4j）</title>
    <link href="/blog/docs/java-swagger/java/java-swagger/"/>
    <url>/blog/docs/java-swagger/java/java-swagger/</url>
    
    <content type="html"><![CDATA[<blockquote><p>汝之观览，吾之幸也！本文主要讲解swagger3的使用，方便开发者更好的测试接口，也可在对接第三方时更快速地导出api文档。<br><a href="https://swagger.io/">swagger官网地址</a>，<a href="https://doc.xiaominfo.com/">Knife4j官网地址</a></p></blockquote><h3 id="作用"><a href="#作用" class="headerlink" title="作用"></a>作用</h3><p>使用Swagger开源和专业工具集简化用户、团队和企业的API开发。了解Swagger如何帮助您大规模设计和记录API。</p><h3 id="导入依赖"><a href="#导入依赖" class="headerlink" title="导入依赖"></a>导入依赖</h3><p>因为knife4j包含swagger3，所以只引入knife4j即可</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs yml"><span class="hljs-string">&lt;dependency&gt;</span><br>  <span class="hljs-string">&lt;groupId&gt;com.github.xiaoymin&lt;/groupId&gt;</span><br>  <span class="hljs-string">&lt;artifactId&gt;knife4j-spring-boot-starter&lt;/artifactId&gt;</span><br>  <span class="hljs-string">&lt;version&gt;3.0.2&lt;/version&gt;</span><br><span class="hljs-string">&lt;/dependency&gt;</span><br></code></pre></td></tr></table></figure><h3 id="新增配置类"><a href="#新增配置类" class="headerlink" title="新增配置类"></a>新增配置类</h3><p>新增Swagger3Config</p><figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs reasonml">@Configuration<br>public <span class="hljs-keyword">class</span> Swagger3Config &#123;<br>    @Bean<br>    public Docket create<span class="hljs-constructor">RestApi()</span> &#123;<br>        return <span class="hljs-keyword">new</span> <span class="hljs-constructor">Docket(DocumentationType.OAS_30)</span><br>                .api<span class="hljs-constructor">Info(<span class="hljs-params">apiInfo</span>()</span>)<br>                .select<span class="hljs-literal">()</span><br>                .apis(<span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">RequestHandlerSelectors</span>.</span></span><span class="hljs-keyword">with</span><span class="hljs-constructor">MethodAnnotation(ApiOperation.<span class="hljs-params">class</span>)</span>)<br>                .paths(<span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">PathSelectors</span>.</span></span>any<span class="hljs-literal">()</span>)<br>                .build<span class="hljs-literal">()</span>;<br>    &#125;<br><br>    <span class="hljs-keyword">private</span> ApiInfo api<span class="hljs-constructor">Info()</span> &#123;<br>        return <span class="hljs-keyword">new</span> <span class="hljs-constructor">ApiInfoBuilder()</span><br>                .title(<span class="hljs-string">&quot;Java学习&quot;</span>)<br>                .description(<span class="hljs-string">&quot;纯码农公众号版权所有&quot;</span>)<br>                .contact(<span class="hljs-keyword">new</span> <span class="hljs-constructor">Contact(<span class="hljs-string">&quot;mitool&quot;</span>, <span class="hljs-string">&quot;&quot;</span>, <span class="hljs-string">&quot;&quot;</span>)</span>)<br>                .version(<span class="hljs-string">&quot;1.0&quot;</span>)<br>                .build<span class="hljs-literal">()</span>;<br>    &#125;<br><br>&#125;<br></code></pre></td></tr></table></figure><h3 id="实际使用"><a href="#实际使用" class="headerlink" title="实际使用"></a>实际使用</h3><p>使用测试类 TestController 进行测试</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-meta">@Api</span>(value = <span class="hljs-string">&quot;测试api&quot;</span>, tags = &#123;<span class="hljs-string">&quot;测试api&quot;</span>&#125;)<br><span class="hljs-meta">@RestController</span><br><span class="hljs-meta">@RequestMapping</span>(<span class="hljs-string">&quot;/test&quot;</span>)<br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">TestController</span> &#123;<br><br>    <span class="hljs-meta">@ApiOperation</span>(value = <span class="hljs-string">&quot;方法说明&quot;</span>)<br>    <span class="hljs-meta">@GetMapping</span>(<span class="hljs-string">&quot;/testMethod&quot;</span>)<br>    <span class="hljs-keyword">public</span> <span class="hljs-title class_">Map</span>&lt;<span class="hljs-title class_">String</span>, <span class="hljs-title class_">Object</span>&gt; <span class="hljs-title function_">testMethod</span>(<span class="hljs-params"></span>) &#123;<br>        <span class="hljs-title class_">Map</span>&lt;<span class="hljs-title class_">String</span>, <span class="hljs-title class_">Object</span>&gt; resultMap = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashMap</span>&lt;&gt;(<span class="hljs-number">2</span>);<br>        resultMap.<span class="hljs-title function_">put</span>(<span class="hljs-string">&quot;code&quot;</span>, <span class="hljs-number">200</span>);<br>        resultMap.<span class="hljs-title function_">put</span>(<span class="hljs-string">&quot;msg&quot;</span>, <span class="hljs-string">&quot;调用成功！&quot;</span>);<br>        <span class="hljs-keyword">return</span> resultMap;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>启动项目后根据配置的port与context-path得到地址<br><a href="http://localhost:9900/mitool-java/doc.html">swagger地址</a><br><img src="https://jimmy-blog-images.oss-cn-shanghai.aliyuncs.com/img/javaswagger%E7%95%8C%E9%9D%A2.png"></p>]]></content>
    
    
    <categories>
      
      <category>java</category>
      
    </categories>
    
    
    <tags>
      
      <tag>java,swagger</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>【软考】信息系统项目管理师-信息化发展</title>
    <link href="/blog/docs/exam-part2/exam/part2/"/>
    <url>/blog/docs/exam-part2/exam/part2/</url>
    
    <content type="html"><![CDATA[<blockquote><p>汝之观览，吾之幸也！本文主要说明《信息系统项目管理师》第4版第二章内容</p></blockquote><h3 id="定义："><a href="#定义：" class="headerlink" title="定义："></a>定义：</h3><p>信息技术是在信息科学的基础原理和方法下，获取信息、处理信息、传输信息和使用信息的应用技术总称。</p><h3 id="一、信息技术及其发展"><a href="#一、信息技术及其发展" class="headerlink" title="一、信息技术及其发展"></a>一、信息技术及其发展</h3><h4 id="1、计算机软硬件"><a href="#1、计算机软硬件" class="headerlink" title="1、计算机软硬件"></a>1、计算机软硬件</h4><h5 id="计算机软硬件"><a href="#计算机软硬件" class="headerlink" title="计算机软硬件"></a>计算机软硬件</h5><h5 id="计算机网络"><a href="#计算机网络" class="headerlink" title="计算机网络"></a>计算机网络</h5><p>分类：个人局域网、局域网、城域网、广域网、公用网、专用网<br>网络标准协议：OSI、IEEE 802协议族、TCP/IP<br>软件定义网络<br>第五代移动通信技术：微站，5G</p><h5 id="存储和数据库"><a href="#存储和数据库" class="headerlink" title="存储和数据库"></a>存储和数据库</h5><p>存储技术：服务器类型划分：外挂存储 DAS、NAS、SAN;存储虚拟化；绿色存储技术<br>数据结构模型：<br>常用数据库类型：<br>  关系型数据库（ACID：原子性、一致性、隔离性、持久性）、<br>  非关系型数据库:键值数据库、列存储数据库、面向文档数据库、图形数据库<br>数据仓库：<br>  数据仓库的特点：数据仓库是一个面向主题的、集成的、非易失的且随事件变化的数据集合，用于支持管理决策。<br>  数据仓库的体系结构：数据源（异构）、数据的存储与管理、联机分析处理（OLAP）、前段工具</p><h5 id="信息安全"><a href="#信息安全" class="headerlink" title="信息安全"></a>信息安全</h5><p>安全属性：保密性、完整性、可用性<br>安全层次：设备安全、数据安全、内容安全、行为安全<br>加密技术：算法、密钥    对称加密（DES）、非对称加密（RAS）<br>安全行为分析技术：用户画像<br>网络安全态势感知</p><h3 id="二、新一代信息技术及应用"><a href="#二、新一代信息技术及应用" class="headerlink" title="二、新一代信息技术及应用"></a>二、新一代信息技术及应用</h3><h4 id="1、物联网"><a href="#1、物联网" class="headerlink" title="1、物联网"></a>1、物联网</h4><p>架构分层：感知层（温度传感器、二维码标签、摄像头、RFID标签和读写器）、网络层、应用层</p><h4 id="2、云计算"><a href="#2、云计算" class="headerlink" title="2、云计算"></a>2、云计算</h4><p>技术基础：云计算实现了 快速、按需、弹性的服务<br>按服务分层：IaaS(基础设施即服务)、PaaS(平台即服务)、SaaS(软件即服务)<br>关键技术：虚拟化技术（docker）、云存储技术（分布式文件系统 HDFS）、多租户和访问控制管理、云安全技术</p><h4 id="3、大数据"><a href="#3、大数据" class="headerlink" title="3、大数据"></a>3、大数据</h4><p>大数据处理过程：数据准备-&gt;数据存储与管理-&gt;数据分析和计算-&gt;数据治理-&gt;数据展示<br>主要特征：数据海量、数据类型多样、数据价值密度低、数据处理速度快<br>关键技术：<br>  大数据获取技术：数据采集、整合、清洗<br>  分布式处理技术：分布式分布系统：Hadoop、Spark、Storm<br>  大数据管理技术：大数据存储（MPP架构）、大数据协同、安全隐私<br>  大数据应用和服务技术：分析应用技术、可视化技术</p><h4 id="4、区块链"><a href="#4、区块链" class="headerlink" title="4、区块链"></a>4、区块链</h4><p>典型特征：多中心化、多方维护、时序数据、智能合约、不可篡改、开放共识、安全可信<br>关键技术：分布式账本、加密算法（散列算法（MD5、SHA-1/SHA-2、SM3）、非对称加密（RSA））、共识机制</p><h4 id="5、人工智能"><a href="#5、人工智能" class="headerlink" title="5、人工智能"></a>5、人工智能</h4><p>关键技术：机器学习、自然语言处理(NLP)、专家系统</p><h4 id="6、虚拟现实"><a href="#6、虚拟现实" class="headerlink" title="6、虚拟现实"></a>6、虚拟现实</h4><p>主要特征：沉浸式、交互性、多感知性、构想性、自主性<br>关键技术：人机交互技术、传感器技术、动态环境建模技术、系统集成技术</p>]]></content>
    
    
    <categories>
      
      <category>exam</category>
      
    </categories>
    
    
    <tags>
      
      <tag>软考,高项</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>【Java】让你的代码变成模板，统一代码风格</title>
    <link href="/blog/docs/java-style/java/java-style/"/>
    <url>/blog/docs/java-style/java/java-style/</url>
    
    <content type="html"><![CDATA[<blockquote><p>汝之观览，吾之幸也！在一个团队中，可能每个人员的代码风格不一致，例如if，else的分行等，<br>这可能导致每次在格式化的时候会有冲突，为了避免不一致的代码风格出现的问题，特统一如下配置。</p></blockquote><h3 id="一、idea插件安装"><a href="#一、idea插件安装" class="headerlink" title="一、idea插件安装"></a>一、idea插件安装</h3><p>File-&gt;Settings-&gt;Plugins</p><h4 id="1、Alibaba-Java-Coding-Guidelines"><a href="#1、Alibaba-Java-Coding-Guidelines" class="headerlink" title="1、Alibaba Java Coding Guidelines"></a>1、Alibaba Java Coding Guidelines</h4><p>作用：阿里巴巴编码规范指南<br>使用：在类文件中右键-&gt;编码规约扫描（快捷键Ctrl + Alt + Shift +J）<br>可根据显示的Ali-Check、Major、Critical、Blocker 中提示的问题进行修改<br><img src="https://jimmy-blog-images.oss-cn-shanghai.aliyuncs.com/img/javaalibaba.png"></p><h4 id="2、CamelCase"><a href="#2、CamelCase" class="headerlink" title="2、CamelCase"></a>2、CamelCase</h4><p>作用：更改变量的大小写，缩写<br>使用：快捷键 Shift + Alt + U 可更改名称的大小写与缩写<br>可在Editor-&gt;Camel Case进行配置<br><img src="https://jimmy-blog-images.oss-cn-shanghai.aliyuncs.com/img/javacamelcase.png"></p><h3 id="二、代码强制规范（列举开发中遇到的常用场景）"><a href="#二、代码强制规范（列举开发中遇到的常用场景）" class="headerlink" title="二、代码强制规范（列举开发中遇到的常用场景）"></a>二、代码强制规范（列举开发中遇到的常用场景）</h3><p>编码格式化快捷键 Ctrl + Alt + L</p><h4 id="1、常量命名。多个单词需要加下划线分割"><a href="#1、常量命名。多个单词需要加下划线分割" class="headerlink" title="1、常量命名。多个单词需要加下划线分割"></a>1、常量命名。多个单词需要加下划线分割</h4><h4 id="2、单词需要拼写正确，不可使用中英文混合"><a href="#2、单词需要拼写正确，不可使用中英文混合" class="headerlink" title="2、单词需要拼写正确，不可使用中英文混合"></a>2、单词需要拼写正确，不可使用中英文混合</h4><h4 id="3、避免非必要的变量定义"><a href="#3、避免非必要的变量定义" class="headerlink" title="3、避免非必要的变量定义"></a>3、避免非必要的变量定义</h4><h4 id="4、方法或者变量名使用驼峰法命名"><a href="#4、方法或者变量名使用驼峰法命名" class="headerlink" title="4、方法或者变量名使用驼峰法命名"></a>4、方法或者变量名使用驼峰法命名</h4><h4 id="5、一个方法不能超过80行，根据单一职责原则拆分方法"><a href="#5、一个方法不能超过80行，根据单一职责原则拆分方法" class="headerlink" title="5、一个方法不能超过80行，根据单一职责原则拆分方法"></a>5、一个方法不能超过80行，根据单一职责原则拆分方法</h4><h4 id="6、重复代码需要进行拆分出去"><a href="#6、重复代码需要进行拆分出去" class="headerlink" title="6、重复代码需要进行拆分出去"></a>6、重复代码需要进行拆分出去</h4><h4 id="7、字符串拼接需要使用StringBuilder"><a href="#7、字符串拼接需要使用StringBuilder" class="headerlink" title="7、字符串拼接需要使用StringBuilder"></a>7、字符串拼接需要使用StringBuilder</h4><h4 id="8、针对返回的数据需要合理定义，如返回map、list等，变量命名就是xxxMap、xxxList"><a href="#8、针对返回的数据需要合理定义，如返回map、list等，变量命名就是xxxMap、xxxList" class="headerlink" title="8、针对返回的数据需要合理定义，如返回map、list等，变量命名就是xxxMap、xxxList"></a>8、针对返回的数据需要合理定义，如返回map、list等，变量命名就是xxxMap、xxxList</h4><h4 id="9、HashMap初始化需要指定大小，默认可指定16"><a href="#9、HashMap初始化需要指定大小，默认可指定16" class="headerlink" title="9、HashMap初始化需要指定大小，默认可指定16"></a>9、HashMap初始化需要指定大小，默认可指定16</h4><h4 id="10、集合泛型后不加指定类型，如Map-lt-String-Object-gt-testMap-new-HashMap-lt-gt-16"><a href="#10、集合泛型后不加指定类型，如Map-lt-String-Object-gt-testMap-new-HashMap-lt-gt-16" class="headerlink" title="10、集合泛型后不加指定类型，如Map&lt;String,Object&gt; testMap = new HashMap&lt;&gt;(16);"></a>10、集合泛型后不加指定类型，如Map&lt;String,Object&gt; testMap = new HashMap&lt;&gt;(16);</h4><h4 id="11、类名、方法名、内部成员变量、成员变量需要加上注释"><a href="#11、类名、方法名、内部成员变量、成员变量需要加上注释" class="headerlink" title="11、类名、方法名、内部成员变量、成员变量需要加上注释"></a>11、类名、方法名、内部成员变量、成员变量需要加上注释</h4><h4 id="12、判断列表大小不用-size-方法，使用-isEmpty-方法"><a href="#12、判断列表大小不用-size-方法，使用-isEmpty-方法" class="headerlink" title="12、判断列表大小不用.size()方法，使用.isEmpty()方法"></a>12、判断列表大小不用.size()方法，使用.isEmpty()方法</h4><h4 id="13、BigDicimal初始化不要是Double类型，需为字符串。"><a href="#13、BigDicimal初始化不要是Double类型，需为字符串。" class="headerlink" title="13、BigDicimal初始化不要是Double类型，需为字符串。"></a>13、BigDicimal初始化不要是Double类型，需为字符串。</h4><p>如经纬度 BigDecimal lngDecimal = new BigDecimal(String.valueOf(lng));</p><h3 id="二、idea配置"><a href="#二、idea配置" class="headerlink" title="二、idea配置"></a>二、idea配置</h3><p>File-&gt;Settings-&gt;Editor</p><h4 id="1、CodeStyle设置代码超过120列自动换行"><a href="#1、CodeStyle设置代码超过120列自动换行" class="headerlink" title="1、CodeStyle设置代码超过120列自动换行"></a>1、CodeStyle设置代码超过120列自动换行</h4><p><img src="https://jimmy-blog-images.oss-cn-shanghai.aliyuncs.com/img/java120%E8%A1%8C.png"></p><h4 id="2、CodeStyle-gt-Java-gt-Tabs-and-Indents-中设置tab为四个空格"><a href="#2、CodeStyle-gt-Java-gt-Tabs-and-Indents-中设置tab为四个空格" class="headerlink" title="2、CodeStyle-&gt;Java-&gt;Tabs and Indents 中设置tab为四个空格"></a>2、CodeStyle-&gt;Java-&gt;Tabs and Indents 中设置tab为四个空格</h4><p><img src="https://jimmy-blog-images.oss-cn-shanghai.aliyuncs.com/img/javatab4.png"></p><h4 id="3、CodeStyle-gt-Java-gt-Wrapping-and-Braces中设置if-else、try-catch的换行"><a href="#3、CodeStyle-gt-Java-gt-Wrapping-and-Braces中设置if-else、try-catch的换行" class="headerlink" title="3、CodeStyle-&gt;Java-&gt;Wrapping and Braces中设置if else、try catch的换行"></a>3、CodeStyle-&gt;Java-&gt;Wrapping and Braces中设置if else、try catch的换行</h4><p><img src="https://jimmy-blog-images.oss-cn-shanghai.aliyuncs.com/img/javaifelse.png"></p><h4 id="4、CodeStyle-gt-Java-gt-Imports中导入类import不允许导入"><a href="#4、CodeStyle-gt-Java-gt-Imports中导入类import不允许导入" class="headerlink" title="4、CodeStyle-&gt;Java-&gt;Imports中导入类import不允许导入*"></a>4、CodeStyle-&gt;Java-&gt;Imports中导入类import不允许导入*</h4><p><img src="https://jimmy-blog-images.oss-cn-shanghai.aliyuncs.com/img/javaimport.png"></p><h4 id="5、File-and-Code-Templates-gt-Files中设置类注释"><a href="#5、File-and-Code-Templates-gt-Files中设置类注释" class="headerlink" title="5、File and Code Templates-&gt;Files中设置类注释"></a>5、File and Code Templates-&gt;Files中设置类注释</h4><p>Files下的Class、Interface、Enum文件<br>Code下的Junit4 Test Class文件<br>参考注释：</p><figure class="highlight crystal"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs crystal">/**<br> * &lt;p&gt;<span class="hljs-symbol">Title:</span> <span class="hljs-variable">$&#123;</span>NAME&#125;&lt;<span class="hljs-regexp">/p&gt;</span><br><span class="hljs-regexp"> * &lt;p&gt;</span><br><span class="hljs-regexp"> * Description:</span><br><span class="hljs-regexp"> * &lt;/p</span>&gt;<br> *<br> * <span class="hljs-variable">@author</span> Jimmy.Shen<br> * <span class="hljs-variable">@version</span> <span class="hljs-number">1.0</span>.<span class="hljs-number">0</span><br> * <span class="hljs-variable">@since</span> <span class="hljs-variable">$&#123;</span>YEAR&#125;-<span class="hljs-variable">$&#123;</span>MONTH&#125;-<span class="hljs-variable">$&#123;</span>DAY&#125; <span class="hljs-variable">$&#123;</span>HOUR&#125;:<span class="hljs-variable">$&#123;</span>MINUTE&#125;<br> **<span class="hljs-regexp">/</span><br></code></pre></td></tr></table></figure><p><img src="https://jimmy-blog-images.oss-cn-shanghai.aliyuncs.com/img/javaclass.png"></p><h4 id="6、Live-Templates中设置方法注释"><a href="#6、Live-Templates中设置方法注释" class="headerlink" title="6、Live Templates中设置方法注释"></a>6、Live Templates中设置方法注释</h4><p>（1）新增myGroup<br>（2）新增Live Templates<br>（3）进行配置注释<br>参考注释：</p><figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs less">** <br> * <br> * <span class="hljs-variable">@author</span> JimmyShen<br> * <span class="hljs-variable">@date</span> $date$ $time$ <br> $param$<br> $return$<br> */<br></code></pre></td></tr></table></figure><p>（4）配置模板对应的文件类型 Define-&gt;Java<br>（5）配置参数值 Edit variables  勾选Skip if defined<br>date 配置 date()<br>time 配置 time()<br>param 配置</p><figure class="highlight lsl"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs lsl">groovyScript(<span class="hljs-string">&quot;def result = &#x27;&#x27;;def params = <span class="hljs-subst">\&quot;</span>$&#123;_1&#125;<span class="hljs-subst">\&quot;</span>.replaceAll(&#x27;[<span class="hljs-subst">\\</span><span class="hljs-subst">\\</span>[|<span class="hljs-subst">\\</span><span class="hljs-subst">\\</span>]|<span class="hljs-subst">\\</span><span class="hljs-subst">\\</span>s]&#x27;, &#x27;&#x27;).split(&#x27;,&#x27;).toList(); for(i = 0; i &lt; params.size(); i++) &#123;if(params[i] != &#x27;&#x27;)result+=&#x27;* @param &#x27; + params[i] + &#x27; &#x27; +((i &lt; params.size() - 1) ? &#x27;<span class="hljs-subst">\\</span>r<span class="hljs-subst">\\</span>n &#x27; : &#x27;&#x27;)&#125;; return result == &#x27;&#x27; ? null : result&quot;</span>, methodParameters())<br></code></pre></td></tr></table></figure><p>return 配置</p><figure class="highlight scilab"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs scilab">groovyScript(<span class="hljs-string">&quot;def returnType = \&quot;$&#123;_1&#125;\&quot;; def result =&#x27;&#x27;;if(returnType==&#x27;</span>null&#x27;||returnType==<span class="hljs-string">&#x27;void&#x27;</span>)&#123;<span class="hljs-keyword">return</span>;&#125;<span class="hljs-keyword">else</span>&#123;result += <span class="hljs-string">&#x27;* @return &#x27;</span>;cls = returnType.split(<span class="hljs-string">&#x27;&lt;&#x27;</span>);<span class="hljs-keyword">for</span>(i = <span class="hljs-number">0</span>; i &lt; cls.<span class="hljs-built_in">size</span>(); i++)&#123;temp = cls[i].tokenize(<span class="hljs-string">&#x27;.&#x27;</span>);result += temp[temp.size() - <span class="hljs-number">1</span>] + ((i &lt; cls.<span class="hljs-built_in">size</span>() - <span class="hljs-number">1</span>) ? <span class="hljs-string">&#x27;&lt;&#x27;</span> : <span class="hljs-string">&#x27;&#x27;</span>);&#125;;<span class="hljs-keyword">return</span> result + <span class="hljs-string">&#x27; &#x27;</span>;&#125;<span class="hljs-string">&quot;, methodReturnType());</span><br></code></pre></td></tr></table></figure><p>之后在方法上输入/** + Enter即可生产方法注释<br><img src="https://jimmy-blog-images.oss-cn-shanghai.aliyuncs.com/img/javamethod.png"></p>]]></content>
    
    
    <categories>
      
      <category>java</category>
      
    </categories>
    
    
    <tags>
      
      <tag>java</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>【Java】导出excel文件（包含标题，内容合并）</title>
    <link href="/blog/docs/java-load/java/java-load/"/>
    <url>/blog/docs/java-load/java/java-load/</url>
    
    <content type="html"><![CDATA[<blockquote><p>汝之观览，吾之幸也！主要把工作中用到的excel导出功能做下整理，以便后续使用。</p></blockquote><h3 id><a href="#" class="headerlink" title></a></h3><h4 id="1、添加poi依赖"><a href="#1、添加poi依赖" class="headerlink" title="1、添加poi依赖"></a>1、添加poi依赖</h4><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs yml"><span class="hljs-string">&lt;!--</span><span class="hljs-string">poi</span> <span class="hljs-string">--&gt;</span><br><span class="hljs-string">&lt;dependency&gt;</span><br>    <span class="hljs-string">&lt;groupId&gt;org.apache.poi&lt;/groupId&gt;</span><br>    <span class="hljs-string">&lt;artifactId&gt;poi&lt;/artifactId&gt;</span><br>    <span class="hljs-string">&lt;version&gt;4.1.2&lt;/version&gt;</span><br><span class="hljs-string">&lt;/dependency&gt;</span><br><span class="hljs-string">&lt;dependency&gt;</span><br>    <span class="hljs-string">&lt;groupId&gt;org.apache.poi&lt;/groupId&gt;</span><br>    <span class="hljs-string">&lt;artifactId&gt;poi-ooxml&lt;/artifactId&gt;</span><br>    <span class="hljs-string">&lt;version&gt;4.1.2&lt;/version&gt;</span><br><span class="hljs-string">&lt;/dependency&gt;</span><br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>java-load</category>
      
    </categories>
    
    
    <tags>
      
      <tag>java</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>【Java】代码中的安全漏洞解决合集（更新中）</title>
    <link href="/blog/docs/leak-01/java/leak-01/"/>
    <url>/blog/docs/leak-01/java/leak-01/</url>
    
    <content type="html"><![CDATA[<blockquote><p>汝之观览，吾之幸也！本文主要讲解Java的一些安全漏洞，并且给出浅知的解决方案。<br>具体国内的风险可查看网址<a href="https://www.cstis.cn/cate/8e2724d2-d81c-88b4-ac4c-495cd2c4cbfc">工业和信息化部网络安全威胁和漏洞信息共享平台</a><br><img src="https://jimmy-blog-images.oss-cn-shanghai.aliyuncs.com/img/java%E6%BC%8F%E6%B4%9E%E4%BF%A1%E6%81%AF%E5%85%B1%E4%BA%AB%E5%B9%B3%E5%8F%B0.png"></p></blockquote><h3 id="1、Spring-Framework反射型文件下载漏洞（CVE-2020-5421）"><a href="#1、Spring-Framework反射型文件下载漏洞（CVE-2020-5421）" class="headerlink" title="1、Spring Framework反射型文件下载漏洞（CVE-2020-5421）"></a>1、Spring Framework反射型文件下载漏洞（CVE-2020-5421）</h3><h4 id="漏洞危害描述"><a href="#漏洞危害描述" class="headerlink" title="漏洞危害描述"></a>漏洞危害描述</h4><p>Spring Framework是 Java 平台的一个开源全栈应用程序框架和控制反转容器实现，一般被直接称为 Spring，该框架提供了一种简易的开发方式，可避免那些可能致使底层代码变得繁杂混乱的大量的属性文件和帮助类，被大量的Java开发工作者采用。利用本次公布的漏洞，攻击者可绕过RFD攻击防御，进行反射型文件下载攻击，风险较高。观安信息研究院建议广大用户尽快进行资产自查及预防工作，及时进行版本更新，以免遭受恶意攻击。</p><p>本次公布的漏洞存在于Spring Framework版本5.2.0-5.2.8、5.1.0-5.1.17、5.0.0-5.0.18、4.3.0-4.3.28和较旧的不受支持的版本中。利用该漏洞可通过jsessionid路径参数，绕过防御RFD攻击的保护。攻击者通过向用户发送带有批处理脚本扩展名的URL，使用户下载并执行文件，从而危害用户系统。</p><p>影响版本：<br>Spring Framework 5.2.0 – 5.2.8<br>Spring Framework 5.1.0 – 5.1.17<br>Spring Framework 5.0.0 – 5.0.18<br>Spring Framework 4.3.0 – 4.3.28<br>以及其他已不受支持的版本</p><h4 id="漏洞解决方案"><a href="#漏洞解决方案" class="headerlink" title="漏洞解决方案"></a>漏洞解决方案</h4><p>更改版本<br>Spring Framework 5.2.9<br>Spring Framework 5.1.18<br>Spring Framework 5.0.19<br>Spring Framework 4.3.29</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs yml"><span class="hljs-string">&lt;dependency&gt;</span><br>    <span class="hljs-string">&lt;groupId&gt;org.springframework&lt;/groupId&gt;</span><br>    <span class="hljs-string">&lt;artifactId&gt;spring-web&lt;/artifactId&gt;</span><br>    <span class="hljs-string">&lt;version&gt;5.2.9.RELEASE&lt;/version&gt;</span><br><span class="hljs-string">&lt;/dependency&gt;</span><br></code></pre></td></tr></table></figure><p>将涉及到spring-web  jar的进行屏蔽 如：spring-boot-starter、spring-boot-starter-quartz、<br>spring-boot-starter-data-redis、spring-boot-starter-websocket、spring-boot-starter-web</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs yml"><span class="hljs-string">&lt;dependency&gt;</span><br>    <span class="hljs-string">&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;</span><br>    <span class="hljs-string">&lt;artifactId&gt;spring-boot-starter&lt;/artifactId&gt;</span><br>    <span class="hljs-string">&lt;exclusions&gt;</span><br>        <span class="hljs-string">&lt;exclusion&gt;</span><br>            <span class="hljs-string">&lt;groupId&gt;org.springframework&lt;/groupId&gt;</span><br>            <span class="hljs-string">&lt;artifactId&gt;spring-web&lt;/artifactId&gt;</span><br>        <span class="hljs-string">&lt;/exclusion&gt;</span><br>    <span class="hljs-string">&lt;/exclusions&gt;</span><br><span class="hljs-string">&lt;/dependency&gt;</span><br></code></pre></td></tr></table></figure><h3 id="2、MyBatis-远程代码执行漏洞（CVE-2020-26945）"><a href="#2、MyBatis-远程代码执行漏洞（CVE-2020-26945）" class="headerlink" title="2、MyBatis 远程代码执行漏洞（CVE-2020-26945）"></a>2、MyBatis 远程代码执行漏洞（CVE-2020-26945）</h3><h4 id="漏洞危害描述-1"><a href="#漏洞危害描述-1" class="headerlink" title="漏洞危害描述"></a>漏洞危害描述</h4><p>MyBatis是美国阿帕奇（Apache）软件基金会的一款优秀的持久层框架。支持自定义SQL、存储过程以及高级映射，免除了几乎所有的JDBC代码以及设置参数和获取结果集的工作，可以通过简单的XML或注解来配置和映射原始类型、接口和Java POJO（Plain Old Java Objects，普通老式Java对象）为数据库中的记录，在国内被广泛使用。该漏洞影响范围广，风险性高，为避免业务受影响，建议受影响的用户尽快升级至安全版本，做好资产自查及预防工作，避免被外部攻击者入侵。</p><p>MyBatis 3.5.6之前版本存在安全漏洞，该漏洞源于错误处理对象流的反序列化。<br>该漏洞被成功利用，需满足以下的前提条件：<br>1）用户启用了内置的二级缓存；<br>2）用户未设置JEP-290过滤器；<br>3）攻击者获取了修改私有Map字段条目的方法，即修改org.apache.ibatis.cache.impl.PerpetualCache.cache有效的缓存密钥。</p><p>影响版本：<br>Mybatis &lt; 3.5.6</p><h4 id="漏洞解决方案-1"><a href="#漏洞解决方案-1" class="headerlink" title="漏洞解决方案"></a>漏洞解决方案</h4><p>升级版本<br>Mybatis 3.5.6</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs yml"><span class="hljs-string">&lt;dependency&gt;</span><br>    <span class="hljs-string">&lt;groupId&gt;org.mybatis&lt;/groupId&gt;</span><br>    <span class="hljs-string">&lt;artifactId&gt;mybatis&lt;/artifactId&gt;</span><br>    <span class="hljs-string">&lt;version&gt;3.5.6&lt;/version&gt;</span><br><span class="hljs-string">&lt;/dependency&gt;</span><br></code></pre></td></tr></table></figure><p>将涉及到mybatis  jar的进行屏蔽 如：mybatis-spring-boot-starter、mybatis-plus-generator</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs yml"><span class="hljs-string">&lt;dependency&gt;</span><br>    <span class="hljs-string">&lt;groupId&gt;org.mybatis.spring.boot&lt;/groupId&gt;</span><br>    <span class="hljs-string">&lt;artifactId&gt;mybatis-spring-boot-starter&lt;/artifactId&gt;</span><br>    <span class="hljs-string">&lt;exclusions&gt;</span><br>        <span class="hljs-string">&lt;exclusion&gt;</span><br>            <span class="hljs-string">&lt;groupId&gt;org.mybatis&lt;/groupId&gt;</span><br>            <span class="hljs-string">&lt;artifactId&gt;mybatis&lt;/artifactId&gt;</span><br>        <span class="hljs-string">&lt;/exclusion&gt;</span><br>    <span class="hljs-string">&lt;/exclusions&gt;</span><br><span class="hljs-string">&lt;/dependency&gt;</span><br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>java</category>
      
    </categories>
    
    
    <tags>
      
      <tag>java</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>【Java】Spring家族三大支柱（Spring、SpringBoot、SpringCloud）</title>
    <link href="/blog/docs/spring-01/spring/spring-01/"/>
    <url>/blog/docs/spring-01/spring/spring-01/</url>
    
    <content type="html"><![CDATA[<blockquote><p>汝之观览，吾之幸也！ 本文主要讲解的是Spring的三大家族，我们在学习Java的时候现在最常用的架构就是SSM（Spring+SpringBoot+Mabatis），以前也有SSH(Spring+Strtus2+Hibernate)，现在SSH已经摒弃了。基本用的都是SSM架构了，<br>本文就从Spring、SpringBoot、SpringCloud的基本概念进行了解吧。</p></blockquote><h3 id="一、来由"><a href="#一、来由" class="headerlink" title="一、来由"></a>一、来由</h3><h3 id="二、"><a href="#二、" class="headerlink" title="二、"></a>二、</h3>]]></content>
    
    
    <categories>
      
      <category>spring</category>
      
    </categories>
    
    
    <tags>
      
      <tag>spring,springboot,springcloud</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>【微服务】微服务的家庭聚会（springcloud）</title>
    <link href="/blog/docs/springcloud-01/spring/springcloud-01/"/>
    <url>/blog/docs/springcloud-01/spring/springcloud-01/</url>
    
    <content type="html"><![CDATA[<blockquote><p>汝之观览，吾之幸也！本文主要讲解微服务的一些组件使用，以及相应的原理解释，并通过代码进行记录说明。</p></blockquote><h3 id="一、概念"><a href="#一、概念" class="headerlink" title="一、概念"></a>一、概念</h3><h3 id="二、使用"><a href="#二、使用" class="headerlink" title="二、使用"></a>二、使用</h3>]]></content>
    
    
    <categories>
      
      <category>spring</category>
      
    </categories>
    
    
    <tags>
      
      <tag>springcloud</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>【工具】变身为自动化装配（k8s的引入）</title>
    <link href="/blog/docs/k8s-01/tool/k8s-01/"/>
    <url>/blog/docs/k8s-01/tool/k8s-01/</url>
    
    <content type="html"><![CDATA[]]></content>
    
    
    <categories>
      
      <category>tool</category>
      
    </categories>
    
    
    <tags>
      
      <tag>k8s</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>【工具】解放你的双手，看着就完了（Docker入门）</title>
    <link href="/blog/docs/docker-01/tool/docker-01/"/>
    <url>/blog/docs/docker-01/tool/docker-01/</url>
    
    <content type="html"><![CDATA[]]></content>
    
    
    <categories>
      
      <category>tool</category>
      
    </categories>
    
    
    <tags>
      
      <tag>docker</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>【Java】恭喜你，你的代码获奖了（编写代码的151的建议）</title>
    <link href="/blog/docs/java-151/java/java-151/"/>
    <url>/blog/docs/java-151/java/java-151/</url>
    
    <content type="html"><![CDATA[<blockquote><p>汝之观览，吾之幸也！本文主要摘抄Java代码的151的建议，让你的代码变得更加的优雅，从新手养成编写好代码的习惯。<br>编写程序是一件优雅的事，所以要学习一些基本的代码规范。本文参考《编写高质量代码 改善Java程序的151个建议》，<br>具体pdf可加公众号【纯码农（purecodefarmer）】输入“151”即可获取</p></blockquote><h3 id="一、代码准则"><a href="#一、代码准则" class="headerlink" title="一、代码准则"></a>一、代码准则</h3><p>1、不要在常量和变量中出现易混淆的字母<br>2、莫让常量蜕变成变量<br>3、三元操作符的类型务必一致<br>4、避免带有变长参数的方法重载<br>5、别让null值和空值威胁到变长方法<br>6、覆写变长方法也要循规蹈矩<br>7、警惕自增的陷阱<br>8、不要让旧语法困扰你<br>9、少用静态导入<br>10、不要在本类中覆盖静态导入的变量和方法<br>11、养成良好的习惯，显式声明UID<br>12、避免用序列化类在构造函数中为不变量赋值<br>13、避免为final变量复杂赋值<br>14、使用序列化类的私有方法巧妙解决部分属性持久化问题<br>15、break万万不可忘<br>16、易变业务使用脚本语言编写<br>17、慎用动态编译<br>18、避免instanceof非预期结果<br>19、断言绝对不是鸡肋<br>20、不要只替换一个类</p><h3 id="二、基本类型"><a href="#二、基本类型" class="headerlink" title="二、基本类型"></a>二、基本类型</h3><p>21、用偶判断、不用奇判断<br>22、用整数类型处理货币<br>23、不要让类型默默转换<br>24、边界，边界，还是边界<br>25、不要让四舍五入亏了一方<br>26、提防包装类型的null值<br>27、谨慎包装类型的大小比较<br>28、优先使用整型池<br>29、优先选择基本数据类型<br>30、不要随便设置随机数种子</p><h3 id="三、类、对象与方法"><a href="#三、类、对象与方法" class="headerlink" title="三、类、对象与方法"></a>三、类、对象与方法</h3><p>31、在接口中不要存在实现代码<br>32、静态变量一定要先声明，后赋值<br>33、不要覆写静态方法<br>34、构造函数尽量简化<br>35、避免在构造函数中初始化其他类<br>36、使用构造代码块精炼程序<br>37、使用静态内部类提高封装性<br>38、使用静态内部类提高封装性<br>39、使用匿名内部类的构造函数<br>40、匿名类的构造方法很特殊<br>41、让多重继承成为现实<br>42、让工具类不可实例化<br>43、避免对象的浅拷贝<br>44、推荐使用序列化实现对象的拷贝<br>45、重写equals方法时不要识别不出自己<br>46、重写equals应该考虑null<br>47、在equals中使用getclass进行类型判断<br>48、重写equals方法必须重写hashcode方法<br>49、推荐重写tostring<br>50、使用package-info类为包服务<br>51、不要主动进行垃圾回收</p><h3 id="四、字符串"><a href="#四、字符串" class="headerlink" title="四、字符串"></a>四、字符串</h3><p>52、推荐使用string直接量赋值<br>53、注意方法中传递的参数要求<br>54、正确使用string、stringbuffer、stringbuilder<br>55、注意字符串的位置<br>56、选择适当的字符串拼接方法<br>57、推荐在复杂字符串操作中使用正则表达式<br>58、统一编码<br>59、对字符串排序持一种宽容的心态</p><h3 id="五、数组与集合"><a href="#五、数组与集合" class="headerlink" title="五、数组与集合"></a>五、数组与集合</h3><p>60、性能考虑，数组是首选<br>61、若有必要，使用可变数组<br>62、警惕数组的浅拷贝<br>63、在明确的场景下，为集合指定初始容量<br>64、多种最值算法，实时选择<br>65、避开基本类型数组转换列表陷阱<br>66、aslist方法产生的list对象不可更改<br>67、不同的列表选择不同的遍历方法<br>68、频繁插入和删除时使用linkedlist<br>69、列表相等只需关心元素数据<br>70、子列表只是原列表的一个视图<br>71、推荐使用sublist处理局部列表<br>72、生成子列表后不要再操作原列表(sublist)<br>73、使用Comparator进行排序<br>74、不推荐使用binarySearch对列表进行检索<br>75、集合中的元素必须做到compareTo和equals同步<br>76、集合运算时使用更优雅的方式<br>77、使用shuffle打乱列表<br>78、减少hashmap中元素的数量<br>79、集合汇总的哈希码不要重复<br>80、多线程使用vector 、hashtable<br>81、非稳定排序推荐使用list<br>82、有点及面，一叶知秋-集合大家族</p><h3 id="六、枚举与注解"><a href="#六、枚举与注解" class="headerlink" title="六、枚举与注解"></a>六、枚举与注解</h3><p>83、推荐使用枚举定义常量<br>84、使用构造函数协助描述枚举项add code<br>85、小心switch带来的空值异常<br>86、在switch的default代码快中增加assertionerror错误<br>87、使用valueof前必须校验<br>88、用枚举实现工厂方法模式更简洁<br>89、枚举项的数量限制在64个以内<br>90、小心使用注解<br>91、枚举和注解结合使用威力更大<br>92、注意@override不同版本的区别</p><h3 id="七、泛型与反射"><a href="#七、泛型与反射" class="headerlink" title="七、泛型与反射"></a>七、泛型与反射</h3><p>93、java的泛型是类型擦除的<br>94、不能初始化泛型参数和数组<br>95、强制声明泛型的实际类型<br>96、不同的场景使用不同的泛型通配符<br>97、警惕泛型是不能协变和逆变的<br>98、建议采用的顺序是List<T> List&lt;?&gt; List<Object><br>99、严格限定泛型类型采用多重界限<br>100、数组的真实类型必须是泛型类型的子类型<br>101、注意Class类的特殊性<br>102、实时选择getDeclaredMethod和getMethod<br>103、反射访问属性或者方法时将accessible设置为true<br>104、使用forName动态加载类文件<br>105、动态加载不适合数组<br>106、动态代理可以使代理模式更加灵活<br>107、动态代理可以使装饰者模式更加灵活<br>108、反射让模块方法模式更强大<br>109、不需要太多关注反射效率</Object></T></p><h3 id="八、异常"><a href="#八、异常" class="headerlink" title="八、异常"></a>八、异常</h3><p>110、提倡异常封装<br>111、采用异常链传递参数<br>112、受检异常尽可能转化为非受检异常<br>113、不要在finally块中处理返回值<br>114、不要在构造函数中抛出异常<br>115、使用throwable获得栈信息<br>116、异常只为异常服务<br>117、多使用异常，把性能问题放一边</p><h3 id="九、多线程与并发"><a href="#九、多线程与并发" class="headerlink" title="九、多线程与并发"></a>九、多线程与并发</h3><p>118、不推荐覆写start方法<br>119、启动线程前stop方法是不可靠的<br>120、不使用stop方法停止线程<br>121、线程优先级只使用三个等级<br>122、使用线程异常处理器提升系统可靠性<br>123、volatile不能保证数据同步<br>124、异步运算考虑使用callable接口<br>125、优先选择线程池<br>126、适时选择不同的线程池来实现<br>127、lock于synchronized是不一样的<br>128、预防线程死锁<br>129、适当设置阻塞队列长度<br>130、使用countdownlatch协调自线程<br>131、cyclicbarrier让多线程齐步走</p><h3 id="十、性能与效率"><a href="#十、性能与效率" class="headerlink" title="十、性能与效率"></a>十、性能与效率</h3><p>132、提升java性能的基本方法<br>133、若非必要，不要克隆对象<br>134、推荐使用望闻问切的方式诊断性能<br>135、必须定义性能衡量标准<br>136、枪打出头鸟–解决首要系统性能问题<br>137、调整jvm参数以提升性能<br>138、性能是个大‘咕咚’</p><h3 id="十一、开源世界"><a href="#十一、开源世界" class="headerlink" title="十一、开源世界"></a>十一、开源世界</h3><p>139、大胆采用开源工具<br>140、推荐使用guava扩展工具包<br>141、apache扩展包<br>142、推荐使用joda日期时间扩展包<br>143、可以选择多种collections扩展</p><h3 id="十二、思想为源"><a href="#十二、思想为源" class="headerlink" title="十二、思想为源"></a>十二、思想为源</h3><p>144、提倡良好的代码风格<br>145、不要完全依靠单元测试来发现问题<br>146、让注释正确、清晰、简洁<br>147、让代码的职责保持单一<br>148、增强类的可替换性<br>149、依赖抽象而不是实现<br>150、抛弃7条不良的编码习惯<br>151、以技术员自律而不是工人</p>]]></content>
    
    
    <categories>
      
      <category>java</category>
      
    </categories>
    
    
    <tags>
      
      <tag>java</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>【大数据】Hive的出生（懒着写MapReduce程序）</title>
    <link href="/blog/docs/hive-02/bigdata/hive/hive-02/"/>
    <url>/blog/docs/hive-02/bigdata/hive/hive-02/</url>
    
    <content type="html"><![CDATA[<blockquote><p>汝之观览，吾之幸也！本文主要讲解Hive的基本概念与架构，学习了Hadoop知道了MapReduce，那么在实际运用中如果慢慢写MapReduce程序也是可以的，但是太麻烦了，也比较费时间，所以大佬们就开始用其他方式代替了，基本的SQL大家都会的，那么大佬设计出Hive，通过Hive的HQL转换为MapReduce,这样就省去写MapReduce的步骤了。<a href="https://hive.apache.org/">Hive官网</a></p></blockquote><h3 id="一、什么是Hive"><a href="#一、什么是Hive" class="headerlink" title="一、什么是Hive"></a>一、什么是Hive</h3><p><img src="https://jimmy-blog-images.oss-cn-shanghai.aliyuncs.com/img/bigdata/Hive.png"><br>Hive：由Facebook开源用于解决海量结构化日志的数据统计工具。<br>Hive是基于Hadoop的一个数据仓库工具，可以将结构化的数据文件映射为一张表，并提供类SQL查询功能。<br>本质是：将HQL转化成MapReduce程序<br><img src="https://jimmy-blog-images.oss-cn-shanghai.aliyuncs.com/img/bigdata/hiveHive%E7%9A%84HQL.png"></p><ul><li>Hive处理的数据存储在HDFS</li><li>Hive分析数据底层的实现是MapReduce</li><li>执行程序运行在Yarn上<h3 id="二、Hive的优缺点"><a href="#二、Hive的优缺点" class="headerlink" title="二、Hive的优缺点"></a>二、Hive的优缺点</h3><h4 id="1、优点"><a href="#1、优点" class="headerlink" title="1、优点"></a>1、优点</h4></li><li>操作接口采用类SQL语法，提供快速开发的能力（简单、容易上手）。</li><li>避免了去写MapReduce，减少开发人员的学习成本。</li><li>Hive的执行延迟比较高，因此Hive常用于数据分析，对实时性要求不高的场合。</li><li>Hive优势在于处理大数据，对于处理小数据没有优势，因为Hive的执行延迟比较高。</li><li>Hive优势在于处理大数据，对于处理小数据没有优势，因为Hive的执行延迟比较高。</li></ul><h4 id="2、缺点"><a href="#2、缺点" class="headerlink" title="2、缺点"></a>2、缺点</h4><h5 id="1、Hive的HQL表达能力有限"><a href="#1、Hive的HQL表达能力有限" class="headerlink" title="1、Hive的HQL表达能力有限"></a>1、Hive的HQL表达能力有限</h5><ul><li>迭代式算法无法表达</li><li>数据挖掘方面不擅长，由于MapReduce数据处理流程的限制，效率更高的算法却无法实现。<h5 id="2、Hive的效率比较低"><a href="#2、Hive的效率比较低" class="headerlink" title="2、Hive的效率比较低"></a>2、Hive的效率比较低</h5></li><li>Hive自动生成的MapReduce作业，通常情况下不够智能化</li><li>Hive调优比较困难，粒度较粗</li></ul><h3 id="三、Hive的架构原理"><a href="#三、Hive的架构原理" class="headerlink" title="三、Hive的架构原理"></a>三、Hive的架构原理</h3><p><img src="https://jimmy-blog-images.oss-cn-shanghai.aliyuncs.com/img/bigdata/hiveHive%E6%9E%B6%E6%9E%84.png"></p><h4 id="1、用户接口：Client"><a href="#1、用户接口：Client" class="headerlink" title="1、用户接口：Client"></a>1、用户接口：Client</h4><p>CLI（command-line interface）、JDBC/ODBC(jdbc访问hive)、WEBUI（浏览器访问hive）</p><h4 id="2、元数据：Metastore"><a href="#2、元数据：Metastore" class="headerlink" title="2、元数据：Metastore"></a>2、元数据：Metastore</h4><p>元数据包括：表名、表所属的数据库（默认是default）、表的拥有者、列/分区字段、表的类型（是否是外部表）、表的数据所在目录等；<br>默认存储在自带的derby数据库中，推荐使用MySQL存储Metastore</p><h4 id="3、Hadoop"><a href="#3、Hadoop" class="headerlink" title="3、Hadoop"></a>3、Hadoop</h4><p>使用HDFS进行存储，使用MapReduce进行计算。</p><h4 id="4、驱动器：Driver"><a href="#4、驱动器：Driver" class="headerlink" title="4、驱动器：Driver"></a>4、驱动器：Driver</h4><p><img src="https://jimmy-blog-images.oss-cn-shanghai.aliyuncs.com/img/bigdata/hiveHive%E8%BF%90%E8%A1%8C%E6%9C%BA%E5%88%B6.png"></p><h5 id="1、解析器（SQL-Parser）"><a href="#1、解析器（SQL-Parser）" class="headerlink" title="1、解析器（SQL Parser）"></a>1、解析器（SQL Parser）</h5><p>将SQL字符串转换成抽象语法树AST，这一步一般都用第三方工具库完成，比如antlr；对AST进行语法分析，比如表是否存在、字段是否存在、SQL语义是否有误。</p><h5 id="2、编译器（Physical-Plan）"><a href="#2、编译器（Physical-Plan）" class="headerlink" title="2、编译器（Physical Plan）"></a>2、编译器（Physical Plan）</h5><p>将AST编译生成逻辑执行计划。</p><h5 id="3、优化器（Query-Optimizer）"><a href="#3、优化器（Query-Optimizer）" class="headerlink" title="3、优化器（Query Optimizer）"></a>3、优化器（Query Optimizer）</h5><p>对逻辑执行计划进行优化。</p><h5 id="4、执行器（Execution）"><a href="#4、执行器（Execution）" class="headerlink" title="4、执行器（Execution）"></a>4、执行器（Execution）</h5><p>把逻辑执行计划转换成可以运行的物理计划。对于Hive来说，就是MR/Spark。</p><p>Hive通过给用户提供的一系列交互接口，接收到用户的指令(SQL)，使用自己的Driver，结合元数据(MetaStore)，将这些指令翻译成MapReduce，提交到Hadoop中执行，最后，将执行返回的结果输出到用户交互接口。</p><h3 id="四、Hive与数据库的比较"><a href="#四、Hive与数据库的比较" class="headerlink" title="四、Hive与数据库的比较"></a>四、Hive与数据库的比较</h3><p>由于 Hive 采用了类似SQL 的查询语言 HQL(Hive Query Language)，因此很容易将 Hive 理解为数据库。其实从结构上来看，Hive 和数据库除了拥有类似的查询语言，再无类似之处。本文将从多个方面来阐述 Hive 和数据库的差异。数据库可以用在 Online 的应用中，但是Hive 是为数据仓库而设计的，清楚这一点，有助于从应用角度理解 Hive 的特性。</p><h4 id="1、查询语言"><a href="#1、查询语言" class="headerlink" title="1、查询语言"></a>1、查询语言</h4><p>由于SQL被广泛的应用在数据仓库中，因此，专门针对Hive的特性设计了类SQL的查询语言HQL。熟悉SQL开发的开发者可以很方便的使用Hive进行开发。</p><h4 id="2、数据更新"><a href="#2、数据更新" class="headerlink" title="2、数据更新"></a>2、数据更新</h4><p>由于Hive是针对数据仓库应用设计的，而数据仓库的内容是读多写少的。因此，Hive中不建议对数据的改写，所有的数据都是在加载的时候确定好的。而数据库中的数据通常是需要经常进行修改的，因此可以使用 INSERT INTO …  VALUES 添加数据，使用 UPDATE … SET修改数据。</p><h4 id="3、执行延迟"><a href="#3、执行延迟" class="headerlink" title="3、执行延迟"></a>3、执行延迟</h4><p>Hive 在查询数据的时候，由于没有索引，需要扫描整个表，因此延迟较高。另外一个导致 Hive 执行延迟高的因素是 MapReduce框架。由于MapReduce 本身具有较高的延迟，因此在利用MapReduce 执行Hive查询时，也会有较高的延迟。相对的，数据库的执行延迟较低。当然，这个低是有条件的，即数据规模较小，当数据规模大到超过数据库的处理能力的时候，Hive的并行计算显然能体现出优势。</p><h4 id="4、数据规模"><a href="#4、数据规模" class="headerlink" title="4、数据规模"></a>4、数据规模</h4><p>由于Hive建立在集群上并可以利用MapReduce进行并行计算，因此可以支持很大规模的数据；对应的，数据库可以支持的数据规模较小。</p><h3 id="五、Hive的数据类型"><a href="#五、Hive的数据类型" class="headerlink" title="五、Hive的数据类型"></a>五、Hive的数据类型</h3><h4 id="1、基本数据类型"><a href="#1、基本数据类型" class="headerlink" title="1、基本数据类型"></a>1、基本数据类型</h4><table><thead><tr><th>Hive数据类型</th><th>Java数据类型</th><th>长度</th><th>例子</th></tr></thead><tbody><tr><td>TINYINT</td><td>byte</td><td>1byte有符号整数</td><td>20</td></tr><tr><td>SMALINT</td><td>short</td><td>2byte有符号整数</td><td>20</td></tr><tr><td>INT</td><td>int</td><td>4byte有符号整数</td><td>20</td></tr><tr><td>BIGINT</td><td>long</td><td>8byte有符号整数</td><td>20</td></tr><tr><td>BOOLEAN</td><td>boolean</td><td>布尔类型，true或者false</td><td>TRUE FALSE</td></tr><tr><td>FLOAT</td><td>float</td><td>单精度浮点数</td><td>3.14159</td></tr><tr><td>DOUBLE</td><td>double</td><td>双精度浮点数</td><td>3.14159</td></tr><tr><td>STRING</td><td>string</td><td>字符系列。可以指定字符集。可以使用单引号或者双引号。</td><td>‘now is the time’  “for all good men”</td></tr><tr><td>TIMESTAMP</td><td></td><td>时间类型</td><td></td></tr><tr><td>BINARY</td><td></td><td>字节数组</td><td></td></tr></tbody></table><h4 id="2、集合数据类型"><a href="#2、集合数据类型" class="headerlink" title="2、集合数据类型"></a>2、集合数据类型</h4><table><thead><tr><th>数据类型</th><th>描述</th><th>语法示例</th></tr></thead><tbody><tr><td>STRUCT</td><td>和c语言中的struct类似，都可以通过“点”符号访问元素内容。例如，如果某个列的数据类型是STRUCT{first STRING, last  STRING},那么第1个元素可以通过字段.first来引用。</td><td>struct()  例如struct&lt;street:string, city:string&gt;</td></tr><tr><td>MAP</td><td>MAP是一组键-值对元组集合，使用数组表示法可以访问数据。例如，如果某个列的数据类型是MAP，其中键-&gt;值对是’first’-&gt;’John’和’last’-&gt;’Doe’，那么可以通过字段名[‘last’]获取最后一个元素</td><td>map()  例如map&lt;string, int&gt;</td></tr><tr><td>ARRAY</td><td>数组是一组具有相同类型和名称的变量的集合。这些变量称为数组的元素，每个数组元素都有一个编号，编号从零开始。例如，数组值为[‘John’, ‘Doe’]，那么第2个元素可以通过数组名[1]进行引用。</td><td>Array()  例如array<string></string></td></tr></tbody></table><p>Hive有三种复杂数据类型ARRAY、MAP 和 STRUCT。ARRAY和MAP与Java中的Array和Map类似，而STRUCT与C语言中的Struct类似，它封装了一个命名字段集合，复杂数据类型允许任意层次的嵌套。</p>]]></content>
    
    
    <categories>
      
      <category>hive</category>
      
    </categories>
    
    
    <tags>
      
      <tag>bigdata,hive</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>【大数据】从日志中寻找HDFS的蛛丝马迹（Mysql/Oracle-&gt;Hive-&gt;Hive/Clickhouse）</title>
    <link href="/blog/docs/hadoop-03/bigdata/hadoop/hadoop-03/"/>
    <url>/blog/docs/hadoop-03/bigdata/hadoop/hadoop-03/</url>
    
    <content type="html"><![CDATA[<blockquote><p>汝之观览，吾之幸也！本文主要讲解大数据平台在执行任务调度时，文件是如何进行传递的日志详解，知道后台是<br>如何通过命令将文件进行传输的，这样才能更好的去理解其本质。</p></blockquote><h3 id="一、了解"><a href="#一、了解" class="headerlink" title="一、了解"></a>一、了解</h3>]]></content>
    
    
    <categories>
      
      <category>hadoop</category>
      
    </categories>
    
    
    <tags>
      
      <tag>hadoop</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>【搭建博客】picGo+OSS防盗链配置（不同平台）</title>
    <link href="/blog/docs/hexo-01/hexo/hexo-01/"/>
    <url>/blog/docs/hexo-01/hexo/hexo-01/</url>
    
    <content type="html"><![CDATA[<blockquote><p>汝之观览，吾之幸也！本文主要讲解在使用picGo+OSS使用时会出现防盗链问题</p></blockquote><h3 id="配置OSS的防盗链"><a href="#配置OSS的防盗链" class="headerlink" title="配置OSS的防盗链"></a>配置OSS的防盗链</h3><p>OSS支持对存储空间（Bucket）设置防盗链，即通过对访问来源设置白名单的机制，避免OSS资源被其他人盗用。<br>可参考<a href="https://help.aliyun.com/document_detail/31869.htm?spm=a2c4g.11186623.0.0.c4a5uY7JuY7JLQ">防盗链</a><br>配置目录：<br>登录OSS账号后，查看对象存储OSS产品，Bucket列表-》自建的Bucket-》权限管理-》防盗链<br><img src="https://jimmy-blog-images.oss-cn-shanghai.aliyuncs.com/img/hexo/061E960B-C60D-4938-A203-9CCDC08E1137.png"></p><h4 id="Referer配置规则"><a href="#Referer配置规则" class="headerlink" title="Referer配置规则"></a>Referer配置规则</h4><ul><li>单个Bucket支持配置多个Referer。通过控制台设置Referer时，使用回车作为换行符分隔；通过API设置Referer时，使用英文逗号（,）分隔。</li><li>Referer支持使用通配符星号（*）和问号（?）。</li><li>Referer支持使用反斜线（\）对通配符星号（*）和问号（?）进行转义。</li><li>Referer默认截断QueryString。如有特殊需求，可设置不允许截断QueryString。<h4 id="Referer配置效果"><a href="#Referer配置效果" class="headerlink" title="Referer配置效果"></a>Referer配置效果</h4></li><li>如果Referer白名单为空，则所有的请求都会被允许。</li><li>如果Referer白名单不为空，且不允许空Referer，则只有Referer属于白名单的请求被允许，其他请求（包括Referer为空的请求）会被拒绝。</li><li>如果Referer白名单不为空，但允许空Referer，则Referer为空的请求和符合白名单的请求会被允许，其他请求都会被拒绝。<br><img src="https://jimmy-blog-images.oss-cn-shanghai.aliyuncs.com/img/hexo/6028D17A-D83A-495c-BEEB-F4DA9CA9D600.png"><br>备注：如果前有https的可使用*号代替<h3 id="防盗链错误排查"><a href="#防盗链错误排查" class="headerlink" title="防盗链错误排查"></a>防盗链错误排查</h3>参考<a href="https://help.aliyun.com/document_detail/44198.html">OSS防盗链配置及常见错误排查方法</a></li></ul>]]></content>
    
    
    <categories>
      
      <category>hexo</category>
      
    </categories>
    
    
    <tags>
      
      <tag>hexo</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>【工具】Git-码农“吃饭的碗”要拿好</title>
    <link href="/blog/docs/git-01/tool/git-01/"/>
    <url>/blog/docs/git-01/tool/git-01/</url>
    
    <content type="html"><![CDATA[<blockquote><p>汝之观览，吾之幸也！本文主要讲解的是Git的轻巧使用（创建、下载、上传、更新、回退），我们平常都是通过idea自带的git工具，或者其他工具来拉取提交代码，这里主要用命令行的方式拉取代码，并配合不同场景进行整理命令执行步骤。</p></blockquote><h3 id="一、概念"><a href="#一、概念" class="headerlink" title="一、概念"></a>一、概念</h3><p>是一个开源的分布式版本控制系统，可以有效、高速地处理从很小到非常大的项目版本管理。</p><h3 id="二、安装部署"><a href="#二、安装部署" class="headerlink" title="二、安装部署"></a>二、安装部署</h3><p><a href="https://git-scm.com/">Git官网地址</a><br>可直接在官网上进行下载安装包进行解压安装<br><a href="https://git-scm.com/docs">Git的文档说明</a><br>可参考文档中的命令说明，查看每个命令的基本使用方式</p><h3 id="三、常用命令"><a href="#三、常用命令" class="headerlink" title="三、常用命令"></a>三、常用命令</h3><h4 id="1、git-config"><a href="#1、git-config" class="headerlink" title="1、git config"></a>1、git config</h4><p>配置用户名与邮箱</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs shell">git config --global user.name &#x27;your name&#x27;<br>git config --global user.email &#x27;your email&#x27;<br></code></pre></td></tr></table></figure><h4 id="2、git-version"><a href="#2、git-version" class="headerlink" title="2、git version"></a>2、git version</h4><p>查看git的版本信息</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">git version<br></code></pre></td></tr></table></figure><h4 id="3、git-init"><a href="#3、git-init" class="headerlink" title="3、git init"></a>3、git init</h4><p>初始化git本地仓库</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">git init<br></code></pre></td></tr></table></figure><h4 id="4、git-clone"><a href="#4、git-clone" class="headerlink" title="4、git clone"></a>4、git clone</h4><p>克隆远程分支</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">git clone 代码GitHub/GitLab/Gitee地址<br></code></pre></td></tr></table></figure><h4 id="5、git-add"><a href="#5、git-add" class="headerlink" title="5、git add"></a>5、git add</h4><p>将修改过的文件和新文件添加到暂存区</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">git add *<br></code></pre></td></tr></table></figure><h4 id="6、git-commit"><a href="#6、git-commit" class="headerlink" title="6、git commit"></a>6、git commit</h4><p>提交修改的文件到本地仓库</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">git commit -m &quot;提交注释&quot;<br></code></pre></td></tr></table></figure><h4 id="7、git-status"><a href="#7、git-status" class="headerlink" title="7、git status"></a>7、git status</h4><p>在git add和git commit之间查看状态</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">git status<br></code></pre></td></tr></table></figure><h4 id="8、git-branch"><a href="#8、git-branch" class="headerlink" title="8、git branch"></a>8、git branch</h4><p>查看git全部分支</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">git branch -a<br></code></pre></td></tr></table></figure><p>删除git分支</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">git branch -d 分支名<br></code></pre></td></tr></table></figure><h4 id="9、git-checkout"><a href="#9、git-checkout" class="headerlink" title="9、git checkout"></a>9、git checkout</h4><p>切换到其他分支</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">git checkout 分支名<br></code></pre></td></tr></table></figure><p>从当前分支拆出一个本地分支</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">git checkout -b 分支名<br></code></pre></td></tr></table></figure><h4 id="10、git-remote"><a href="#10、git-remote" class="headerlink" title="10、git remote"></a>10、git remote</h4><p>将本地分支与远程分支关联上</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">git remote add origin 远程分支git地址<br></code></pre></td></tr></table></figure><h4 id="11、git-pull"><a href="#11、git-pull" class="headerlink" title="11、git pull"></a>11、git pull</h4><p>拉取远程分支代码到本地</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs shell">git pull origin 分支名<br>git pull<br></code></pre></td></tr></table></figure><h4 id="12、git-push"><a href="#12、git-push" class="headerlink" title="12、git push"></a>12、git push</h4><p>推送本地代码到远程</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">git push -u origin 分支名<br></code></pre></td></tr></table></figure><h4 id="13、git-fetch"><a href="#13、git-fetch" class="headerlink" title="13、git fetch"></a>13、git fetch</h4><p>查看全部的远程分支</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">git fetch<br></code></pre></td></tr></table></figure><h4 id="14、git-log"><a href="#14、git-log" class="headerlink" title="14、git log"></a>14、git log</h4><p>获取git提交的日志</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs shell">git log --all<br><span class="hljs-meta prompt_"># </span><span class="language-bash">显示<span class="hljs-built_in">log</span>的摘要</span><br>git shortlog<br></code></pre></td></tr></table></figure><h4 id="15、git-merge"><a href="#15、git-merge" class="headerlink" title="15、git merge"></a>15、git merge</h4><p>合并分支代码到本地</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">git merge 分支名<br></code></pre></td></tr></table></figure><h4 id="16、git-tag"><a href="#16、git-tag" class="headerlink" title="16、git tag"></a>16、git tag</h4><p>将分支进行打标签，打标签后的分支不可更改代码，常用于部署生产使用</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">git tag -a 标签名称<br></code></pre></td></tr></table></figure><h4 id="17、git-diff"><a href="#17、git-diff" class="headerlink" title="17、git diff"></a>17、git diff</h4><p>比较两个分支</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">git diff 源分支 目标分支<br></code></pre></td></tr></table></figure><h4 id="18、git-help"><a href="#18、git-help" class="headerlink" title="18、git help"></a>18、git help</h4><p>帮助命令，会列出全部命令的使用方式</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">git help<br></code></pre></td></tr></table></figure><p>参考文章：<a href="https://zhuanlan.zhihu.com/p/402325945">最常用的 35 个 Git 命令</a></p><h3 id="四、其他场景下的命令集合"><a href="#四、其他场景下的命令集合" class="headerlink" title="四、其他场景下的命令集合"></a>四、其他场景下的命令集合</h3><h4 id="1、更改上次提交的注释"><a href="#1、更改上次提交的注释" class="headerlink" title="1、更改上次提交的注释"></a>1、更改上次提交的注释</h4><p>1、更改上次的注释</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">git commit --amend -m &quot;新的修改提交信息&quot;<br></code></pre></td></tr></table></figure><h4 id="2、更改远程上次提交的注释"><a href="#2、更改远程上次提交的注释" class="headerlink" title="2、更改远程上次提交的注释"></a>2、更改远程上次提交的注释</h4><p>1、查看提交日志,获取最后一次提交的日志id</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">git log<br></code></pre></td></tr></table></figure><p>2、本地回退到上次提交的位置</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">git reset --hard 80ab172a（最后一次提交的日志id）<br></code></pre></td></tr></table></figure><p>3、远程回退（本地回退后再远程回退）</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">git push origin HEAD --force<br></code></pre></td></tr></table></figure><p>4、重新提交注释</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">git commit --amend -m &quot;新的修改提交信息&quot;<br></code></pre></td></tr></table></figure><p>5、提交到远程</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">git push<br></code></pre></td></tr></table></figure><h4 id="3、切主分支为本地分支开发，本地分支上传到远程（远程没有本地分支）"><a href="#3、切主分支为本地分支开发，本地分支上传到远程（远程没有本地分支）" class="headerlink" title="3、切主分支为本地分支开发，本地分支上传到远程（远程没有本地分支）"></a>3、切主分支为本地分支开发，本地分支上传到远程（远程没有本地分支）</h4><p>1、在本地创建本地分支</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">git checkout -b develop_01<br></code></pre></td></tr></table></figure><p>2、提交本地分支代码</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">git commit -m &quot;提交信息&quot;<br></code></pre></td></tr></table></figure><p>3、将本地分支提交到远程</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">git push origin develop_01:develop_01<br></code></pre></td></tr></table></figure><h4 id="4、切主分支为本地分支开发，本地分支上传到远程（远程已有本地分支）"><a href="#4、切主分支为本地分支开发，本地分支上传到远程（远程已有本地分支）" class="headerlink" title="4、切主分支为本地分支开发，本地分支上传到远程（远程已有本地分支）"></a>4、切主分支为本地分支开发，本地分支上传到远程（远程已有本地分支）</h4><p>1、查看远程分支</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs shell">git fetch<br>git branch -a<br></code></pre></td></tr></table></figure><p>2、切换分支</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">git checkout 1.0_maintain_plan<br></code></pre></td></tr></table></figure><p>3、拉取远程分支</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs shell">git pull origin 1.0_maintain_plan<br><br>合并其他分支到当前分支<br>git merge 1.0_vms_tamplate<br></code></pre></td></tr></table></figure><p>4、提交本地分支</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">git commit -m &quot;提交信息&quot;<br></code></pre></td></tr></table></figure><p>5、将本地分支提交到远程</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">git push origin 1.0_maintain_plan:1.0_maintain_plan<br></code></pre></td></tr></table></figure><h4 id="5、远程分支合并"><a href="#5、远程分支合并" class="headerlink" title="5、远程分支合并"></a>5、远程分支合并</h4><p>1、查看远程分支</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs shell">git fetch<br>git branch -a<br></code></pre></td></tr></table></figure><p>2、切换分支</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">git checkout 1.0_maintain_plan<br></code></pre></td></tr></table></figure><p>3、拉取远程分支</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs shell">git pull origin 1.0_maintain_plan<br><br>合并其他分支到远程分支<br>git merge 1.0_vms_tamplate<br></code></pre></td></tr></table></figure><h4 id="6、删除原有git新建新的git关联"><a href="#6、删除原有git新建新的git关联" class="headerlink" title="6、删除原有git新建新的git关联"></a>6、删除原有git新建新的git关联</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs shell">删除原有的git文件夹<br>rm -rf .git<br><br>初始化git<br>git init<br><br>新增git，提交到缓存<br>git add .<br><br>提交本地代码<br>git commit -m “提交初始化版本”<br><br>与远程关联<br>git remote add origin git@gitee.com:xxx.git<br><br>提交到远程<br>git push origin master<br><br>设置origin为默认主机，后续push后可不加参数<br>git push -u origin master<br><br></code></pre></td></tr></table></figure><h4 id="7、git-push-提交“DeployKey-does-not-support-push-code”-错误"><a href="#7、git-push-提交“DeployKey-does-not-support-push-code”-错误" class="headerlink" title="7、git push 提交“DeployKey does not support push code” 错误"></a>7、git push 提交“DeployKey does not support push code” 错误</h4><p>错误原因：未在Gitee上注册公钥<br>解决方案：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs shell">在本地仓库文件夹下生成密钥<br>ssh-keygen -t rsa -C git@gitee.com:xxx.git<br><br>获取生成的公钥<br>cat ~/.ssh/id_rsa.pub<br><br>复制打印的公钥，在Gitee 设置-》安全设置-》SSH公钥设置中添加公钥<br>是以“ssh-rsa” 开头<br><br>再次提交本地仓库到远程<br>git push origin master<br><br></code></pre></td></tr></table></figure><h4 id="8、git-pull-拉取“fatal-refusing-to-merge-unrelated-histories”-错误"><a href="#8、git-pull-拉取“fatal-refusing-to-merge-unrelated-histories”-错误" class="headerlink" title="8、git pull 拉取“fatal: refusing to merge unrelated histories” 错误"></a>8、git pull 拉取“fatal: refusing to merge unrelated histories” 错误</h4><p>错误原因：因为本地仓库与远程仓库有冲突<br>解决方案：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs shell">允许手动合并冲突<br><br>git pull origin master --allow-unrelated-histories<br>或者<br>git pull --allow-unrelated-histories<br><br>再手动修改冲突的文件，再次提交即可。<br></code></pre></td></tr></table></figure><h3 id="五、git工具"><a href="#五、git工具" class="headerlink" title="五、git工具"></a>五、git工具</h3><p><a href="https://www.sourcetreeapp.com/">sourcetree工具</a></p>]]></content>
    
    
    <categories>
      
      <category>git</category>
      
    </categories>
    
    
    <tags>
      
      <tag>tool,git</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>【算法】01-算法解剖学-二分查找</title>
    <link href="/blog/docs/letcode-00/bigdata/algorithm/letcode-00/"/>
    <url>/blog/docs/letcode-00/bigdata/algorithm/letcode-00/</url>
    
    <content type="html"><![CDATA[<blockquote><p>汝之观览，吾之幸也！本系列主要讲解的是算法知识，从算法基本概念，利用图解的方式更好的认识算法，再通过letcode算法题<br>进行进一步的巩固。刷题三步走（1、掌握一门基本的编程语言；2、深入理解基础的数据结构；3、按照特定模块进行系统性刷题）</p></blockquote><h3 id="一、定义"><a href="#一、定义" class="headerlink" title="一、定义"></a>一、定义</h3><p>二分查找是一种算法，其输入是一个有序的元素列表。如果要查找的元素包含在列表中，二分查找返回其位置；否则返回null。</p><h3 id="二、数据结构"><a href="#二、数据结构" class="headerlink" title="二、数据结构"></a>二、数据结构</h3><p>一个有序的元素列表</p><h3 id="三、算法图解"><a href="#三、算法图解" class="headerlink" title="三、算法图解"></a>三、算法图解</h3><p>如果想从1~24000个数字中查找到一个数字，需要多少步？<br>按照从1开始的话，那么可能需要24000次，但是使用二分查询最多需要$\log_2^{24000}$=18步。这就是二分查询的好处。<br><img src="https://jimmy-blog-images.oss-cn-shanghai.aliyuncs.com/img/letcode24000%E9%9C%80%E8%A6%81%E5%87%A0%E6%AD%A5.png"><br>对数是幂运算的逆运算<br><img src="https://jimmy-blog-images.oss-cn-shanghai.aliyuncs.com/img/letcode%E5%AF%B9%E6%95%B0.png"><br>大O表示法是一种特殊的表示法，指出了算法的速度有多快。<br><img src="https://jimmy-blog-images.oss-cn-shanghai.aliyuncs.com/img/letcode%E5%A4%A7O%E8%A1%A8%E7%A4%BA%E6%B3%95.png"><br>不同的算法所展示的时间长度<br><img src="https://jimmy-blog-images.oss-cn-shanghai.aliyuncs.com/img/letcode%E4%B8%8D%E5%90%8C%E6%8A%98%E6%A0%BC%E5%AD%90%E7%9A%84%E9%80%9F%E5%BA%A6.png"></p><h3 id="四、Java实例"><a href="#四、Java实例" class="headerlink" title="四、Java实例"></a>四、Java实例</h3><p>可参考Java jdk中的Arrays.binarySearch方法</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-type">int</span>[] a = <span class="hljs-keyword">new</span> <span class="hljs-title class_">int</span>[<span class="hljs-number">100</span>];<br><span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; a.length; i++) &#123;<br>    a[i] = i + <span class="hljs-number">1</span>;<br>&#125;<br><span class="hljs-type">int</span> key=<span class="hljs-number">45</span>;<br><span class="hljs-comment">// 调用Arrays工具类二分查找方法</span><br>Arrays.binarySearch(a,key);<br></code></pre></td></tr></table></figure><h3 id="五、LeetCode中的二分查找"><a href="#五、LeetCode中的二分查找" class="headerlink" title="五、LeetCode中的二分查找"></a>五、LeetCode中的二分查找</h3><p>题目数：<a href="https://leetcode.cn/problems/binary-search/">704. 二分查找</a></p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs text">给定一个 n 个元素有序的（升序）整型数组 nums 和一个目标值 target  ，写一个函数搜索 nums 中的 target，如果目标值存在返回下标，否则返回 -1。<br></code></pre></td></tr></table></figure><p>示例：</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs text">输入: nums = [-1,0,3,5,9,12], target = 9<br>输出: 4<br>解释: 9 出现在 nums 中并且下标为 4<br></code></pre></td></tr></table></figure><p>解题思路：</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs text">1、初始化左边与右边的索引值,设置left=0,right=nums.length-1<br>2、判断当前左边与右边的索引值大小,循环判断 left&lt;= right<br>3、 获取target中间值的位置,根据中间值的索引值得到对应的值<br>4、判断中间值与target比较<br>4.1、如果target&gt;midValue，表示target在中间值的右边，则需要更改左边的索引值<br>4.2、如果target&lt;midValue，表示target在中间值的左边，则需要更改右边的索引值<br>4.3、只有target=midValue，输出得到的索引值<br>5、如果left &gt; right，返回-1<br></code></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">search</span><span class="hljs-params">(<span class="hljs-type">int</span>[] nums, <span class="hljs-type">int</span> target)</span> &#123;<br>    <span class="hljs-comment">// 初始化左边与右边的索引值</span><br>    <span class="hljs-type">int</span> <span class="hljs-variable">leftIndex</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;<br>    <span class="hljs-type">int</span> <span class="hljs-variable">rightIndex</span> <span class="hljs-operator">=</span> nums.length-<span class="hljs-number">1</span>;<br>    <span class="hljs-comment">// 判断当前左边与右边的索引值大小</span><br>    <span class="hljs-keyword">while</span>(leftIndex &lt;= rightIndex)&#123;<br>        <span class="hljs-comment">// 获取target中间值的位置</span><br>        <span class="hljs-type">int</span> <span class="hljs-variable">midIndex</span> <span class="hljs-operator">=</span> (leftIndex+rightIndex)&gt;&gt;&gt;<span class="hljs-number">1</span>;<br>        <span class="hljs-comment">// 根据中间值的索引值得到对应的值</span><br>        <span class="hljs-type">int</span> midValue= nums[midIndex];<br>        <span class="hljs-comment">// 判断中间值与target比较</span><br>        <span class="hljs-keyword">if</span>(target&gt;midValue)&#123;<br>            <span class="hljs-comment">// 如果target&gt;midValue，表示target在中间值的右边，则需要更改左边的索引值</span><br>            leftIndex = midIndex+<span class="hljs-number">1</span>;<br>        &#125;<span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(target&lt;midValue)&#123;<br>            <span class="hljs-comment">// 如果target&lt;midValue，表示target在中间值的左边，则需要更改右边的索引值</span><br>            rightIndex= midIndex-<span class="hljs-number">1</span>;<br>        &#125;<span class="hljs-keyword">else</span>&#123;<br>            <span class="hljs-comment">// 只有target=midValue，输出得到的索引值</span><br>            <span class="hljs-keyword">return</span>  midIndex;<br>        &#125;<br>    &#125;<br>    <span class="hljs-keyword">return</span>  -<span class="hljs-number">1</span>;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="六、代码随想录中的二分查找"><a href="#六、代码随想录中的二分查找" class="headerlink" title="六、代码随想录中的二分查找"></a>六、代码随想录中的二分查找</h3><p><a href="https://www.bilibili.com/video/BV1fA4y1o715/?spm_id_from=333.999.0.0&vd_source=a66f6271f114d3ff79cab39299ff1ffb">代码随想录-二分查找视频</a></p>]]></content>
    
    
    <categories>
      
      <category>letcode</category>
      
    </categories>
    
    
    <tags>
      
      <tag>letcode,算法</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>【工具】Datax的实用案例（HDFS与其他数据源传递）</title>
    <link href="/blog/docs/datax-02/bigdata/datax/datax-02/"/>
    <url>/blog/docs/datax-02/bigdata/datax/datax-02/</url>
    
    <content type="html"><![CDATA[<blockquote><p>汝之观览，吾之幸也！本文主要讲解Datax工具中的实例，HDFS与ftp、hdfs与clickhouse、hdfs与mysql等间的数据传输配置实例，最后会给出war包，代码中将json数据使用shell脚本进行定时处理，脱离手动执行json。</p></blockquote>]]></content>
    
    
    <categories>
      
      <category>datax</category>
      
    </categories>
    
    
    <tags>
      
      <tag>bigdata,datax</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>【工具】Datax的基本概念（初识ETL工具）</title>
    <link href="/blog/docs/datax-01/bigdata/datax/datax-01/"/>
    <url>/blog/docs/datax-01/bigdata/datax/datax-01/</url>
    
    <content type="html"><![CDATA[<blockquote><p>汝之观览，吾之幸也！本文主要讲解Datax工具的概念，架构，以及部署使用说明</p></blockquote><h3 id="一、基础引导"><a href="#一、基础引导" class="headerlink" title="一、基础引导"></a>一、基础引导</h3><h4 id="1、什么是ETL"><a href="#1、什么是ETL" class="headerlink" title="1、什么是ETL"></a>1、什么是ETL</h4><p>ETL全称为Extract Transform Load，是一种数据仓库技术，其中三个英文单词分别对应三个数据处理操作的中文名称：抽取（Extract）、转换（Transform）以及加载（Load）。因此，ETL的实际含义是将数据经过抽取、清洗转换之后加载到数据仓库的过程。<br><img src="https://jimmy-blog-images.oss-cn-shanghai.aliyuncs.com/img/bigdata/datax/ETL%E7%9A%84%E6%9E%B6%E6%9E%84.png"></p><h4 id="2、Datax"><a href="#2、Datax" class="headerlink" title="2、Datax"></a>2、Datax</h4><p>DataX是由阿里巴巴研发并开源的一个异构数据源离线同步工具，技术人员能够通过DataX实现不同数据源之间的同步。<br>这里所指的数据源既包括关系型数据库、NoSQL数据存储、无结构化数据存储、时间序列数据库，同时也包含了阿里的云数仓数据存储。<br>DataX是阿里云DataWorks数据集成的开源版本，在阿里巴巴集团内被广泛使用的离线数据同步工具/平台。DataX实现了包括MySQL、Oracle、OceanBase、SqlServer、Postgre、HDFS、Hive、ADS、HBase、TableStore(OTS)、MaxCompute(ODPS)、Hologres、DRDS等各种异构数据源之间高效的数据同步功能<br><img src="https://jimmy-blog-images.oss-cn-shanghai.aliyuncs.com/img/bigdata/datax/datax%E6%9E%B6%E6%9E%84.png"></p><h3 id="二、Datax的架构"><a href="#二、Datax的架构" class="headerlink" title="二、Datax的架构"></a>二、Datax的架构</h3><p>DataX这套工具采用的是离线数据同步的方式，其框架为Framework + plugin。<br>数据同步的步骤即是将数据的读取、写入操作抽象成为由Reader/Writer插件进行处理步骤，最后纳入到整个同步框架中。</p><ul><li>Reader：Reader为数据采集模块，负责采集数据源的数据，将数据发送给Framework。</li><li>Writer： Writer为数据写入模块，负责不断向Framework取数据，并将数据写入到目的端。</li><li>Framework：Framework用于连接reader和writer，作为两者的数据传输通道，并处理缓冲，流控，并发，数据转换等核心技术问题。<br><img src="https://jimmy-blog-images.oss-cn-shanghai.aliyuncs.com/img/bigdata/datax.png"><h4 id="1、Job"><a href="#1、Job" class="headerlink" title="1、Job"></a>1、Job</h4></li><li>Job：运行在JobContainer容器中，这是所有任务的Master，负责初始化、分割、调度、运行、回收、监视和报告，但是它不进行实际的数据同步操作。</li><li>JobContainer：Job执行器，它负责Job全局分割、调度、前置语句和后置语句等工作。在Yarn里与JobTracker相似。<br>Job是DataX用来描述从一个源到目标端的同步作业，它是DataX数据同步的最小业务单位。例如：将一张MySQL表与ODPS(OpenDataProcessingService)的一个表的特定分区进行同步。<h4 id="2、Task"><a href="#2、Task" class="headerlink" title="2、Task"></a>2、Task</h4></li><li>Task：将Job分割成最小化的执行单元。例如：阅读一个包含1024个Task的MySQL分类表的Job，将其分为1024个Task，并以数个并行执行。</li><li>TaskGroup：描述了一组任务集。执行同一TaskGroupContainer的Task集合称为TaskGroup。</li><li>TaskGroupContaine：负责执行一组任务，就像Yarn中的TaskTracker那样。<br>简单地说，Job拆分为Task，在框架所提供的容器中分别执行，插件仅需实现Job和Task逻辑<h4 id="3、Channel"><a href="#3、Channel" class="headerlink" title="3、Channel"></a>3、Channel</h4>DataX 会单独启动一条线程运行运行一个 Task，而 Task 会持有一个 Channel，用作 Reader 与 Writer 的数据传输媒介，DataX 的数据流向都是按照 Reader—&gt;Channel—&gt;Writer 的方向流转。<h4 id="4、Transformer"><a href="#4、Transformer" class="headerlink" title="4、Transformer"></a>4、Transformer</h4>DataX 的 transformer 模式同时还提供了强大的数据转换功能，DataX 默认提供了丰富的数据转换实现类，用户还可以根据项目自身需求，扩展数据转换。<br><img src="https://jimmy-blog-images.oss-cn-shanghai.aliyuncs.com/img/bigdata/datax/datax%E4%BD%BF%E7%94%A8.png"><h3 id="三、下载部署"><a href="#三、下载部署" class="headerlink" title="三、下载部署"></a>三、下载部署</h3><h4 id="1、方法一"><a href="#1、方法一" class="headerlink" title="1、方法一"></a>1、方法一</h4>直接下载DataX工具包：<a href="https://datax-opensource.oss-cn-hangzhou.aliyuncs.com/20220530/datax.tar.gz">datax压缩包</a><br>下载后解压至本地某个目录，DataX即安装完成<br>进入bin目录，即可运行同步作业：<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta prompt_">$ </span><span class="language-bash"><span class="hljs-built_in">cd</span>  &#123;YOUR_DATAX_HOME&#125;/bin</span><br><span class="hljs-meta prompt_">$ </span><span class="language-bash">python datax.py &#123;YOUR_JOB.json&#125;</span><br></code></pre></td></tr></table></figure>自检脚本：python {YOUR_DATAX_HOME}/bin/datax.py {YOUR_DATAX_HOME}/job/job.json<h4 id="2、方法二"><a href="#2、方法二" class="headerlink" title="2、方法二"></a>2、方法二</h4>下载DataX源码，自主编译：<br><a href="https://github.com/alibaba/DataX">datax源码地址</a><br><img src="https://jimmy-blog-images.oss-cn-shanghai.aliyuncs.com/img/bigdata/datax/%E6%BA%90%E7%A0%81%E7%9B%AE%E5%BD%95.png"><br>下载压缩包后解压后进行maven编辑<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta prompt_">$ </span><span class="language-bash"><span class="hljs-built_in">cd</span> &#123;DataX_source_code_home&#125;</span><br><span class="hljs-meta prompt_">$ </span><span class="language-bash">mvn -U clean package assembly:assembly -Dmaven.test.skip=<span class="hljs-literal">true</span></span><br></code></pre></td></tr></table></figure>打包成功，日志显示如下：<br><img src="https://jimmy-blog-images.oss-cn-shanghai.aliyuncs.com/img/bigdata/datax/%E6%89%93%E5%8C%85.png"><br>打包成功后的DataX包位于{DataX_source_code_home}/target/datax/datax/，结构如下：<br><img src="https://jimmy-blog-images.oss-cn-shanghai.aliyuncs.com/img/bigdata/datax/jar%E7%9B%AE%E5%BD%95.png"><h3 id="四、其他"><a href="#四、其他" class="headerlink" title="四、其他"></a>四、其他</h3><h4 id="1、修改源码"><a href="#1、修改源码" class="headerlink" title="1、修改源码"></a>1、修改源码</h4>因为有些数据源同步可能会遇到格式不匹配的问题，这时可以对相应的reader与writer做修改，然后maven编译即可。后续会更新具体的源码修改例子<h4 id="2、gitee地址"><a href="#2、gitee地址" class="headerlink" title="2、gitee地址"></a>2、gitee地址</h4>因为github地址国内会有反应慢连不上的问题，提供gitee地址<br><a href="https://gitee.com/mirrors/DataX#https://gitee.com/link?target=https%3A%2F%2Fgithub.com%2Falibaba%2FDataX%2Fblob%2Fmaster%2FuserGuid.md">Datax的gitee地址</a><h4 id="3、参考网址"><a href="#3、参考网址" class="headerlink" title="3、参考网址"></a>3、参考网址</h4><a href="https://www.shulanxt.com/datawarehouse/datax/etl">ETL工具-Datax</a></li></ul>]]></content>
    
    
    <categories>
      
      <category>datax</category>
      
    </categories>
    
    
    <tags>
      
      <tag>bigdata,datax</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>【数据库】Mysql、Oracle的年、月、日sql脚本</title>
    <link href="/blog/docs/sql-01/database/sql-01/"/>
    <url>/blog/docs/sql-01/database/sql-01/</url>
    
    <content type="html"><![CDATA[<blockquote><p>汝之观览，吾之幸也！本文主要讲解Mysql、Oracle的年、月、日sql脚本</p></blockquote><h3 id="一、Mysql"><a href="#一、Mysql" class="headerlink" title="一、Mysql"></a>一、Mysql</h3><h4 id="1、当月数据"><a href="#1、当月数据" class="headerlink" title="1、当月数据"></a>1、当月数据</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">select</span> a1.dayDate,<span class="hljs-keyword">convert</span>(<span class="hljs-built_in">SUBSTRING</span>(a1.dayDate,<span class="hljs-number">12</span>,<span class="hljs-number">13</span>),<span class="hljs-type">DECIMAL</span>(<span class="hljs-number">10</span>,<span class="hljs-number">0</span>)) dayHour <span class="hljs-keyword">from</span>(<br><span class="hljs-keyword">select</span><br>DATE_FORMAT(DATE_ADD(curdate(),<span class="hljs-type">interval</span> <span class="hljs-operator">-</span><span class="hljs-keyword">day</span>(curdate())<span class="hljs-operator">+</span>ac <span class="hljs-keyword">day</span>), <span class="hljs-string">&#x27;%Y-%m-%d&#x27;</span>) <span class="hljs-keyword">as</span> dayDate<br><span class="hljs-keyword">FROM</span> (<br><span class="hljs-keyword">SELECT</span> <span class="hljs-variable">@ai</span>:<span class="hljs-operator">=</span><span class="hljs-variable">@ai</span><span class="hljs-operator">+</span><span class="hljs-number">1</span> <span class="hljs-keyword">as</span> ac <span class="hljs-keyword">from</span><br>(<span class="hljs-keyword">SELECT</span> <span class="hljs-number">1</span> <span class="hljs-keyword">UNION</span> <span class="hljs-keyword">SELECT</span> <span class="hljs-number">2</span> <span class="hljs-keyword">UNION</span> <span class="hljs-keyword">SELECT</span> <span class="hljs-number">3</span> <span class="hljs-keyword">UNION</span> <span class="hljs-keyword">SELECT</span> <span class="hljs-number">4</span> <span class="hljs-keyword">UNION</span> <span class="hljs-keyword">SELECT</span> <span class="hljs-number">5</span> <span class="hljs-keyword">UNION</span> <span class="hljs-keyword">SELECT</span> <span class="hljs-number">6</span>) ac1,<br>(<span class="hljs-keyword">SELECT</span> <span class="hljs-number">1</span> <span class="hljs-keyword">UNION</span> <span class="hljs-keyword">SELECT</span> <span class="hljs-number">2</span> <span class="hljs-keyword">UNION</span> <span class="hljs-keyword">SELECT</span> <span class="hljs-number">3</span> <span class="hljs-keyword">UNION</span> <span class="hljs-keyword">SELECT</span> <span class="hljs-number">4</span> <span class="hljs-keyword">UNION</span> <span class="hljs-keyword">SELECT</span> <span class="hljs-number">5</span> <span class="hljs-keyword">UNION</span> <span class="hljs-keyword">SELECT</span> <span class="hljs-number">6</span>) ac2,<br>(<span class="hljs-keyword">SELECT</span> <span class="hljs-variable">@ai</span>:<span class="hljs-operator">=</span><span class="hljs-number">-1</span>) xc0<br>) ad)a1<br><span class="hljs-keyword">where</span> DATE_FORMAT(a1.dayDate,<span class="hljs-string">&#x27;%Y-%m-%d&#x27;</span>)<br><span class="hljs-keyword">between</span> DATE_FORMAT(DATE_ADD(curdate(),<span class="hljs-type">interval</span> <span class="hljs-operator">-</span><span class="hljs-keyword">day</span>(curdate())<span class="hljs-operator">+</span><span class="hljs-number">1</span> <span class="hljs-keyword">day</span>),<span class="hljs-string">&#x27;%Y-%m-%d&#x27;</span>) <span class="hljs-keyword">and</span> DATE_FORMAT( last_day(curdate()),<span class="hljs-string">&#x27;%Y-%m-%d&#x27;</span>);<br></code></pre></td></tr></table></figure><h4 id="2、当天24小时数据"><a href="#2、当天24小时数据" class="headerlink" title="2、当天24小时数据"></a>2、当天24小时数据</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">select</span> DATE_FORMAT(DATE_SUB(DATE_FORMAT(now(),<span class="hljs-string">&#x27;%Y-%m-%d&#x27;</span>),<span class="hljs-type">INTERVAL</span> <span class="hljs-operator">-</span>ac<span class="hljs-operator">+</span><span class="hljs-number">1</span> <span class="hljs-keyword">HOUR</span> ) ,<span class="hljs-string">&#x27;%Y-%m-%d %H&#x27;</span>) dayDate<br><span class="hljs-keyword">FROM</span> (<br><span class="hljs-keyword">SELECT</span> <span class="hljs-variable">@ai</span>:<span class="hljs-operator">=</span><span class="hljs-variable">@ai</span><span class="hljs-operator">+</span><span class="hljs-number">1</span> <span class="hljs-keyword">as</span> ac <span class="hljs-keyword">from</span><br>(<span class="hljs-keyword">SELECT</span> <span class="hljs-number">1</span> <span class="hljs-keyword">UNION</span> <span class="hljs-keyword">SELECT</span> <span class="hljs-number">2</span> <span class="hljs-keyword">UNION</span> <span class="hljs-keyword">SELECT</span> <span class="hljs-number">3</span> <span class="hljs-keyword">UNION</span> <span class="hljs-keyword">SELECT</span> <span class="hljs-number">4</span>) ac1,<br>(<span class="hljs-keyword">SELECT</span> <span class="hljs-number">1</span> <span class="hljs-keyword">UNION</span> <span class="hljs-keyword">SELECT</span> <span class="hljs-number">2</span> <span class="hljs-keyword">UNION</span> <span class="hljs-keyword">SELECT</span> <span class="hljs-number">3</span> <span class="hljs-keyword">UNION</span> <span class="hljs-keyword">SELECT</span> <span class="hljs-number">4</span> <span class="hljs-keyword">UNION</span> <span class="hljs-keyword">SELECT</span> <span class="hljs-number">5</span> <span class="hljs-keyword">UNION</span> <span class="hljs-keyword">SELECT</span> <span class="hljs-number">6</span>) ac2,<br>(<span class="hljs-keyword">SELECT</span> <span class="hljs-variable">@ai</span>:<span class="hljs-operator">=</span><span class="hljs-number">0</span>) xc0<br>) ad;<br></code></pre></td></tr></table></figure><h4 id="3、当年12个月数据"><a href="#3、当年12个月数据" class="headerlink" title="3、当年12个月数据"></a>3、当年12个月数据</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">select</span> DATE_FORMAT(DATE_SUB(CONCAT(<span class="hljs-keyword">YEAR</span>(NOW()), <span class="hljs-string">&#x27;-01-01&#x27;</span>), <span class="hljs-type">INTERVAL</span> <span class="hljs-operator">-</span>ac <span class="hljs-keyword">MONTH</span> ) ,<span class="hljs-string">&#x27;%Y-%m&#x27;</span>) dayDate<br><span class="hljs-keyword">FROM</span> (<br><span class="hljs-keyword">SELECT</span> <span class="hljs-variable">@ai</span>:<span class="hljs-operator">=</span><span class="hljs-variable">@ai</span><span class="hljs-operator">+</span><span class="hljs-number">1</span> <span class="hljs-keyword">as</span> ac <span class="hljs-keyword">from</span><br>(<span class="hljs-keyword">SELECT</span> <span class="hljs-number">1</span> <span class="hljs-keyword">UNION</span> <span class="hljs-keyword">SELECT</span> <span class="hljs-number">2</span> <span class="hljs-keyword">UNION</span> <span class="hljs-keyword">SELECT</span> <span class="hljs-number">3</span> ) ac1,<br>(<span class="hljs-keyword">SELECT</span> <span class="hljs-number">1</span> <span class="hljs-keyword">UNION</span> <span class="hljs-keyword">SELECT</span> <span class="hljs-number">2</span> <span class="hljs-keyword">UNION</span> <span class="hljs-keyword">SELECT</span> <span class="hljs-number">3</span> <span class="hljs-keyword">UNION</span> <span class="hljs-keyword">SELECT</span> <span class="hljs-number">4</span>) ac2,<br>(<span class="hljs-keyword">SELECT</span> <span class="hljs-variable">@ai</span>:<span class="hljs-operator">=</span><span class="hljs-number">-1</span>) xc0<br>) ad;<br></code></pre></td></tr></table></figure><h4 id="4、近几天"><a href="#4、近几天" class="headerlink" title="4、近几天"></a>4、近几天</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">select</span><br>DATE_FORMAT(DATE_ADD(curdate(),<span class="hljs-type">interval</span> <span class="hljs-operator">-</span>ac <span class="hljs-keyword">day</span>), <span class="hljs-string">&#x27;%Y-%m-%d&#x27;</span>) <span class="hljs-keyword">as</span> dayDate<br><span class="hljs-keyword">FROM</span> (<br><span class="hljs-keyword">SELECT</span> <span class="hljs-variable">@ai</span>:<span class="hljs-operator">=</span><span class="hljs-variable">@ai</span><span class="hljs-operator">+</span><span class="hljs-number">1</span> <span class="hljs-keyword">as</span> ac <span class="hljs-keyword">from</span><br>(<span class="hljs-keyword">SELECT</span> <span class="hljs-number">1</span> <span class="hljs-keyword">UNION</span> <span class="hljs-keyword">SELECT</span> <span class="hljs-number">2</span> ) ac1,<br>(<span class="hljs-keyword">SELECT</span> <span class="hljs-number">1</span> <span class="hljs-keyword">UNION</span> <span class="hljs-keyword">SELECT</span> <span class="hljs-number">2</span> <span class="hljs-keyword">UNION</span> <span class="hljs-keyword">SELECT</span> <span class="hljs-number">3</span> <span class="hljs-keyword">UNION</span> <span class="hljs-keyword">SELECT</span> <span class="hljs-number">4</span> <span class="hljs-keyword">UNION</span> <span class="hljs-keyword">SELECT</span> <span class="hljs-number">5</span>) ac2,<br>(<span class="hljs-keyword">SELECT</span> <span class="hljs-variable">@ai</span>:<span class="hljs-operator">=</span><span class="hljs-number">-1</span>) xc0<br>) ad limit <span class="hljs-number">7</span>;<br></code></pre></td></tr></table></figure><h4 id="5、字符集问题"><a href="#5、字符集问题" class="headerlink" title="5、字符集问题"></a>5、字符集问题</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs sql"># 将traff_biz库中的表的字符集与字符规则更新为 utf8mb4、utf8mb4_general_ci<br><span class="hljs-keyword">SELECT</span><br>CONCAT(&quot;ALTER TABLE `&quot;,TABLE_NAME,<br>&quot;` CONVERT TO CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci;&quot;)  <span class="hljs-keyword">AS</span> target_tables <br><span class="hljs-keyword">FROM</span> INFORMATION_SCHEMA.TABLES<br><span class="hljs-keyword">WHERE</span> TABLE_SCHEMA<span class="hljs-operator">=</span>&quot;traff_biz&quot; <span class="hljs-keyword">AND</span> TABLE_TYPE<span class="hljs-operator">=</span>&quot;BASE TABLE&quot;;<br><br># 将traff_biz库中的表的全部字段字符集与字符规则更新为 utf8mb4、utf8mb4_general_ci<br><span class="hljs-keyword">SELECT</span> CONCAT(<span class="hljs-string">&#x27;ALTER TABLE `&#x27;</span>, table_name, <span class="hljs-string">&#x27;` MODIFY `&#x27;</span>, column_name, <span class="hljs-string">&#x27;` &#x27;</span>, DATA_TYPE, <br>        <span class="hljs-string">&#x27;(&#x27;</span>, CHARACTER_MAXIMUM_LENGTH, <span class="hljs-string">&#x27;) CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci&#x27;</span>, <br>        (<span class="hljs-keyword">CASE</span> <span class="hljs-keyword">WHEN</span> IS_NULLABLE <span class="hljs-operator">=</span> <span class="hljs-string">&#x27;NO&#x27;</span> <span class="hljs-keyword">THEN</span> <span class="hljs-string">&#x27; NOT NULL&#x27;</span> <span class="hljs-keyword">ELSE</span> <span class="hljs-string">&#x27;&#x27;</span> <span class="hljs-keyword">END</span>),<br>        (<span class="hljs-keyword">case</span> <span class="hljs-keyword">when</span> IFNULL(column_comment,<span class="hljs-string">&#x27;&#x27;</span>)<span class="hljs-operator">=</span><span class="hljs-string">&#x27;&#x27;</span> <span class="hljs-keyword">then</span> <span class="hljs-string">&#x27;&#x27;</span> <span class="hljs-keyword">else</span> concat(<span class="hljs-string">&#x27; COMMENT \&#x27;&#x27; , column_comment ,&#x27;</span>\<span class="hljs-string">&#x27;&#x27;</span>) <span class="hljs-keyword">end</span>),<br>        <span class="hljs-string">&#x27;;&#x27;</span>) <span class="hljs-keyword">as</span> `<span class="hljs-keyword">sql</span>`<br><span class="hljs-keyword">FROM</span> information_schema.COLUMNS<br><span class="hljs-keyword">WHERE</span> <span class="hljs-number">1</span><span class="hljs-operator">=</span><span class="hljs-number">1</span><br>    <span class="hljs-keyword">and</span> TABLE_SCHEMA <span class="hljs-operator">=</span> <span class="hljs-string">&#x27;traff_biz&#x27;</span> #要修改的数据库名称<br>#<span class="hljs-keyword">and</span> TABLE_NAME<span class="hljs-operator">=</span><span class="hljs-string">&#x27;table_name&#x27;</span>  # 要修改的指定数据表名称<br>    #<span class="hljs-keyword">and</span> DATA_TYPE <span class="hljs-operator">=</span> <span class="hljs-string">&#x27;varchar&#x27;</span> # 要修改的指定列类型<br>    <span class="hljs-keyword">and</span> COLLATION_NAME <span class="hljs-operator">=</span><span class="hljs-string">&#x27;utf8mb4_0900_ai_ci&#x27;</span>; # 要修改的字符集<br><br># 查看traff_biz库中的表所占空间大小<br><span class="hljs-keyword">SELECT</span> a.TABLE_NAME, concat(round(<span class="hljs-built_in">sum</span>(a.DATA_LENGTH<span class="hljs-operator">/</span><span class="hljs-number">1024</span><span class="hljs-operator">/</span><span class="hljs-number">1024</span><span class="hljs-operator">/</span><span class="hljs-number">1024</span>),<span class="hljs-number">2</span>),<span class="hljs-string">&#x27;GB&#x27;</span>) <span class="hljs-keyword">as</span> data <br><span class="hljs-keyword">FROM</span> information_schema.`TABLES` a <br><span class="hljs-keyword">WHERE</span> a.TABLE_SCHEMA <span class="hljs-operator">=</span> <span class="hljs-string">&#x27;traff_biz&#x27;</span><br><span class="hljs-keyword">GROUP</span> <span class="hljs-keyword">BY</span> a.TABLE_NAME;<br></code></pre></td></tr></table></figure><h4 id="6、时间区间"><a href="#6、时间区间" class="headerlink" title="6、时间区间"></a>6、时间区间</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">select</span> DATE_FORMAT( DATE_ADD(<span class="hljs-string">&#x27;2022-08-09&#x27;</span>, <span class="hljs-type">INTERVAL</span>(ad.ac) <span class="hljs-keyword">DAY</span>),<span class="hljs-string">&#x27;%Y-%m-%d&#x27;</span>)  dayDate<br><span class="hljs-keyword">FROM</span> (<br><span class="hljs-keyword">SELECT</span> <span class="hljs-variable">@ai</span>:<span class="hljs-operator">=</span><span class="hljs-variable">@ai</span><span class="hljs-operator">+</span><span class="hljs-number">1</span> <span class="hljs-keyword">as</span> ac <span class="hljs-keyword">from</span><br>(<span class="hljs-keyword">SELECT</span> <span class="hljs-number">1</span> <span class="hljs-keyword">UNION</span> <span class="hljs-keyword">SELECT</span> <span class="hljs-number">2</span> <span class="hljs-keyword">UNION</span> <span class="hljs-keyword">SELECT</span> <span class="hljs-number">3</span> <span class="hljs-keyword">UNION</span> <span class="hljs-keyword">SELECT</span> <span class="hljs-number">4</span> <span class="hljs-keyword">UNION</span> <span class="hljs-keyword">SELECT</span> <span class="hljs-number">5</span><br> <span class="hljs-keyword">UNION</span> <span class="hljs-keyword">SELECT</span> <span class="hljs-number">6</span> <span class="hljs-keyword">UNION</span> <span class="hljs-keyword">SELECT</span> <span class="hljs-number">7</span> <span class="hljs-keyword">UNION</span> <span class="hljs-keyword">SELECT</span> <span class="hljs-number">8</span> <span class="hljs-keyword">UNION</span> <span class="hljs-keyword">SELECT</span> <span class="hljs-number">9</span> <span class="hljs-keyword">UNION</span> <span class="hljs-keyword">SELECT</span> <span class="hljs-number">10</span>) ac1,<br>(<span class="hljs-keyword">SELECT</span> <span class="hljs-number">1</span> <span class="hljs-keyword">UNION</span> <span class="hljs-keyword">SELECT</span> <span class="hljs-number">2</span> <span class="hljs-keyword">UNION</span> <span class="hljs-keyword">SELECT</span> <span class="hljs-number">3</span> <span class="hljs-keyword">UNION</span> <span class="hljs-keyword">SELECT</span> <span class="hljs-number">4</span> <span class="hljs-keyword">UNION</span> <span class="hljs-keyword">SELECT</span> <span class="hljs-number">5</span><br> <span class="hljs-keyword">UNION</span> <span class="hljs-keyword">SELECT</span> <span class="hljs-number">6</span> <span class="hljs-keyword">UNION</span> <span class="hljs-keyword">SELECT</span> <span class="hljs-number">7</span> <span class="hljs-keyword">UNION</span> <span class="hljs-keyword">SELECT</span> <span class="hljs-number">8</span> <span class="hljs-keyword">UNION</span> <span class="hljs-keyword">SELECT</span> <span class="hljs-number">9</span> <span class="hljs-keyword">UNION</span> <span class="hljs-keyword">SELECT</span> <span class="hljs-number">10</span>) ac2,<br>(<span class="hljs-keyword">SELECT</span> <span class="hljs-variable">@ai</span>:<span class="hljs-operator">=</span><span class="hljs-number">-1</span>) xc0<br>) ad<br><span class="hljs-keyword">where</span> ad.ac  <span class="hljs-operator">&lt;=</span>  TIMESTAMPDIFF(<span class="hljs-keyword">DAY</span>,CONCAT(<span class="hljs-string">&#x27;2022-08-09&#x27;</span>),CONCAT(<span class="hljs-string">&#x27;2022-08-22&#x27;</span>));<br></code></pre></td></tr></table></figure><h4 id="7、近一年的年份和季度"><a href="#7、近一年的年份和季度" class="headerlink" title="7、近一年的年份和季度"></a>7、近一年的年份和季度</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">select</span> <span class="hljs-keyword">year</span>(DATE_SUB(now(), <span class="hljs-type">INTERVAL</span> <span class="hljs-number">4</span><span class="hljs-operator">*</span>ac <span class="hljs-keyword">MONTH</span> )) dateYear,<br>quarter(DATE_SUB(now(), <span class="hljs-type">INTERVAL</span> <span class="hljs-number">4</span><span class="hljs-operator">*</span>ac <span class="hljs-keyword">MONTH</span> )) dateQuarter<br><span class="hljs-keyword">FROM</span> (<br><span class="hljs-keyword">SELECT</span> <span class="hljs-variable">@ai</span>:<span class="hljs-operator">=</span><span class="hljs-variable">@ai</span><span class="hljs-operator">+</span><span class="hljs-number">1</span> <span class="hljs-keyword">as</span> ac <span class="hljs-keyword">from</span><br>(<span class="hljs-keyword">SELECT</span> <span class="hljs-number">1</span> <span class="hljs-keyword">UNION</span> <span class="hljs-keyword">SELECT</span> <span class="hljs-number">2</span> ) ac1,<br>(<span class="hljs-keyword">SELECT</span> <span class="hljs-number">1</span> <span class="hljs-keyword">UNION</span> <span class="hljs-keyword">SELECT</span> <span class="hljs-number">2</span> ) ac2,<br>(<span class="hljs-keyword">SELECT</span> <span class="hljs-variable">@ai</span>:<span class="hljs-operator">=</span><span class="hljs-number">-1</span>) xc0<br>) ad;<br></code></pre></td></tr></table></figure><h4 id="8、近12个月"><a href="#8、近12个月" class="headerlink" title="8、近12个月"></a>8、近12个月</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">select</span> DATE_FORMAT(DATE_SUB(NOW(), <span class="hljs-type">INTERVAL</span> ac <span class="hljs-keyword">MONTH</span> ) ,<span class="hljs-string">&#x27;%Y-%m&#x27;</span>) dayDate<br><span class="hljs-keyword">FROM</span> (<br><span class="hljs-keyword">SELECT</span> <span class="hljs-variable">@ai</span>:<span class="hljs-operator">=</span><span class="hljs-variable">@ai</span><span class="hljs-operator">+</span><span class="hljs-number">1</span> <span class="hljs-keyword">as</span> ac <span class="hljs-keyword">from</span><br>(<span class="hljs-keyword">SELECT</span> <span class="hljs-number">1</span> <span class="hljs-keyword">UNION</span> <span class="hljs-keyword">SELECT</span> <span class="hljs-number">2</span> <span class="hljs-keyword">UNION</span> <span class="hljs-keyword">SELECT</span> <span class="hljs-number">3</span> ) ac1,<br>(<span class="hljs-keyword">SELECT</span> <span class="hljs-number">1</span> <span class="hljs-keyword">UNION</span> <span class="hljs-keyword">SELECT</span> <span class="hljs-number">2</span> <span class="hljs-keyword">UNION</span> <span class="hljs-keyword">SELECT</span> <span class="hljs-number">3</span> <span class="hljs-keyword">UNION</span> <span class="hljs-keyword">SELECT</span> <span class="hljs-number">4</span>) ac2,<br>(<span class="hljs-keyword">SELECT</span> <span class="hljs-variable">@ai</span>:<span class="hljs-operator">=</span><span class="hljs-number">-1</span>) xc0<br>) ad;<br></code></pre></td></tr></table></figure><h3 id="二、Oracle"><a href="#二、Oracle" class="headerlink" title="二、Oracle"></a>二、Oracle</h3><h4 id="1、当年12个月"><a href="#1、当年12个月" class="headerlink" title="1、当年12个月"></a>1、当年12个月</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">select</span> <span class="hljs-string">&#x27;2022&#x27;</span> dateYear,to_char(add_months(trunc(to_date(<span class="hljs-string">&#x27;2022&#x27;</span>,<span class="hljs-string">&#x27;yyyy&#x27;</span>),<span class="hljs-string">&#x27;yyyy&#x27;</span>),level<span class="hljs-number">-1</span>),<span class="hljs-string">&#x27;mm&#x27;</span>) dateMonth <br><span class="hljs-keyword">from</span> dual <span class="hljs-keyword">connect</span> <span class="hljs-keyword">by</span> level<span class="hljs-operator">&lt;=</span><span class="hljs-number">12</span> ;<br></code></pre></td></tr></table></figure><h4 id="2、前12个月"><a href="#2、前12个月" class="headerlink" title="2、前12个月"></a>2、前12个月</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">SELECT</span><br>TO_CHAR(ADD_MONTHS(TO_DATE(to_char(SYSDATE,<span class="hljs-string">&#x27;yyyy-mm&#x27;</span>),<span class="hljs-string">&#x27;yyyy-MM&#x27;</span>), ROWNUM <span class="hljs-operator">-</span> <span class="hljs-number">12</span>),<span class="hljs-string">&#x27;yyyy-MM&#x27;</span>)<br><span class="hljs-keyword">as</span> dateTime <span class="hljs-keyword">FROM</span> DUAL<br><span class="hljs-keyword">CONNECT</span> <span class="hljs-keyword">BY</span> ROWNUM <span class="hljs-operator">&lt;=</span> <span class="hljs-number">12</span>;<br></code></pre></td></tr></table></figure><h4 id="3、前30天"><a href="#3、前30天" class="headerlink" title="3、前30天"></a>3、前30天</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">SELECT</span> to_char(<span class="hljs-keyword">day</span>,<span class="hljs-string">&#x27;yyyy-mm-dd&#x27;</span>) <span class="hljs-keyword">as</span> &quot;days&quot;<br>          <span class="hljs-keyword">from</span> (<br>        <span class="hljs-keyword">SELECT</span> to_date(to_char(trunc(sysdate, <span class="hljs-string">&#x27;dd&#x27;</span>), <span class="hljs-string">&#x27;yyyy-mm-dd&#x27;</span>), <span class="hljs-string">&#x27;yyyy-mm-dd&#x27;</span>) <span class="hljs-operator">-</span> rownum <span class="hljs-operator">+</span> <span class="hljs-number">1</span> <span class="hljs-keyword">as</span> <span class="hljs-keyword">day</span><br>          <span class="hljs-keyword">FROM</span> dual<br>                  <span class="hljs-keyword">CONNECT</span> <span class="hljs-keyword">BY</span> ROWNUM <span class="hljs-operator">&lt;=</span> <span class="hljs-number">30</span><br>        )<br><span class="hljs-keyword">ORDER</span> <span class="hljs-keyword">BY</span> <span class="hljs-keyword">day</span> <span class="hljs-keyword">asc</span>;<br></code></pre></td></tr></table></figure><h4 id="4、近5年"><a href="#4、近5年" class="headerlink" title="4、近5年"></a>4、近5年</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">SELECT</span> to_char(SYSDATE,<span class="hljs-string">&#x27;YYYY&#x27;</span>) <span class="hljs-operator">-</span> LEVEL <span class="hljs-operator">+</span> <span class="hljs-number">1</span> <span class="hljs-keyword">as</span> dateyear<br><span class="hljs-keyword">FROM</span> dual<br><span class="hljs-keyword">CONNECT</span> <span class="hljs-keyword">BY</span> LEVEL <span class="hljs-operator">&lt;=</span> <span class="hljs-number">5</span><br><span class="hljs-keyword">ORDER</span> <span class="hljs-keyword">BY</span> to_char(SYSDATE,<span class="hljs-string">&#x27;YYYY&#x27;</span>) <span class="hljs-operator">-</span> LEVEL <span class="hljs-operator">+</span> <span class="hljs-number">1</span> <span class="hljs-keyword">ASC</span>;<br></code></pre></td></tr></table></figure><h4 id="5、分钟-1-12-5分钟一个时间片"><a href="#5、分钟-1-12-5分钟一个时间片" class="headerlink" title="5、分钟 1-12  5分钟一个时间片"></a>5、分钟 1-12  5分钟一个时间片</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">select</span> trunc(to_number(to_char(sysdate,<span class="hljs-string">&#x27;mi&#x27;</span>))<span class="hljs-operator">/</span><span class="hljs-number">5</span>)<span class="hljs-operator">+</span><span class="hljs-number">1</span> <span class="hljs-keyword">from</span> dual;<br></code></pre></td></tr></table></figure><h4 id="6、前一个小时"><a href="#6、前一个小时" class="headerlink" title="6、前一个小时"></a>6、前一个小时</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">select</span> to_char(sysdate<span class="hljs-number">-1</span><span class="hljs-operator">/</span><span class="hljs-number">24</span>,<span class="hljs-string">&#x27;yyyy-MM-dd hh24&#x27;</span>) <span class="hljs-keyword">from</span> dual;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>database</category>
      
    </categories>
    
    
    <tags>
      
      <tag>mysql,oracle</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>【大数据】HDFS、Hive、FTP的内网间的相互传递（附脚本获取数据）</title>
    <link href="/blog/docs/shell-02/bigdata/shell/shell-02/"/>
    <url>/blog/docs/shell-02/bigdata/shell/shell-02/</url>
    
    <content type="html"><![CDATA[<blockquote><p>汝之观览，吾之幸也！本文讲解生产中会遇到的问题，一般集群都部署在外网，如果集群部署在内网，那么怎么同步之前的<br>Hive数据到外网，或者两个内网间怎么同步Hive数据，本文主要以shell脚本演示。</p></blockquote><h3 id="一、前提"><a href="#一、前提" class="headerlink" title="一、前提"></a>一、前提</h3><p>内网间的网闸一般都有专门的公司运营，我们主要说怎么把数据存FTP，怎么从FTP取数据。<br>重点：<br>1、先在Hive库建好需要同步的表，表结构一致，表名可不一致<br>2、如果原有Hive库有分区，则需要先建好分区，不可直接创建目录<br>3、两边的Hive文件格式需要保持一致<br>4、数据需要放在相同目录下<br>5、保证源服务器、FTP服务器、目标服务器的空间大小，以免造成空间不足无法传递</p><h3 id="二、HDFS-gt-FTP"><a href="#二、HDFS-gt-FTP" class="headerlink" title="二、HDFS-&gt;FTP"></a>二、HDFS-&gt;FTP</h3><h4 id="1、FTP上创建目录"><a href="#1、FTP上创建目录" class="headerlink" title="1、FTP上创建目录"></a>1、FTP上创建目录</h4><p>根据源库的日期格式进行分区在FTP所在服务器建目录，从需要的年份日期开始建目录</p><h5 id="脚本-create-dir-sh"><a href="#脚本-create-dir-sh" class="headerlink" title="脚本 create_dir.sh"></a>脚本 create_dir.sh</h5><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta prompt_">#</span><span class="language-bash">!/bin/bash</span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">FTP用户目录</span><br>file_path=&quot;/home/test&quot;<br>next_day=$(date -d day +%Y-%m-%d)<br>i=0<br>until [[ $year_month_day == $next_day ]]<br>do <br>year_month_day=$(date -d &quot;2021-01-01 $i days&quot; +%Y-%m-%d)<br>year=$(date -d &quot;$year_month_day&quot; +%Y)<br>month=$(date -d &quot;$year_month_day&quot; +%m)<br>    day=$(date -d &quot;$year_month_day&quot; +%d)<br>file_date_path=$file_path/表名/$year/$month/$day/<br>mkdir -p $file_date_path<br><span class="hljs-meta prompt_"># </span><span class="language-bash">需要配置FTP用户权限，不然没法上传</span><br>chown test:test $file_date_path<br>((i++))<br>done <br></code></pre></td></tr></table></figure><h5 id="执行脚本命令"><a href="#执行脚本命令" class="headerlink" title="执行脚本命令"></a>执行脚本命令</h5><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs shell">sh create_dir.sh<br><span class="hljs-meta prompt_">#</span><span class="language-bash">备注 在FTP服务器下执行，先赋权 <span class="hljs-built_in">chmod</span> 777 create_dir.sh</span><br></code></pre></td></tr></table></figure><h4 id="2、下载HDFS文件到本地服务器并上传到FTP"><a href="#2、下载HDFS文件到本地服务器并上传到FTP" class="headerlink" title="2、下载HDFS文件到本地服务器并上传到FTP"></a>2、下载HDFS文件到本地服务器并上传到FTP</h4><h5 id="脚本-hadoop-ftp-sh"><a href="#脚本-hadoop-ftp-sh" class="headerlink" title="脚本 hadoop-ftp.sh"></a>脚本 hadoop-ftp.sh</h5><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta prompt_">#</span><span class="language-bash">!/bin/bash</span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">check_hdfs_folder</span><br>check_hdfs_folder() &#123; <br>echo &quot;-------check hdfs folder-------&quot;<br>`hadoop fs -test -d $1` <br>&#125;<br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">check_folder</span><br>check_folder() &#123; <br>echo &quot;-------check local folder -------&quot;<br>if [ -e $1 ];then<br>echo &quot;folder already exists&quot;<br>else<br>echo &quot;folder mkdir success&quot;<br>mkdir -p $1<br>fi<br>&#125;<br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">upload_file_to_ftp</span><br>upload_file_to_ftp() &#123; <br>    `ftp -v -n FTP的Ip&lt;&lt;EOF<br>user FTP账号 FTP账号密码<br>binar<br>cd /home/shuju/$1/$2/$3/$4<br>lcd /home/datax/datax/shuju/$1/$2/$3/$4<br>prompt<br>mput *<br>bye<br>EOF<br>`<br>    # cd:FTP文件目录  lcd:源数据下载到本地地址<br>&#125;<br><span class="hljs-meta prompt_"># </span><span class="language-bash">delete_file</span><br>delete_file() &#123; <br>rm -rf /home/datax/datax/shuju/$1/$2/$3/<br>&#125;<br><span class="hljs-meta prompt_"># </span><span class="language-bash">hadoop_to_local</span> <br>hadoop_to_local() &#123; <br>start_time=`date &quot;+%Y-%m-%d %H:%M:%S&quot;`<br><span class="hljs-meta prompt_"># </span><span class="language-bash">HDFS address</span><br>yearPath=/user/hive/warehouse/Hive库名/$1/y_=$2/<br><span class="hljs-meta prompt_"># </span><span class="language-bash"><span class="hljs-built_in">local</span> server address</span><br>localPath=/home/datax/datax/shuju<br>echo &quot;-----------hdfs yearPath ------------&quot;$yearPath<br>check_hdfs_folder $yearPath<br>echo &quot;-----------hdfs file ------------&quot;$?<br>if [ $? == 0 ];then<br>    check_folder $localPath/$1/$2<br>monthPath=$yearPath/m_=$3<br>echo &quot;-----------hdfs monthPath ------------&quot;$monthPath<br>check_hdfs_folder $monthPath<br>if [ $? == 0 ];then <br>check_folder $localPath/$1/$2/$3<br>for((day=1; day&lt;=31; day++)); do <br>if [ $day -lt 10 ];then<br>daydir=0$day<br>else<br>daydir=$day<br>fi<br>dayPath=$yearPath/m_=$3/d_=$daydir<br>echo &quot;-----------hdfs dayPath ------------&quot;$dayPath<br>check_hdfs_folder $dayPath<br>if [ $? == 0 ];then <br>check_folder $localPath/$1/$2/$3/$daydir<br>echo &quot;-----------hdfs to local start------------&quot;<br>`hadoop fs -put $dayPath/* $localPath/$1/$2/$3/$daydir/`<br>echo &quot;-----------hdfs to local end------------&quot;<br>fi<br>sleep 5s<br>echo &quot;-----------upload_file_to_ftp start------------&quot;<br>upload_file_to_ftp $1 $2 $3 $daydir<br>echo &quot;-----------upload_file_to_ftp end------------&quot;<br>sleep 5s<br>done<br>fi <br>fi <br>echo &quot;-----------delete_filedir start------------&quot;<br>delete_file $1 $2 $3<br>echo &quot;-----------delete_filedir end------------&quot;<br>end_time=`date &quot;+%Y-%m-%d %H:%M:%S&quot;`<br>echo &quot;-----------start_time------------&quot;$start_time<br>echo &quot;-----------end_time------------&quot;$end_time<br>&#125;<br><span class="hljs-meta prompt_"># </span><span class="language-bash">表名  2021 01</span><br>hadoop_to_local $1 $2 $3<br></code></pre></td></tr></table></figure><h5 id="执行脚本命令-1"><a href="#执行脚本命令-1" class="headerlink" title="执行脚本命令"></a>执行脚本命令</h5><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs shell">sh hadoop-ftp.sh 表名 年份 月份<br><span class="hljs-meta prompt_"># </span><span class="language-bash">备注：在源服务器下执行</span><br></code></pre></td></tr></table></figure><h4 id="3、删除本地下载的服务器文件"><a href="#3、删除本地下载的服务器文件" class="headerlink" title="3、删除本地下载的服务器文件"></a>3、删除本地下载的服务器文件</h4><p>等目的源服务器已同步到FTP数据并且已上传到目的源HDFS</p><h5 id="脚本-delete-ftp-sh"><a href="#脚本-delete-ftp-sh" class="headerlink" title="脚本 delete-ftp.sh"></a>脚本 delete-ftp.sh</h5><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta prompt_">#</span><span class="language-bash">!/bin/bash</span><br>for((day=$4; day&lt;=$5; day++)); do <br>if [ $day -lt 10 ];then <br>daydir=0$day<br>else<br>daydir=$day<br>fi<br>file_path=/home/shuju/$1/$2/$3/$daydir/*<br>echo &quot;----------delete ftp file_path----------&quot;$file_path<br>rm -rf $file_path<br>echo &quot;----------delete ftp file success----------&quot;<br>done <br></code></pre></td></tr></table></figure><h5 id="执行脚本命令-2"><a href="#执行脚本命令-2" class="headerlink" title="执行脚本命令"></a>执行脚本命令</h5><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta prompt_">#</span><span class="language-bash">表名 2022 08 1 5</span><br>sh delete-ftp.sh 表名 年份 月份 开始日 结束日<br><span class="hljs-meta prompt_"># </span><span class="language-bash">备注：在FTP服务器下执行</span><br></code></pre></td></tr></table></figure><h3 id="三、网闸同步"><a href="#三、网闸同步" class="headerlink" title="三、网闸同步"></a>三、网闸同步</h3><p>网闸同步由专门的公司处理，只要保证源FTP到目标FTP可进行文件传输即可，同时确保网闸给需要同步的文件格式赋权。</p><h3 id="四、FTP-gt-HDFS"><a href="#四、FTP-gt-HDFS" class="headerlink" title="四、FTP-&gt;HDFS"></a>四、FTP-&gt;HDFS</h3><h4 id="1、在Hive上创建对应的分区"><a href="#1、在Hive上创建对应的分区" class="headerlink" title="1、在Hive上创建对应的分区"></a>1、在Hive上创建对应的分区</h4><h5 id="脚本-alter-partition-sh"><a href="#脚本-alter-partition-sh" class="headerlink" title="脚本 alter_partition.sh"></a>脚本 alter_partition.sh</h5><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta prompt_">#</span><span class="language-bash">!/bin/bash</span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">next_day=$(<span class="hljs-built_in">date</span> -d day +%Y-%m-%d)</span><br>next_day=$3<br>i=0<br>until [[ $year_month_day == $next_day ]]<br>do <br>year_month_day=$(date -d &quot;$2 $i days&quot; +%Y-%m-%d)<br>year=$(date -d &quot;$year_month_day&quot; +%Y)<br>month=$(date -d &quot;$year_month_day&quot; +%m)<br>    day=$(date -d &quot;$year_month_day&quot; +%d)<br>echo &quot;alter table &quot;$1&quot; add partition(y_=&quot;$year&quot;,m_=&quot;$month&quot;,d_=&quot;$day&quot;);&quot;&gt;&gt;D://partition.txt<br>((i++))<br>done <br></code></pre></td></tr></table></figure><h5 id="执行脚本命令-3"><a href="#执行脚本命令-3" class="headerlink" title="执行脚本命令"></a>执行脚本命令</h5><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta prompt_"># </span><span class="language-bash">表名 2022-01-01 2022-12-31</span><br>sh alter_partition.sh 表名 开始日 结束日<br><span class="hljs-meta prompt_"># </span><span class="language-bash">备注：本地执行，之后把partition.txt的放到目的源服务器，目的Hive库执行</span><br></code></pre></td></tr></table></figure><h4 id="2、从FTP上下载文件到目标源服务器并同步到HDFS，同时删除当前服务器下载的文件"><a href="#2、从FTP上下载文件到目标源服务器并同步到HDFS，同时删除当前服务器下载的文件" class="headerlink" title="2、从FTP上下载文件到目标源服务器并同步到HDFS，同时删除当前服务器下载的文件"></a>2、从FTP上下载文件到目标源服务器并同步到HDFS，同时删除当前服务器下载的文件</h4><h5 id="脚本-ftp-hadoop-sh"><a href="#脚本-ftp-hadoop-sh" class="headerlink" title="脚本 ftp-hadoop.sh"></a>脚本 ftp-hadoop.sh</h5><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta prompt_">#</span><span class="language-bash">!/bin/bash</span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">check_hdfs_folder</span><br>check_hdfs_folder() &#123; <br>echo &quot;-------check hdfs folder-------&quot;<br>`hadoop fs -test -e $1` <br>&#125;<br><span class="hljs-meta prompt_"># </span><span class="language-bash">mkdir_hdfs_folder</span><br>mkdir_hdfs_folder() &#123; <br>echo &quot;-------mkdir_hdfs_folder-------&quot;<br>`hadoop fs -mkdir -p $1` <br>&#125;<br><span class="hljs-meta prompt_"># </span><span class="language-bash">delete_hdfs_file</span><br>delete_hdfs_file() &#123; <br>echo &quot;-------delete_hdfs_file-------&quot;<br>`hadoop fs -rm -rf $1` <br>&#125;<br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">check_folder</span><br>check_folder() &#123; <br>echo &quot;-------check local folder -------&quot;<br>if [ -e $1 ];then<br>echo &quot;folder already exists&quot;<br>else<br>mkdir -p $1<br>fi<br>&#125;<br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">check_file</span><br>check_file() &#123; <br>echo &quot;-------check ftp file -------&quot;<br>if [ -f $1 ];then<br>return 0<br>else<br>return 1<br>fi<br>&#125;<br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">upload_file_to_ftp</span><br>download_ftp_to_local() &#123; <br>    `ftp -v -n 目标源FTP的IP&lt;&lt;-EOF<br>user 目标源FTP账号 目标源FTP密码<br>binary<br>cd /dev/shuju/$1/$3/$4/$5<br>lcd /data1/shuju/$2/$3/$4/$5<br>prompt<br>mget *<br>bye<br>EOF<br>`<br>    #备注：cd 目标源FTP地址  lcd 目标源服务器文件存放地址<br>&#125;<br><span class="hljs-meta prompt_"># </span><span class="language-bash">delete_file</span><br>delete_file() &#123; <br>rm -rf /data1/shuju/$1/$2/$3/$4/<br>&#125;<br><span class="hljs-meta prompt_"># </span><span class="language-bash">local_to_hadoop</span><br>local_to_hadoop() &#123; <br>start_time=`date &quot;+%Y-%m-%d %H:%M:%S&quot;`<br><span class="hljs-meta prompt_"># </span><span class="language-bash">HDFS address</span><br>monthPath=/user/hive/warehouse/目标Hive库名/$2/y_=$3/m_=$4<br>echo &quot;-----------hdfs monthPath ------------&quot;$monthPath<br>check_hdfs_folder $monthPath<br>if [ $? == 0 ];then<br>for((day=1; day&lt;=31; day++)); do <br>if [ $day -lt 10 ];then <br>daydir=0$day<br>else<br>daydir=$day<br>fi<br>echo &quot;-----------ftp to local start------------&quot;<br>download_ftp_to_local $1 $2 $3 $4 $daydir<br>echo &quot;-----------ftp to local end------------&quot;<br>sleep 5s<br><span class="hljs-meta prompt_"># </span><span class="language-bash">add partition</span><br>dayPath=$monthPath/d_=$daydir<br>echo &quot;-----------hdfs dayPath ------------&quot;$dayPath<br>echo &quot;-----------local to hdfs start------------&quot;<br>`hadoop fs -put /data1/shuju/$2/$3/$4/$daydir/* $dayPath/`<br>echo &quot;-----------local to hdfs end------------&quot;<br>sleep 5s<br>echo &quot;-----------delete_file start------------&quot;<br>delete_file $2 $3 $4 $daydir<br>echo &quot;-----------delete_file end------------&quot;<br>done<br>end_time=`date &quot;+%Y-%m-%d %H:%M:%S&quot;`<br>echo &quot;-----------start_time------------&quot;$start_time<br>echo &quot;-----------end_time------------&quot;$end_time<br>fi<br>&#125;<br><span class="hljs-meta prompt_"># </span><span class="language-bash">源表名 目标表名 年份 月份</span><br>local_to_hadoop $1 $2 $3 $4<br></code></pre></td></tr></table></figure><h5 id="执行脚本命令-4"><a href="#执行脚本命令-4" class="headerlink" title="执行脚本命令"></a>执行脚本命令</h5><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs shell">sh ftp-hadoop.sh 源表名 目标表名 年份(2022) 月份(08)<br><span class="hljs-meta prompt_"># </span><span class="language-bash">备注 在目标源HDFS服务器上执行</span><br></code></pre></td></tr></table></figure><h4 id="3、删除目标源FTP文件"><a href="#3、删除目标源FTP文件" class="headerlink" title="3、删除目标源FTP文件"></a>3、删除目标源FTP文件</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">rm</span> -rf 目标源FTP路径/表名<br><span class="hljs-comment"># 备注 在目标源FTP服务器上执行</span><br></code></pre></td></tr></table></figure><h3 id="五、在HIVE上查看数据"><a href="#五、在HIVE上查看数据" class="headerlink" title="五、在HIVE上查看数据"></a>五、在HIVE上查看数据</h3><p>按照前面步骤操作成功即可在目标Hive中查询到同步的数据</p><h3 id="六、题外"><a href="#六、题外" class="headerlink" title="六、题外"></a>六、题外</h3><p>后期会做统一的同步更新，做好一键部署的升级版本，也可用datax做数据同步；<br>注意：<br>1、确保两边的FTP空间大小，避免空间太小导致一次只能传几天的数据进行同步<br>2、确保两边本地存放的空间大小，避免下载到本地空间太小<br>3、在空间大小很多的情况下可以做一月，一年的一次性同步</p>]]></content>
    
    
    <categories>
      
      <category>shell</category>
      
    </categories>
    
    
    <tags>
      
      <tag>shell,ftp,hdfs</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>【大数据】Hadoop在呼唤Hive（附一键部署Hive脚本）</title>
    <link href="/blog/docs/hive-01/bigdata/hive/hive-01/"/>
    <url>/blog/docs/hive-01/bigdata/hive/hive-01/</url>
    
    <content type="html"><![CDATA[<blockquote><p>汝之观览，吾之幸也！本文主要讲解Hive部署到Hadoop集群并使用，结尾附一键部署Hive脚本</p></blockquote><h3 id="一、准备工作"><a href="#一、准备工作" class="headerlink" title="一、准备工作"></a>一、准备工作</h3><h4 id="1、下载Hive包"><a href="#1、下载Hive包" class="headerlink" title="1、下载Hive包"></a>1、下载Hive包</h4><p><a href="http://archive.apache.org/dist/hive/">Hive下载地址</a><br>本文以apache-hive-3.1.2-bin.tar.gz作为部署，可以自身需要选择版本<br><a href="https://cwiki.apache.org/confluence/display/Hive/GettingStarted">Hive文档地址</a></p><h4 id="2、下载mysql的rpm包"><a href="#2、下载mysql的rpm包" class="headerlink" title="2、下载mysql的rpm包"></a>2、下载mysql的rpm包</h4><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">01_mysql</span>-community-common-<span class="hljs-number">5</span>.<span class="hljs-number">7</span>.<span class="hljs-number">29</span>-<span class="hljs-number">1</span>.el7.x86_64.rpm<br><span class="hljs-attribute">02_mysql</span>-community-libs-<span class="hljs-number">5</span>.<span class="hljs-number">7</span>.<span class="hljs-number">29</span>-<span class="hljs-number">1</span>.el7.x86_64.rpm<br><span class="hljs-attribute">03_mysql</span>-community-libs-compat-<span class="hljs-number">5</span>.<span class="hljs-number">7</span>.<span class="hljs-number">29</span>-<span class="hljs-number">1</span>.el7.x86_64.rpm<br><span class="hljs-attribute">04_mysql</span>-community-client-<span class="hljs-number">5</span>.<span class="hljs-number">7</span>.<span class="hljs-number">29</span>-<span class="hljs-number">1</span>.el7.x86_64.rpm<br><span class="hljs-attribute">05_mysql</span>-community-server-<span class="hljs-number">5</span>.<span class="hljs-number">7</span>.<span class="hljs-number">29</span>-<span class="hljs-number">1</span>.el7.x86_64.rpm<br><span class="hljs-attribute">mysql</span>-connector-java-<span class="hljs-number">5</span>.<span class="hljs-number">1</span>.<span class="hljs-number">48</span>.jar<br></code></pre></td></tr></table></figure><h4 id="3、下载Hive引擎tez包"><a href="#3、下载Hive引擎tez包" class="headerlink" title="3、下载Hive引擎tez包"></a>3、下载Hive引擎tez包</h4><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">tez</span>-<span class="hljs-number">0</span>.<span class="hljs-number">10</span>.<span class="hljs-number">1</span>-SNAPSHOT.tar.gz<br></code></pre></td></tr></table></figure><h4 id="4、将shell脚本放到-usr-bin下"><a href="#4、将shell脚本放到-usr-bin下" class="headerlink" title="4、将shell脚本放到/usr/bin下"></a>4、将shell脚本放到/usr/bin下</h4><p>给脚本赋权限</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs shell">cd /usr/bin<br>chmod +x hive-install.sh<br></code></pre></td></tr></table></figure><h4 id="5、启动Hadoop集群"><a href="#5、启动Hadoop集群" class="headerlink" title="5、启动Hadoop集群"></a>5、启动Hadoop集群</h4><p>执行命令</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">one 10<br></code></pre></td></tr></table></figure><p><img src="https://jimmy-blog-images.oss-cn-shanghai.aliyuncs.com/img/bigdata/hive%E5%90%AF%E5%8A%A8hadoop%E9%9B%86%E7%BE%A4.png"></p><p>具体安装包可加公众号【纯码农（purecodefarmer）】输入“hive”即可获取下载链接<br>一键部署hadoop集群可参考<a href="https://blog.csdn.net/m0_37172770/article/details/126452824?spm=1001.2014.3001.5501">【大数据】搭建Hadoop集群（附一键部署脚本）</a><br>备注：将下载的包放到hadoop集群主机的/opt/software/hive 目录下</p><h3 id="二、Hive的搭建-脚本分解"><a href="#二、Hive的搭建-脚本分解" class="headerlink" title="二、Hive的搭建(脚本分解)"></a>二、Hive的搭建(脚本分解)</h3><h4 id="1、安装mysql"><a href="#1、安装mysql" class="headerlink" title="1、安装mysql"></a>1、安装mysql</h4><p>在安装mysql包时我们需要先删除自带的Mysql-libs<br>可使用命令查看是否有</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">rpm -qa | grep -i -E mysql\|mariadb<br></code></pre></td></tr></table></figure><p><img src="https://jimmy-blog-images.oss-cn-shanghai.aliyuncs.com/img/bigdata/hive%E5%8D%B8%E8%BD%BD%E5%8E%9F%E6%9C%89%E7%9A%84mysql.png"></p><h5 id="1、卸载原有的mysql"><a href="#1、卸载原有的mysql" class="headerlink" title="1、卸载原有的mysql"></a>1、卸载原有的mysql</h5><p>脚本内容</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs shell">echo &quot;-------删除原有的mysql-------&quot;<br>systemctl stop mysqld<br>service mysql stop 2&gt;/dev/null<br>service mysqld stop 2&gt;/dev/null<br>rpm -qa | grep -i mysql | xargs -n1 rpm -e --nodeps 2&gt;/dev/null<br>rpm -qa | grep -i mariadb | xargs -n1 rpm -e --nodeps 2&gt;/dev/null<br>rm -rf /var/lib/mysql<br>rm -rf /usr/lib64/mysql<br>rm -rf /etc/my.cnf<br>rm -rf /usr/my.cnf<br>rm -rf /var/log/mysqld.log<br></code></pre></td></tr></table></figure><p>执行脚本命令</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">sh hive-install.sh 1<br></code></pre></td></tr></table></figure><h5 id="2、安装mysql驱动包"><a href="#2、安装mysql驱动包" class="headerlink" title="2、安装mysql驱动包"></a>2、安装mysql驱动包</h5><p>脚本内容</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs shell">cd /opt/software/hive<br>echo &quot;-------安装mysql依赖-------&quot;<br>rpm -ivh 01_mysql-community-common-5.7.29-1.el7.x86_64.rpm<br>rpm -ivh 02_mysql-community-libs-5.7.29-1.el7.x86_64.rpm<br>rpm -ivh 03_mysql-community-libs-compat-5.7.29-1.el7.x86_64.rpm<br><br>echo &quot;-------安装mysql-client-------&quot;<br>rpm -ivh 04_mysql-community-client-5.7.29-1.el7.x86_64.rpm<br><br>echo &quot;-------安装mysql-server-------&quot;<br>rpm -ivh 05_mysql-community-server-5.7.29-1.el7.x86_64.rpm<br><br>echo &quot;-------启动mysql-------&quot;<br>systemctl start mysqld<br><br>password=`cat /var/log/mysqld.log | grep password`<br>password1=`echo $&#123;password#*localhost: &#125;`<br>echo &quot;-------mysql 初始密码-------&quot; $password1<br><br>echo &quot;-------登录mysql-------&quot;<br>mysql -uroot -p$password1<br></code></pre></td></tr></table></figure><p>执行脚本命令</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">sh hive-install.sh 1<br></code></pre></td></tr></table></figure><p><img src="https://jimmy-blog-images.oss-cn-shanghai.aliyuncs.com/img/bigdata/hiveinstall-mysql.png"></p><h5 id="3、修改mysql的默认密码"><a href="#3、修改mysql的默认密码" class="headerlink" title="3、修改mysql的默认密码"></a>3、修改mysql的默认密码</h5><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta prompt_"># </span><span class="language-bash">设置复杂密码</span><br><span class="hljs-meta prompt_">mysql&gt; </span><span class="language-bash"><span class="hljs-built_in">set</span> password=password(<span class="hljs-string">&quot;Jimmy!1@2#3&quot;</span>);</span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">修改密码策略</span><br><span class="hljs-meta prompt_">mysql&gt; </span><span class="language-bash"><span class="hljs-built_in">set</span> global validate_password_length=4;</span><br><span class="hljs-meta prompt_">mysql&gt; </span><span class="language-bash"><span class="hljs-built_in">set</span> global validate_password_policy=0;</span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">设置简单密码</span><br><span class="hljs-meta prompt_">mysql&gt; </span><span class="language-bash"><span class="hljs-built_in">set</span> password=password(<span class="hljs-string">&quot;1qazxsw2&quot;</span>);</span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">进入mysql库修改Host</span><br><span class="hljs-meta prompt_">mysql&gt; </span><span class="language-bash">use mysql;</span><br><span class="hljs-meta prompt_">mysql&gt; </span><span class="language-bash">update user <span class="hljs-built_in">set</span> host=<span class="hljs-string">&quot;%&quot;</span> <span class="hljs-built_in">where</span> user=<span class="hljs-string">&quot;root&quot;</span>;</span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">刷新并退出</span><br><span class="hljs-meta prompt_">mysql&gt; </span><span class="language-bash">flush privileges;</span><br><span class="hljs-meta prompt_">mysql&gt; </span><span class="language-bash">quit;</span><br></code></pre></td></tr></table></figure><p><img src="https://jimmy-blog-images.oss-cn-shanghai.aliyuncs.com/img/bigdata/hivechange-mysql.png"></p><h4 id="2、安装hive"><a href="#2、安装hive" class="headerlink" title="2、安装hive"></a>2、安装hive</h4><p>安装完Mysql驱动后安装Hive的安装包</p><h5 id="1、安装Hive并配置环境变量"><a href="#1、安装Hive并配置环境变量" class="headerlink" title="1、安装Hive并配置环境变量"></a>1、安装Hive并配置环境变量</h5><p>脚本内容</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs shell">echo &quot;-------解压Hive的安装包-------&quot;<br>mkdir /opt/module/hive312<br>tar -zxvf /opt/software/hive/apache-hive-3.1.2-bin.tar.gz -C /opt/module/hive312<br>echo &quot;-------重命名Hive解压包-------&quot;<br>mv /opt/module/apache-hive-3.1.2-bin/ /opt/module/hive312<br><br>echo &quot;-------配置Hive的环境变量-------&quot;<br>echo &quot;&quot; &gt;&gt; /etc/profile.d/my_env.sh<br>echo &quot;#Hive environment&quot; &gt;&gt; /etc/profile.d/my_env.sh<br>echo &quot;export HIVE_HOME=/opt/module/hive312&quot; &gt;&gt; /etc/profile.d/my_env.sh<br>echo &quot;export PATH=\$PATH:\$&#123;HIVE_HOME&#125;/bin&quot; &gt;&gt; /etc/profile.d/my_env.sh<br><br>   echo &quot;-------解决日志Jar包冲突-------&quot;<br>mv /opt/module/hive312/lib/log4j-slf4j-impl-2.10.0.jar /opt/module/hive312/lib/log4j-slf4j-impl-2.10.0.bak<br><br>echo &quot;-------拷贝Mysql驱动放到Hive下-------&quot;<br>cp /opt/software/hive/mysql-connector-java-5.1.48.jar /opt/module/hive312/lib<br></code></pre></td></tr></table></figure><p>执行脚本命令</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">sh hive-install.sh 2<br></code></pre></td></tr></table></figure><p>备注：配置了环境变量重新刷新后进入，不然环境变量不生效</p><h5 id="2、配置Metastore到Mysql"><a href="#2、配置Metastore到Mysql" class="headerlink" title="2、配置Metastore到Mysql"></a>2、配置Metastore到Mysql</h5><p>脚本内容</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><code class="hljs shell">echo &quot;-------配置Hive Metastore元数据-------&quot;<br>cd $HIVE_HOME/conf/<br>rm -rf hive-site.xml<br>sudo touch hive-site.xml<br>echo &#x27;&lt;?xml version=&quot;1.0&quot;?&gt;&#x27;  &gt;&gt; $HIVE_HOME/conf/hive-site.xml<br>echo &#x27;&lt;?xml-stylesheet type=&quot;text/xsl&quot; href=&quot;configuration.xsl&quot;?&gt;&#x27;  &gt;&gt; $HIVE_HOME/conf/hive-site.xml<br>echo &#x27;&lt;configuration&gt;&#x27;  &gt;&gt; $HIVE_HOME/conf/hive-site.xml<br>   echo &#x27;&lt;property&gt;&#x27;  &gt;&gt; $HIVE_HOME/conf/hive-site.xml<br>   echo &#x27;&lt;name&gt;javax.jdo.option.ConnectionURL&lt;/name&gt;&#x27;  &gt;&gt; $HIVE_HOME/conf/hive-site.xml<br>   echo &#x27;&lt;value&gt;jdbc:mysql://hdp101:3306/metastore?useSSL=false&lt;/value&gt;&#x27;  &gt;&gt; $HIVE_HOME/conf/hive-site.xml<br>   echo &#x27;&lt;/property&gt;&#x27;  &gt;&gt; $HIVE_HOME/conf/hive-site.xml<br>   echo &#x27;&lt;property&gt;&#x27;  &gt;&gt; $HIVE_HOME/conf/hive-site.xml<br>   echo &#x27;&lt;name&gt;javax.jdo.option.ConnectionDriverName&lt;/name&gt;&#x27;  &gt;&gt; $HIVE_HOME/conf/hive-site.xml<br>   echo &#x27;&lt;value&gt;com.mysql.jdbc.Driver&lt;/value&gt;&#x27;  &gt;&gt; $HIVE_HOME/conf/hive-site.xml<br>   echo &#x27;&lt;/property&gt;&#x27;  &gt;&gt; $HIVE_HOME/conf/hive-site.xml<br>   echo &#x27;&lt;property&gt;&#x27;  &gt;&gt; $HIVE_HOME/conf/hive-site.xml<br>   echo &#x27;&lt;name&gt;javax.jdo.option.ConnectionUserName&lt;/name&gt;&#x27;  &gt;&gt; $HIVE_HOME/conf/hive-site.xml<br>   echo &#x27;&lt;value&gt;root&lt;/value&gt;&#x27;  &gt;&gt; $HIVE_HOME/conf/hive-site.xml<br>   echo &#x27;&lt;/property&gt;&#x27;  &gt;&gt; $HIVE_HOME/conf/hive-site.xml<br>   echo &#x27;&lt;property&gt;&#x27;  &gt;&gt; $HIVE_HOME/conf/hive-site.xml<br>   echo &#x27;&lt;name&gt;javax.jdo.option.ConnectionPassword&lt;/name&gt;&#x27;  &gt;&gt; $HIVE_HOME/conf/hive-site.xml<br>   echo &#x27;&lt;value&gt;1qazxsw2&lt;/value&gt;&#x27;  &gt;&gt; $HIVE_HOME/conf/hive-site.xml<br>   echo &#x27;&lt;/property&gt;&#x27;  &gt;&gt; $HIVE_HOME/conf/hive-site.xml<br>   echo &#x27;&lt;property&gt;&#x27;  &gt;&gt; $HIVE_HOME/conf/hive-site.xml<br>   echo &#x27;&lt;name&gt;hive.metastore.warehouse.dir&lt;/name&gt;&#x27;  &gt;&gt; $HIVE_HOME/conf/hive-site.xml<br>   echo &#x27;&lt;value&gt;/user/hive/warehouse&lt;/value&gt;&#x27;  &gt;&gt; $HIVE_HOME/conf/hive-site.xml<br>   echo &#x27;&lt;/property&gt;&#x27;  &gt;&gt; $HIVE_HOME/conf/hive-site.xml<br>   echo &#x27;&lt;property&gt;&#x27;  &gt;&gt; $HIVE_HOME/conf/hive-site.xml<br>   echo &#x27;&lt;name&gt;hive.metastore.schema.verification&lt;/name&gt;&#x27;  &gt;&gt; $HIVE_HOME/conf/hive-site.xml<br>   echo &#x27;&lt;value&gt;false&lt;/value&gt;&#x27;  &gt;&gt; $HIVE_HOME/conf/hive-site.xml<br>   echo &#x27;&lt;/property&gt;&#x27;  &gt;&gt; $HIVE_HOME/conf/hive-site.xml<br>   echo &#x27;&lt;property&gt;&#x27;  &gt;&gt; $HIVE_HOME/conf/hive-site.xml<br>   echo &#x27;&lt;name&gt;hive.metastore.uris&lt;/name&gt;&#x27;  &gt;&gt; $HIVE_HOME/conf/hive-site.xml<br>   echo &#x27;&lt;value&gt;thrift://hdp101:9083&lt;/value&gt;&#x27;  &gt;&gt; $HIVE_HOME/conf/hive-site.xml<br>   echo &#x27;&lt;/property&gt;&#x27;  &gt;&gt; $HIVE_HOME/conf/hive-site.xml<br>   echo &#x27;&lt;property&gt;&#x27;  &gt;&gt; $HIVE_HOME/conf/hive-site.xml<br>   echo &#x27;&lt;name&gt;hive.server2.thrift.port&lt;/name&gt;&#x27;  &gt;&gt; $HIVE_HOME/conf/hive-site.xml<br>   echo &#x27;&lt;value&gt;10000&lt;/value&gt;&#x27;  &gt;&gt; $HIVE_HOME/conf/hive-site.xml<br>   echo &#x27;&lt;/property&gt;&#x27;  &gt;&gt; $HIVE_HOME/conf/hive-site.xml<br>   echo &#x27;&lt;property&gt;&#x27;  &gt;&gt; $HIVE_HOME/conf/hive-site.xml<br>   echo &#x27;&lt;name&gt;hive.server2.thrift.bind.host&lt;/name&gt;&#x27;  &gt;&gt; $HIVE_HOME/conf/hive-site.xml<br>   echo &#x27;&lt;value&gt;hdp101&lt;/value&gt;&#x27;  &gt;&gt; $HIVE_HOME/conf/hive-site.xml<br>   echo &#x27;&lt;/property&gt;&#x27;  &gt;&gt; $HIVE_HOME/conf/hive-site.xml<br>   echo &#x27;&lt;property&gt;&#x27;  &gt;&gt; $HIVE_HOME/conf/hive-site.xml<br>   echo &#x27;&lt;name&gt;hive.metastore.event.db.notification.api.auth&lt;/name&gt;&#x27;  &gt;&gt; $HIVE_HOME/conf/hive-site.xml<br>   echo &#x27;&lt;value&gt;false&lt;/value&gt;&#x27;  &gt;&gt; $HIVE_HOME/conf/hive-site.xml<br>   echo &#x27;&lt;/property&gt;&#x27;  &gt;&gt; $HIVE_HOME/conf/hive-site.xml<br><span class="hljs-meta prompt_"># </span><span class="language-bash">修改Hive的计算引擎</span><br>echo &quot;-------修改Hive的计算引擎-------&quot;<br>echo &#x27;&lt;property&gt;&#x27;  &gt;&gt; $HIVE_HOME/conf/hive-site.xml<br>   echo &#x27;&lt;name&gt;hive.execution.engine&lt;/name&gt;&#x27;  &gt;&gt; $HIVE_HOME/conf/hive-site.xml<br>   echo &#x27;&lt;value&gt;tez&lt;/value&gt;&#x27;  &gt;&gt; $HIVE_HOME/conf/hive-site.xml<br>echo &#x27;&lt;/property&gt;&#x27;  &gt;&gt; $HIVE_HOME/conf/hive-site.xml<br>echo &#x27;&lt;property&gt;&#x27;  &gt;&gt; $HIVE_HOME/conf/hive-site.xml<br>   echo &#x27;&lt;name&gt;hive.tez.container.size&lt;/name&gt;&#x27;  &gt;&gt; $HIVE_HOME/conf/hive-site.xml<br>   echo &#x27;&lt;value&gt;1024&lt;/value&gt;&#x27;  &gt;&gt; $HIVE_HOME/conf/hive-site.xml<br>echo &#x27;&lt;/property&gt;&#x27;  &gt;&gt; $HIVE_HOME/conf/hive-site.xml<br>echo &#x27;&lt;/configuration&gt;&#x27;  &gt;&gt; $HIVE_HOME/conf/hive-site.xml<br></code></pre></td></tr></table></figure><p>执行脚本命令</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">sh hive-install.sh 3<br></code></pre></td></tr></table></figure><h5 id="3、安装tez并配置"><a href="#3、安装tez并配置" class="headerlink" title="3、安装tez并配置"></a>3、安装tez并配置</h5><p>备注：<font color="red">安装tez的时候先启动Hadoop集群</font><br>脚本内容</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><code class="hljs shell">echo &quot;-------安装tez-------&quot;<br>mkdir /opt/module/tez<br>tar -zxvf /opt/software/hive/tez-0.10.1-SNAPSHOT.tar.gz -C /opt/module/tez<br>echo &quot;-------上传tez依赖到HDFS-------&quot;<br>`hadoop fs -mkdir /tez`<br>`hadoop fs -put /opt/software/hive/tez-0.10.1-SNAPSHOT.tar.gz /tez`<br>echo &quot;-------配置tez-site文件-------&quot;<br>cd $HADOOP_HOME/etc/hadoop<br>rm -rf tez-site.xml<br>sudo touch tez-site.xml<br>echo &#x27;&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;&#x27;  &gt;&gt; $HADOOP_HOME/etc/hadoop/tez-site.xml<br>echo &#x27;&lt;?xml-stylesheet type=&quot;text/xsl&quot; href=&quot;configuration.xsl&quot;?&gt;&#x27;  &gt;&gt; $HADOOP_HOME/etc/hadoop/tez-site.xml<br>echo &#x27;&lt;configuration&gt;&#x27;  &gt;&gt; $HADOOP_HOME/etc/hadoop/tez-site.xml<br>echo &#x27;&lt;property&gt;&#x27;  &gt;&gt; $HADOOP_HOME/etc/hadoop/tez-site.xml<br>echo &#x27;&lt;name&gt;tez.lib.uris&lt;/name&gt;&#x27;  &gt;&gt; $HADOOP_HOME/etc/hadoop/tez-site.xml<br>echo &#x27;&lt;value&gt;$&#123;fs.defaultFS&#125;/tez/tez-0.10.1-SNAPSHOT.tar.gz&lt;/value&gt;&#x27;  &gt;&gt; $HADOOP_HOME/etc/hadoop/tez-site.xml<br>echo &#x27;&lt;/property&gt;&#x27;  &gt;&gt; $HADOOP_HOME/etc/hadoop/tez-site.xml<br>echo &#x27;&lt;property&gt;&#x27;  &gt;&gt; $HADOOP_HOME/etc/hadoop/tez-site.xml<br>echo &#x27;&lt;name&gt;tez.use.cluster.hadoop-libs&lt;/name&gt;&#x27;  &gt;&gt; $HADOOP_HOME/etc/hadoop/tez-site.xml<br>echo &#x27;&lt;value&gt;true&lt;/value&gt;&#x27;  &gt;&gt; $HADOOP_HOME/etc/hadoop/tez-site.xml<br>echo &#x27;&lt;/property&gt;&#x27;  &gt;&gt; $HADOOP_HOME/etc/hadoop/tez-site.xml<br>echo &#x27;&lt;property&gt;&#x27;  &gt;&gt; $HADOOP_HOME/etc/hadoop/tez-site.xml<br>echo &#x27;&lt;name&gt;tez.am.resource.memory.mb&lt;/name&gt;&#x27;  &gt;&gt; $HADOOP_HOME/etc/hadoop/tez-site.xml<br>echo &#x27;&lt;value&gt;1024&lt;/value&gt;&#x27;  &gt;&gt; $HADOOP_HOME/etc/hadoop/tez-site.xml<br>echo &#x27;&lt;/property&gt;&#x27;  &gt;&gt; $HADOOP_HOME/etc/hadoop/tez-site.xml<br>echo &#x27;&lt;property&gt;&#x27;  &gt;&gt; $HADOOP_HOME/etc/hadoop/tez-site.xml<br>echo &#x27;&lt;name&gt;tez.am.resource.cpu.vcores&lt;/name&gt;&#x27;  &gt;&gt; $HADOOP_HOME/etc/hadoop/tez-site.xml<br>echo &#x27;&lt;value&gt;1&lt;/value&gt;&#x27;  &gt;&gt; $HADOOP_HOME/etc/hadoop/tez-site.xml<br>echo &#x27;&lt;/property&gt;&#x27;  &gt;&gt; $HADOOP_HOME/etc/hadoop/tez-site.xml<br>echo &#x27;&lt;property&gt;&#x27;  &gt;&gt; $HADOOP_HOME/etc/hadoop/tez-site.xml<br>echo &#x27;&lt;name&gt;tez.container.max.java.heap.fraction&lt;/name&gt;&#x27;  &gt;&gt; $HADOOP_HOME/etc/hadoop/tez-site.xml<br>echo &#x27;&lt;value&gt;0.4&lt;/value&gt;&#x27;  &gt;&gt; $HADOOP_HOME/etc/hadoop/tez-site.xml<br>echo &#x27;&lt;/property&gt;&#x27;  &gt;&gt; $HADOOP_HOME/etc/hadoop/tez-site.xml<br>echo &#x27;&lt;property&gt;&#x27;  &gt;&gt; $HADOOP_HOME/etc/hadoop/tez-site.xml<br>echo &#x27;&lt;name&gt;tez.task.resource.memory.mb&lt;/name&gt;&#x27;  &gt;&gt; $HADOOP_HOME/etc/hadoop/tez-site.xml<br>echo &#x27;&lt;value&gt;1024&lt;/value&gt;&#x27;  &gt;&gt; $HADOOP_HOME/etc/hadoop/tez-site.xml<br>echo &#x27;&lt;/property&gt;&#x27;  &gt;&gt; $HADOOP_HOME/etc/hadoop/tez-site.xml<br>echo &#x27;&lt;property&gt;&#x27;  &gt;&gt; $HADOOP_HOME/etc/hadoop/tez-site.xml<br>echo &#x27;&lt;name&gt;tez.task.resource.cpu.vcores&lt;/name&gt;&#x27;  &gt;&gt; $HADOOP_HOME/etc/hadoop/tez-site.xml<br>echo &#x27;&lt;value&gt;1&lt;/value&gt;&#x27;  &gt;&gt; $HADOOP_HOME/etc/hadoop/tez-site.xml<br>echo &#x27;&lt;/property&gt;&#x27;  &gt;&gt; $HADOOP_HOME/etc/hadoop/tez-site.xml<br>echo &#x27;&lt;/configuration&gt;&#x27;  &gt;&gt; $HADOOP_HOME/etc/hadoop/tez-site.xml<br><br>echo &quot;-------修改Hadoop环境变量-------&quot;<br>echo &quot;export TEZ_CONF_DIR=\$HADOOP_HOME/etc/hadoop&quot; &gt;&gt; $HADOOP_HOME/etc/hadoop/hadoop-env.sh<br>echo &quot;export TEZ_JARS=/opt/module/tez&quot; &gt;&gt; $HADOOP_HOME/etc/hadoop/hadoop-env.sh<br>echo &quot;export HADOOP_CLASSPATH=\$HADOOP_CLASSPATH:\$&#123;TEZ_CONF_DIR&#125;:\$&#123;TEZ_JARS&#125;/*:\$&#123;TEZ_JARS&#125;/lib/*&quot; &gt;&gt; $HADOOP_HOME/etc/hadoop/hadoop-env.sh<br><br>echo &quot;-------解决jar包冲突，删除tez的日志jar-------&quot;<br>rm /opt/module/tez/lib/slf4j-log4j12-1.7.10.jar<br></code></pre></td></tr></table></figure><p>执行脚本命令</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">sh hive-install.sh 4<br></code></pre></td></tr></table></figure><p><img src="https://jimmy-blog-images.oss-cn-shanghai.aliyuncs.com/img/bigdata/hivetez%E4%B8%8A%E4%BC%A0%E5%88%B0hdfs.png"></p><h5 id="4、启动停止Hive"><a href="#4、启动停止Hive" class="headerlink" title="4、启动停止Hive"></a>4、启动停止Hive</h5><p>1、新建Hive的元数据库</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta prompt_"># </span><span class="language-bash">登录Mysql数据库</span><br>mysql -uroot -p1qazxsw2<br><span class="hljs-meta prompt_"># </span><span class="language-bash">新建Hive元数据库 metastore 是在hive-site.xml中配置的</span><br><span class="hljs-meta prompt_">mysql&gt; </span><span class="language-bash">create database metastore;</span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">刷新并退出</span><br><span class="hljs-meta prompt_">mysql&gt; </span><span class="language-bash">quit;</span><br></code></pre></td></tr></table></figure><p>2、初始化元数据库</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs shell">cd /opt/module/hive312/bin/<br>schematool -initSchema -dbType mysql -verbose<br></code></pre></td></tr></table></figure><p><img src="https://jimmy-blog-images.oss-cn-shanghai.aliyuncs.com/img/bigdata/hivehive%E7%9A%84%E5%85%83%E6%95%B0%E6%8D%AE%E5%BA%93.png"><br>3、启动Hive命令<br>脚本内容</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs shell">echo &quot;-------启动Hive-------&quot;<br>HIVE_LOG_DIR=$HIVE_HOME/logs<br>mkdir -p $HIVE_LOG_DIR<br>metapid=$(check_process HiveMetastore 9083)<br>   cmd=&quot;nohup hive --service metastore &gt;$HIVE_LOG_DIR/metastore.log 2&gt;&amp;1 &amp;&quot;<br>   cmd=$cmd&quot; sleep 4; hdfs dfsadmin -safemode wait &gt;/dev/null 2&gt;&amp;1&quot;<br>   [ -z &quot;$metapid&quot; ] &amp;&amp; eval $cmd || echo &quot;-------Metastroe服务已启动-------&quot;<br>   server2pid=$(check_process HiveServer2 10000)<br>   cmd=&quot;nohup hive --service hiveserver2 &gt;$HIVE_LOG_DIR/hiveServer2.log 2&gt;&amp;1 &amp;&quot;<br>   [ -z &quot;$server2pid&quot; ] &amp;&amp; eval $cmd || echo &quot;-------HiveServer2服务已启动-------&quot;<br></code></pre></td></tr></table></figure><p>执行脚本命令</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">sh hive-install.sh 5<br></code></pre></td></tr></table></figure><p>4、停止Hive命令<br>脚本内容</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs shell">echo &quot;-------关闭Hive-------&quot;<br>   metapid=$(check_process HiveMetastore 9083)<br>   [ &quot;$metapid&quot; ] &amp;&amp; kill $metapid || echo &quot;-------Metastore服务已关闭-------&quot;<br>   server2pid=$(check_process HiveServer2 10000)<br>   [ &quot;$server2pid&quot; ] &amp;&amp; kill $server2pid || echo &quot;-------HiveServer2服务已关闭-------&quot;<br></code></pre></td></tr></table></figure><p>执行脚本命令</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">sh hive-install.sh 6<br></code></pre></td></tr></table></figure><p>5、重启Hive命令<br>执行脚本命令</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">sh hive-install.sh 7<br></code></pre></td></tr></table></figure><p>6、更改Hive的日志路径</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs awk">cd <span class="hljs-regexp">/opt/m</span>odule<span class="hljs-regexp">/hive312/</span>conf<br>mv hive-log4j2.properties.template hive-log4j2.properties<br>vim hive-log4j2.properties<br><span class="hljs-comment"># 修改后重启Hive</span><br>property.hive.log.dir = <span class="hljs-regexp">/opt/m</span>odule<span class="hljs-regexp">/hive312/</span>logs<br></code></pre></td></tr></table></figure><h3 id="三、Hive一键部署脚本"><a href="#三、Hive一键部署脚本" class="headerlink" title="三、Hive一键部署脚本"></a>三、Hive一键部署脚本</h3><p>脚本内容</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta prompt_">#</span><span class="language-bash">!/bin/bash</span><br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">卸载原有的mysql</span><br>uninstall_mysql() &#123; <br>echo &quot;-------删除原有的mysql-------&quot;<br>systemctl stop mysqld<br>service mysql stop 2&gt;/dev/null<br>service mysqld stop 2&gt;/dev/null<br>rpm -qa | grep -i mysql | xargs -n1 rpm -e --nodeps 2&gt;/dev/null<br>rpm -qa | grep -i mariadb | xargs -n1 rpm -e --nodeps 2&gt;/dev/null<br>rm -rf /var/lib/mysql<br>rm -rf /usr/lib64/mysql<br>rm -rf /etc/my.cnf<br>rm -rf /usr/my.cnf<br>rm -rf /var/log/mysqld.log<br>&#125;<br><span class="hljs-meta prompt_"># </span><span class="language-bash">安装mysql驱动包</span><br>install_mysql() &#123;<br>cd /opt/software/hive<br>echo &quot;-------安装mysql依赖-------&quot;<br>rpm -ivh 01_mysql-community-common-5.7.29-1.el7.x86_64.rpm<br>rpm -ivh 02_mysql-community-libs-5.7.29-1.el7.x86_64.rpm<br>rpm -ivh 03_mysql-community-libs-compat-5.7.29-1.el7.x86_64.rpm<br><br>echo &quot;-------安装mysql-client-------&quot;<br>rpm -ivh 04_mysql-community-client-5.7.29-1.el7.x86_64.rpm<br><br>echo &quot;-------安装mysql-server-------&quot;<br>rpm -ivh 05_mysql-community-server-5.7.29-1.el7.x86_64.rpm<br><br>echo &quot;-------启动mysql-------&quot;<br>systemctl start mysqld<br><br>password=`cat /var/log/mysqld.log | grep password`<br>password1=`echo $&#123;password#*localhost: &#125;`<br>echo &quot;-------mysql 初始密码-------&quot; $password1<br><br>echo &quot;-------登录mysql-------&quot;<br>mysql -uroot -p$password1<br>&#125;<br><span class="hljs-meta prompt_"># </span><span class="language-bash">安装hive</span><br>install_hive() &#123;<br>echo &quot;-------解压Hive的安装包-------&quot;<br>tar -zxvf /opt/software/hive/apache-hive-3.1.2-bin.tar.gz -C /opt/module/<br>echo &quot;-------重命名Hive解压包-------&quot;<br>mv /opt/module/apache-hive-3.1.2-bin/ /opt/module/hive312<br><br>echo &quot;-------配置Hive的环境变量-------&quot;<br>echo &quot;&quot; &gt;&gt; /etc/profile.d/my_env.sh<br>echo &quot;#Hive environment&quot; &gt;&gt; /etc/profile.d/my_env.sh<br>echo &quot;export HIVE_HOME=/opt/module/hive312&quot; &gt;&gt; /etc/profile.d/my_env.sh<br>echo &quot;export PATH=\$PATH:\$&#123;HIVE_HOME&#125;/bin&quot; &gt;&gt; /etc/profile.d/my_env.sh<br><br>echo &quot;-------解决日志Jar包冲突-------&quot;<br>mv /opt/module/hive312/lib/log4j-slf4j-impl-2.10.0.jar /opt/module/hive312/lib/log4j-slf4j-impl-2.10.0.bak<br><br>echo &quot;-------拷贝Mysql驱动放到Hive下-------&quot;<br>cp /opt/software/hive/mysql-connector-java-5.1.48.jar /opt/module/hive312/lib<br>&#125;<br><span class="hljs-meta prompt_"># </span><span class="language-bash">配置Hive Metastore元数据</span><br>hive_config() &#123;<br>echo &quot;-------配置Hive Metastore元数据-------&quot;<br>HIVE_HOME=/opt/module/hive312<br>cd $HIVE_HOME/conf/<br>rm -rf hive-site.xml<br>sudo touch hive-site.xml<br>echo &#x27;&lt;?xml version=&quot;1.0&quot;?&gt;&#x27;  &gt;&gt; $HIVE_HOME/conf/hive-site.xml<br>echo &#x27;&lt;?xml-stylesheet type=&quot;text/xsl&quot; href=&quot;configuration.xsl&quot;?&gt;&#x27;  &gt;&gt; $HIVE_HOME/conf/hive-site.xml<br>echo &#x27;&lt;configuration&gt;&#x27;  &gt;&gt; $HIVE_HOME/conf/hive-site.xml<br><span class="hljs-meta prompt_"># </span><span class="language-bash">Hive元数据库名称metastore</span><br>    echo &#x27;&lt;property&gt;&#x27;  &gt;&gt; $HIVE_HOME/conf/hive-site.xml<br>    echo &#x27;&lt;name&gt;javax.jdo.option.ConnectionURL&lt;/name&gt;&#x27;  &gt;&gt; $HIVE_HOME/conf/hive-site.xml<br>    echo &#x27;&lt;value&gt;jdbc:mysql://hdp101:3306/metastore?useSSL=false&lt;/value&gt;&#x27;  &gt;&gt; $HIVE_HOME/conf/hive-site.xml<br>    echo &#x27;&lt;/property&gt;&#x27;  &gt;&gt; $HIVE_HOME/conf/hive-site.xml<br>    echo &#x27;&lt;property&gt;&#x27;  &gt;&gt; $HIVE_HOME/conf/hive-site.xml<br>    echo &#x27;&lt;name&gt;javax.jdo.option.ConnectionDriverName&lt;/name&gt;&#x27;  &gt;&gt; $HIVE_HOME/conf/hive-site.xml<br>    echo &#x27;&lt;value&gt;com.mysql.jdbc.Driver&lt;/value&gt;&#x27;  &gt;&gt; $HIVE_HOME/conf/hive-site.xml<br>    echo &#x27;&lt;/property&gt;&#x27;  &gt;&gt; $HIVE_HOME/conf/hive-site.xml<br>    echo &#x27;&lt;property&gt;&#x27;  &gt;&gt; $HIVE_HOME/conf/hive-site.xml<br>    echo &#x27;&lt;name&gt;javax.jdo.option.ConnectionUserName&lt;/name&gt;&#x27;  &gt;&gt; $HIVE_HOME/conf/hive-site.xml<br>    echo &#x27;&lt;value&gt;root&lt;/value&gt;&#x27;  &gt;&gt; $HIVE_HOME/conf/hive-site.xml<br>    echo &#x27;&lt;/property&gt;&#x27;  &gt;&gt; $HIVE_HOME/conf/hive-site.xml<br>    echo &#x27;&lt;property&gt;&#x27;  &gt;&gt; $HIVE_HOME/conf/hive-site.xml<br>    echo &#x27;&lt;name&gt;javax.jdo.option.ConnectionPassword&lt;/name&gt;&#x27;  &gt;&gt; $HIVE_HOME/conf/hive-site.xml<br>    echo &#x27;&lt;value&gt;1qazxsw2&lt;/value&gt;&#x27;  &gt;&gt; $HIVE_HOME/conf/hive-site.xml<br>    echo &#x27;&lt;/property&gt;&#x27;  &gt;&gt; $HIVE_HOME/conf/hive-site.xml<br>    echo &#x27;&lt;property&gt;&#x27;  &gt;&gt; $HIVE_HOME/conf/hive-site.xml<br>    echo &#x27;&lt;name&gt;hive.metastore.warehouse.dir&lt;/name&gt;&#x27;  &gt;&gt; $HIVE_HOME/conf/hive-site.xml<br>    echo &#x27;&lt;value&gt;/user/hive/warehouse&lt;/value&gt;&#x27;  &gt;&gt; $HIVE_HOME/conf/hive-site.xml<br>    echo &#x27;&lt;/property&gt;&#x27;  &gt;&gt; $HIVE_HOME/conf/hive-site.xml<br>    echo &#x27;&lt;property&gt;&#x27;  &gt;&gt; $HIVE_HOME/conf/hive-site.xml<br>    echo &#x27;&lt;name&gt;hive.metastore.schema.verification&lt;/name&gt;&#x27;  &gt;&gt; $HIVE_HOME/conf/hive-site.xml<br>    echo &#x27;&lt;value&gt;false&lt;/value&gt;&#x27;  &gt;&gt; $HIVE_HOME/conf/hive-site.xml<br>    echo &#x27;&lt;/property&gt;&#x27;  &gt;&gt; $HIVE_HOME/conf/hive-site.xml<br>    echo &#x27;&lt;property&gt;&#x27;  &gt;&gt; $HIVE_HOME/conf/hive-site.xml<br>    echo &#x27;&lt;name&gt;hive.metastore.uris&lt;/name&gt;&#x27;  &gt;&gt; $HIVE_HOME/conf/hive-site.xml<br>    echo &#x27;&lt;value&gt;thrift://hdp101:9083&lt;/value&gt;&#x27;  &gt;&gt; $HIVE_HOME/conf/hive-site.xml<br>    echo &#x27;&lt;/property&gt;&#x27;  &gt;&gt; $HIVE_HOME/conf/hive-site.xml<br>    echo &#x27;&lt;property&gt;&#x27;  &gt;&gt; $HIVE_HOME/conf/hive-site.xml<br>    echo &#x27;&lt;name&gt;hive.server2.thrift.port&lt;/name&gt;&#x27;  &gt;&gt; $HIVE_HOME/conf/hive-site.xml<br>    echo &#x27;&lt;value&gt;10000&lt;/value&gt;&#x27;  &gt;&gt; $HIVE_HOME/conf/hive-site.xml<br>    echo &#x27;&lt;/property&gt;&#x27;  &gt;&gt; $HIVE_HOME/conf/hive-site.xml<br>    echo &#x27;&lt;property&gt;&#x27;  &gt;&gt; $HIVE_HOME/conf/hive-site.xml<br>    echo &#x27;&lt;name&gt;hive.server2.thrift.bind.host&lt;/name&gt;&#x27;  &gt;&gt; $HIVE_HOME/conf/hive-site.xml<br>    echo &#x27;&lt;value&gt;hdp101&lt;/value&gt;&#x27;  &gt;&gt; $HIVE_HOME/conf/hive-site.xml<br>    echo &#x27;&lt;/property&gt;&#x27;  &gt;&gt; $HIVE_HOME/conf/hive-site.xml<br>    echo &#x27;&lt;property&gt;&#x27;  &gt;&gt; $HIVE_HOME/conf/hive-site.xml<br>    echo &#x27;&lt;name&gt;hive.metastore.event.db.notification.api.auth&lt;/name&gt;&#x27;  &gt;&gt; $HIVE_HOME/conf/hive-site.xml<br>    echo &#x27;&lt;value&gt;false&lt;/value&gt;&#x27;  &gt;&gt; $HIVE_HOME/conf/hive-site.xml<br>    echo &#x27;&lt;/property&gt;&#x27;  &gt;&gt; $HIVE_HOME/conf/hive-site.xml<br><span class="hljs-meta prompt_"># </span><span class="language-bash">修改Hive的计算引擎</span><br>echo &quot;-------修改Hive的计算引擎-------&quot;<br>echo &#x27;&lt;property&gt;&#x27;  &gt;&gt; $HIVE_HOME/conf/hive-site.xml<br>    echo &#x27;&lt;name&gt;hive.execution.engine&lt;/name&gt;&#x27;  &gt;&gt; $HIVE_HOME/conf/hive-site.xml<br>    echo &#x27;&lt;value&gt;tez&lt;/value&gt;&#x27;  &gt;&gt; $HIVE_HOME/conf/hive-site.xml<br>echo &#x27;&lt;/property&gt;&#x27;  &gt;&gt; $HIVE_HOME/conf/hive-site.xml<br>echo &#x27;&lt;property&gt;&#x27;  &gt;&gt; $HIVE_HOME/conf/hive-site.xml<br>    echo &#x27;&lt;name&gt;hive.tez.container.size&lt;/name&gt;&#x27;  &gt;&gt; $HIVE_HOME/conf/hive-site.xml<br>    echo &#x27;&lt;value&gt;1024&lt;/value&gt;&#x27;  &gt;&gt; $HIVE_HOME/conf/hive-site.xml<br>echo &#x27;&lt;/property&gt;&#x27;  &gt;&gt; $HIVE_HOME/conf/hive-site.xml<br>echo &#x27;&lt;/configuration&gt;&#x27;  &gt;&gt; $HIVE_HOME/conf/hive-site.xml<br><br>&#125;<br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">安装tez并配置</span><br>install_tez() &#123;<br>echo &quot;-------安装tez-------&quot;<br>mkdir /opt/module/tez<br>tar -zxvf /opt/software/hive/tez-0.10.1-SNAPSHOT.tar.gz -C /opt/module/tez<br>echo &quot;-------上传tez依赖到HDFS-------&quot;<br>`hadoop fs -mkdir /tez`<br>`hadoop fs -put /opt/software/hive/tez-0.10.1-SNAPSHOT.tar.gz /tez`<br>echo &quot;-------配置tez-site文件-------&quot;<br>cd $HADOOP_HOME/etc/hadoop<br>rm -rf tez-site.xml<br>sudo touch tez-site.xml<br>echo &#x27;&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;&#x27;  &gt;&gt; $HADOOP_HOME/etc/hadoop/tez-site.xml<br>echo &#x27;&lt;?xml-stylesheet type=&quot;text/xsl&quot; href=&quot;configuration.xsl&quot;?&gt;&#x27;  &gt;&gt; $HADOOP_HOME/etc/hadoop/tez-site.xml<br>echo &#x27;&lt;configuration&gt;&#x27;  &gt;&gt; $HADOOP_HOME/etc/hadoop/tez-site.xml<br>echo &#x27;&lt;property&gt;&#x27;  &gt;&gt; $HADOOP_HOME/etc/hadoop/tez-site.xml<br>echo &#x27;&lt;name&gt;tez.lib.uris&lt;/name&gt;&#x27;  &gt;&gt; $HADOOP_HOME/etc/hadoop/tez-site.xml<br>echo &#x27;&lt;value&gt;$&#123;fs.defaultFS&#125;/tez/tez-0.10.1-SNAPSHOT.tar.gz&lt;/value&gt;&#x27;  &gt;&gt; $HADOOP_HOME/etc/hadoop/tez-site.xml<br>echo &#x27;&lt;/property&gt;&#x27;  &gt;&gt; $HADOOP_HOME/etc/hadoop/tez-site.xml<br>echo &#x27;&lt;property&gt;&#x27;  &gt;&gt; $HADOOP_HOME/etc/hadoop/tez-site.xml<br>echo &#x27;&lt;name&gt;tez.use.cluster.hadoop-libs&lt;/name&gt;&#x27;  &gt;&gt; $HADOOP_HOME/etc/hadoop/tez-site.xml<br>echo &#x27;&lt;value&gt;true&lt;/value&gt;&#x27;  &gt;&gt; $HADOOP_HOME/etc/hadoop/tez-site.xml<br>echo &#x27;&lt;/property&gt;&#x27;  &gt;&gt; $HADOOP_HOME/etc/hadoop/tez-site.xml<br>echo &#x27;&lt;property&gt;&#x27;  &gt;&gt; $HADOOP_HOME/etc/hadoop/tez-site.xml<br>echo &#x27;&lt;name&gt;tez.am.resource.memory.mb&lt;/name&gt;&#x27;  &gt;&gt; $HADOOP_HOME/etc/hadoop/tez-site.xml<br>echo &#x27;&lt;value&gt;1024&lt;/value&gt;&#x27;  &gt;&gt; $HADOOP_HOME/etc/hadoop/tez-site.xml<br>echo &#x27;&lt;/property&gt;&#x27;  &gt;&gt; $HADOOP_HOME/etc/hadoop/tez-site.xml<br>echo &#x27;&lt;property&gt;&#x27;  &gt;&gt; $HADOOP_HOME/etc/hadoop/tez-site.xml<br>echo &#x27;&lt;name&gt;tez.am.resource.cpu.vcores&lt;/name&gt;&#x27;  &gt;&gt; $HADOOP_HOME/etc/hadoop/tez-site.xml<br>echo &#x27;&lt;value&gt;1&lt;/value&gt;&#x27;  &gt;&gt; $HADOOP_HOME/etc/hadoop/tez-site.xml<br>echo &#x27;&lt;/property&gt;&#x27;  &gt;&gt; $HADOOP_HOME/etc/hadoop/tez-site.xml<br>echo &#x27;&lt;property&gt;&#x27;  &gt;&gt; $HADOOP_HOME/etc/hadoop/tez-site.xml<br>echo &#x27;&lt;name&gt;tez.container.max.java.heap.fraction&lt;/name&gt;&#x27;  &gt;&gt; $HADOOP_HOME/etc/hadoop/tez-site.xml<br>echo &#x27;&lt;value&gt;0.4&lt;/value&gt;&#x27;  &gt;&gt; $HADOOP_HOME/etc/hadoop/tez-site.xml<br>echo &#x27;&lt;/property&gt;&#x27;  &gt;&gt; $HADOOP_HOME/etc/hadoop/tez-site.xml<br>echo &#x27;&lt;property&gt;&#x27;  &gt;&gt; $HADOOP_HOME/etc/hadoop/tez-site.xml<br>echo &#x27;&lt;name&gt;tez.task.resource.memory.mb&lt;/name&gt;&#x27;  &gt;&gt; $HADOOP_HOME/etc/hadoop/tez-site.xml<br>echo &#x27;&lt;value&gt;1024&lt;/value&gt;&#x27;  &gt;&gt; $HADOOP_HOME/etc/hadoop/tez-site.xml<br>echo &#x27;&lt;/property&gt;&#x27;  &gt;&gt; $HADOOP_HOME/etc/hadoop/tez-site.xml<br>echo &#x27;&lt;property&gt;&#x27;  &gt;&gt; $HADOOP_HOME/etc/hadoop/tez-site.xml<br>echo &#x27;&lt;name&gt;tez.task.resource.cpu.vcores&lt;/name&gt;&#x27;  &gt;&gt; $HADOOP_HOME/etc/hadoop/tez-site.xml<br>echo &#x27;&lt;value&gt;1&lt;/value&gt;&#x27;  &gt;&gt; $HADOOP_HOME/etc/hadoop/tez-site.xml<br>echo &#x27;&lt;/property&gt;&#x27;  &gt;&gt; $HADOOP_HOME/etc/hadoop/tez-site.xml<br>echo &#x27;&lt;/configuration&gt;&#x27;  &gt;&gt; $HADOOP_HOME/etc/hadoop/tez-site.xml<br><br>echo &quot;-------修改Hadoop环境变量-------&quot;<br>echo &quot;export TEZ_CONF_DIR=\$HADOOP_HOME/etc/hadoop&quot; &gt;&gt; $HADOOP_HOME/etc/hadoop/hadoop-env.sh<br>echo &quot;export TEZ_JARS=/opt/module/tez&quot; &gt;&gt; $HADOOP_HOME/etc/hadoop/hadoop-env.sh<br>echo &quot;export HADOOP_CLASSPATH=\$HADOOP_CLASSPATH:\$&#123;TEZ_CONF_DIR&#125;:\$&#123;TEZ_JARS&#125;/*:\$&#123;TEZ_JARS&#125;/lib/*&quot; &gt;&gt; $HADOOP_HOME/etc/hadoop/hadoop-env.sh<br><br>echo &quot;-------解决jar包冲突，删除tez的日志jar-------&quot;<br>rm -rf /opt/module/tez/lib/slf4j-log4j12-1.7.10.jar<br>&#125;<br><span class="hljs-meta prompt_">#</span><span class="language-bash">检查进程是否运行正常，参数1为进程名，参数2为进程端口</span><br>function check_process()<br>&#123;<br>    pid=$(ps -ef 2&gt;/dev/null | grep -v grep | grep -i $1 | awk &#x27;&#123;print $2&#125;&#x27;)<br>    ppid=$(netstat -nltp 2&gt;/dev/null | grep $2 | awk &#x27;&#123;print $7&#125;&#x27; | cut -d &#x27;/&#x27; -f 1)<br>    echo $pid<br>    [[ &quot;$pid&quot; =~ &quot;$ppid&quot; ]] &amp;&amp; [ &quot;$ppid&quot; ] &amp;&amp; return 0 || return 1<br>&#125;<br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">启动Hive</span><br>hive_start() &#123;<br>echo &quot;-------启动Hive-------&quot;<br>HIVE_LOG_DIR=$HIVE_HOME/logs<br>mkdir -p $HIVE_LOG_DIR<br>metapid=$(check_process HiveMetastore 9083)<br>    cmd=&quot;nohup hive --service metastore &gt;$HIVE_LOG_DIR/metastore.log 2&gt;&amp;1 &amp;&quot;<br>    cmd=$cmd&quot; sleep 4; hdfs dfsadmin -safemode wait &gt;/dev/null 2&gt;&amp;1&quot;<br>    [ -z &quot;$metapid&quot; ] &amp;&amp; eval $cmd || echo &quot;-------Metastroe服务已启动-------&quot;<br>    server2pid=$(check_process HiveServer2 10000)<br>    cmd=&quot;nohup hive --service hiveserver2 &gt;$HIVE_LOG_DIR/hiveServer2.log 2&gt;&amp;1 &amp;&quot;<br>    [ -z &quot;$server2pid&quot; ] &amp;&amp; eval $cmd || echo &quot;-------HiveServer2服务已启动-------&quot;<br>&#125;<br><span class="hljs-meta prompt_"># </span><span class="language-bash">关闭Hive</span><br>hive_stop() &#123;<br>echo &quot;-------关闭Hive-------&quot;<br>    metapid=$(check_process HiveMetastore 9083)<br>    [ &quot;$metapid&quot; ] &amp;&amp; kill $metapid || echo &quot;-------Metastore服务已关闭-------&quot;<br>    server2pid=$(check_process HiveServer2 10000)<br>    [ &quot;$server2pid&quot; ] &amp;&amp; kill $server2pid || echo &quot;-------HiveServer2服务已关闭-------&quot;<br>&#125;<br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">根据用户的选择进行对应的安装</span><br>custom_option() &#123; <br>case $1 in <br>1)<br>uninstall_mysql<br>install_mysql<br>;;<br>2)<br>install_hive<br>;;<br>3)<br>hive_config<br>;;<br>4)<br>install_tez<br>;;<br>5)<br>hive_start<br>;;<br>6)<br>hive_stop<br>;;<br>7)<br>hive_stop<br>sleep 2<br>hive_start<br>;;<br>*)<br> echo &quot;please option 1~7&quot;<br>esac<br>&#125;<br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">规定<span class="hljs-variable">$1</span>用户安装软件选择[]</span><br>custom_option $1<br></code></pre></td></tr></table></figure><p>执行脚本命令</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta prompt_"># </span><span class="language-bash">不同命令</span><br>1：安装Mysql<br>2：安装Hive<br>3：配置Hive<br>4：安装Tez引擎<br>5：启动Hive<br>6：停止Hive<br>7：重启Hive<br><br>sh hive-install.sh  [1~7]<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>hive</category>
      
    </categories>
    
    
    <tags>
      
      <tag>bigdata,hive</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>【工具】powerdesigner生成excel文件（脚本）</title>
    <link href="/blog/docs/power-desinger-01/tool/power-desinger-01/"/>
    <url>/blog/docs/power-desinger-01/tool/power-desinger-01/</url>
    
    <content type="html"><![CDATA[<blockquote><p>汝之观览，吾之幸也！本文主要讲的是PowerDesigner工具如何导出excel文件、全局赋值comment字段注释</p></blockquote><h4 id="1、导出excel文件"><a href="#1、导出excel文件" class="headerlink" title="1、导出excel文件"></a>1、导出excel文件</h4><p><img src="https://jimmy-blog-images.oss-cn-shanghai.aliyuncs.com/img/tool/power2.png"></p><figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br></pre></td><td class="code"><pre><code class="hljs reasonml">&#x27;将powerdesigner 建好的表导出为excel文件<br>&#x27;<span class="hljs-number">1</span>、使用Ctrl+Shift+X打开编辑页面<br>&#x27;<span class="hljs-number">2</span>、复制以下代码<br>Option Explicit  <br>   Dim rowsNum  <br>   rowsNum = <span class="hljs-number">2</span><br><br>Dim Model  <br>Set Model = ActiveModel  <br>If (Model Is Nothing) Or (Not Model.<span class="hljs-constructor">IsKindOf(PdPDM.<span class="hljs-params">cls_Model</span>)</span>) Then  <br>  <span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">Debug</span>.</span></span>print <span class="hljs-string">&quot;null&quot;</span><br>Else  <br>    &#x27; Get the tables collection  <br>    &#x27;创建EXCEL APP  <br>    dim beginrow  <br>    DIM EXCEL, SHEET  <br>    set EXCEL = <span class="hljs-constructor">CREATEOBJECT(<span class="hljs-string">&quot;Excel.Application&quot;</span>)</span>  <br>    <span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">EXCEL</span>.</span></span>workbooks.add  &#x27;添加工作表  <br>    SET sheet = <span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">EXCEL</span>.</span></span>workbooks(<span class="hljs-number">1</span>).sheets(<span class="hljs-number">1</span>)  <br>    sheet.name =<span class="hljs-string">&quot;数据字典&quot;</span>  <br>   <br>   sheet.<span class="hljs-constructor">Range(<span class="hljs-params">sheet</span>.<span class="hljs-params">cells</span>(1, 1)</span>,sheet.cells(<span class="hljs-number">1</span>, <span class="hljs-number">9</span>)).Merge<br>   sheet.cells(<span class="hljs-number">1</span>, <span class="hljs-number">1</span>) =<span class="hljs-string">&quot;宁波交警数据中台重点车&quot;</span><br>   sheet.<span class="hljs-constructor">Range(<span class="hljs-params">sheet</span>.<span class="hljs-params">cells</span>(1, 1)</span>,sheet.cells(<span class="hljs-number">1</span>, <span class="hljs-number">9</span>)).Interior.Color=rgb(<span class="hljs-number">146</span>,<span class="hljs-number">208</span>,<span class="hljs-number">80</span>)<br>   <br>   rowsNum=<span class="hljs-number">2</span>  <br>   beginrow = rowsNum+<span class="hljs-number">1</span>  <br><br>   Dim tab  <br>   For Each tab In <span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">Model</span>.</span></span>tables  <br>      TableLoop tab,SHEET  <br>   Next<br>    <br>    <br>    <span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">EXCEL</span>.</span></span>visible = <span class="hljs-literal">true</span>  <br>    &#x27;设置列宽和自动换行  <br>    sheet.<span class="hljs-constructor">Columns(1)</span>.ColumnWidth  =<span class="hljs-number">10</span><br>    sheet.<span class="hljs-constructor">Columns(2)</span>.ColumnWidth  =<span class="hljs-number">15</span><br>    sheet.<span class="hljs-constructor">Columns(4)</span>.ColumnWidth  =<span class="hljs-number">20</span><br>    sheet.<span class="hljs-constructor">Columns(5)</span>.ColumnWidth  =<span class="hljs-number">15</span><br>    sheet.<span class="hljs-constructor">Columns(6)</span>.ColumnWidth  =<span class="hljs-number">15</span><br>    <br>    sheet.<span class="hljs-constructor">Columns(<span class="hljs-string">&quot;C:C&quot;</span>)</span>.EntireColumn.AutoFit<br>    sheet.<span class="hljs-constructor">Columns(<span class="hljs-string">&quot;i:i&quot;</span>)</span>.EntireColumn.AutoFit    <br> End If  <br><br>Sub <span class="hljs-constructor">TableLoop(<span class="hljs-params">tab</span>, <span class="hljs-params">sheet</span>)</span>  <br>   If <span class="hljs-constructor">IsObject(<span class="hljs-params">tab</span>)</span> Then  <br>      Dim rangFlag  <br>      rowsNum = rowsNum + <span class="hljs-number">1</span>  <br>      <br>      sheet.cells(rowsNum, <span class="hljs-number">1</span>) = <span class="hljs-string">&quot;表名&quot;</span>  <br>      sheet.<span class="hljs-constructor">Range(<span class="hljs-params">sheet</span>.<span class="hljs-params">cells</span>(<span class="hljs-params">rowsNum</span>, 3)</span>,sheet.cells(rowsNum, <span class="hljs-number">9</span>)).Merge<br>      sheet.cells(rowsNum, <span class="hljs-number">2</span>)=tab.code<br>  sheet.cells(rowsNum, <span class="hljs-number">3</span>)=tab.name<br>      sheet.<span class="hljs-constructor">Range(<span class="hljs-params">sheet</span>.<span class="hljs-params">cells</span>(<span class="hljs-params">rowsNum</span>, 1)</span>,sheet.cells(rowsNum, <span class="hljs-number">9</span>)).Borders.LineStyle = <span class="hljs-string">&quot;1&quot;</span><br>      sheet.<span class="hljs-constructor">Range(<span class="hljs-params">sheet</span>.<span class="hljs-params">cells</span>(<span class="hljs-params">rowsNum</span>, 1)</span>,sheet.cells(rowsNum, <span class="hljs-number">9</span>)).Interior.Color=rgb(<span class="hljs-number">141</span>,<span class="hljs-number">180</span>,<span class="hljs-number">226</span>)<br>      sheet.<span class="hljs-constructor">Range(<span class="hljs-params">sheet</span>.<span class="hljs-params">cells</span>(<span class="hljs-params">rowsNum</span>, 1)</span>,sheet.cells(rowsNum, <span class="hljs-number">9</span>)).Borders.Weight =<span class="hljs-string">&quot;3&quot;</span><br>      <br>      rowsNum = rowsNum + <span class="hljs-number">2</span><br>      sheet.cells(rowsNum, <span class="hljs-number">1</span>) = <span class="hljs-string">&quot;中文名&quot;</span>  <br>      sheet.cells(rowsNum, <span class="hljs-number">2</span>) = <span class="hljs-string">&quot;字段名&quot;</span>  <br>      sheet.cells(rowsNum, <span class="hljs-number">3</span>) = <span class="hljs-string">&quot;类型&quot;</span>  <br>      sheet.cells(rowsNum, <span class="hljs-number">4</span>) = <span class="hljs-string">&quot;长度&quot;</span>  <br>      sheet.cells(rowsNum, <span class="hljs-number">5</span>) = <span class="hljs-string">&quot;主键&quot;</span>  <br>      sheet.cells(rowsNum, <span class="hljs-number">6</span>) = <span class="hljs-string">&quot;索引&quot;</span>  <br>      sheet.cells(rowsNum, <span class="hljs-number">7</span>) = <span class="hljs-string">&quot;不可空&quot;</span>  <br>      sheet.cells(rowsNum, <span class="hljs-number">8</span>) = <span class="hljs-string">&quot;默认值&quot;</span>  <br>      sheet.cells(rowsNum, <span class="hljs-number">9</span>) = <span class="hljs-string">&quot;说明&quot;</span>  <br>      sheet.<span class="hljs-constructor">Range(<span class="hljs-params">sheet</span>.<span class="hljs-params">cells</span>(<span class="hljs-params">rowsNum</span>,1)</span>,sheet.cells(rowsNum,<span class="hljs-number">9</span>)).Interior.Color=rgb(<span class="hljs-number">166</span>,<span class="hljs-number">166</span>,<span class="hljs-number">166</span>)<br>      <br>      Dim col &#x27; running column <br>      Dim colsNum  <br>      colsNum = <span class="hljs-number">0</span>  <br>      <span class="hljs-keyword">for</span> each col <span class="hljs-keyword">in</span> tab.columns  <br>         rowsNum = rowsNum + <span class="hljs-number">1</span>  <br>         colsNum = colsNum + <span class="hljs-number">1</span>  <br>         sheet.cells(rowsNum, <span class="hljs-number">1</span>) = col.name <br>         sheet.cells(rowsNum, <span class="hljs-number">2</span>) = col.code<br>         sheet.cells(rowsNum, <span class="hljs-number">3</span>) = col.datatype<br>         sheet.cells(rowsNum, <span class="hljs-number">4</span>) = <span class="hljs-constructor">IIF(<span class="hljs-params">col</span>.Length&lt;&gt;0,<span class="hljs-params">col</span>.Length,<span class="hljs-string">&quot;&quot;</span>)</span><br>         sheet.cells(rowsNum, <span class="hljs-number">5</span>) = <span class="hljs-constructor">IIF(<span class="hljs-params">col</span>.Primary,<span class="hljs-string">&quot;√&quot;</span>,<span class="hljs-string">&quot;&quot;</span>)</span><br>         sheet.cells(rowsNum, <span class="hljs-number">6</span>) = <span class="hljs-constructor">IIF(<span class="hljs-params">col</span>.Primary,<span class="hljs-string">&quot;√&quot;</span>,<span class="hljs-string">&quot;&quot;</span>)</span><br>         sheet.cells(rowsNum, <span class="hljs-number">7</span>) = <span class="hljs-constructor">IIF(<span class="hljs-params">col</span>.Mandatory,<span class="hljs-string">&quot;√&quot;</span>,<span class="hljs-string">&quot;&quot;</span>)</span><br>         sheet.cells(rowsNum, <span class="hljs-number">8</span>) = <span class="hljs-string">&quot;无&quot;</span><br>         sheet.cells(rowsNum, <span class="hljs-number">9</span>) = col.comment <br>      next  <br><br>      &#x27;设置边框  <br>      DIM RanagBorder<br>      SET RanagBorder =sheet.<span class="hljs-constructor">Range(<span class="hljs-params">sheet</span>.<span class="hljs-params">cells</span>(<span class="hljs-params">rowsNum</span>-<span class="hljs-params">colsNum</span>,1)</span>,sheet.cells(rowsNum,<span class="hljs-number">9</span>))<br>      RanagBorder.Borders.LineStyle = <span class="hljs-string">&quot;1&quot;</span><br>      &#x27;RaneBorderFun RanagBorder  <br>      <br>      rowsNum = rowsNum + <span class="hljs-number">1</span>  <br>      <br>   End If  <br>End Sub  <br><br><span class="hljs-keyword">function</span> <span class="hljs-constructor">IIF(<span class="hljs-params">flg</span>,<span class="hljs-params">tstr</span>,<span class="hljs-params">fstr</span>)</span><br>   <span class="hljs-keyword">if</span> flg <span class="hljs-keyword">then</span><br>      IIF= tstr<br>   <span class="hljs-keyword">else</span><br>      IIF= fstr<br>   <span class="hljs-keyword">end</span> <span class="hljs-keyword">if</span><br>End <span class="hljs-keyword">function</span><br></code></pre></td></tr></table></figure><h4 id="2、赋值comment字段为name的值"><a href="#2、赋值comment字段为name的值" class="headerlink" title="2、赋值comment字段为name的值"></a>2、赋值comment字段为name的值</h4><p><img src="https://jimmy-blog-images.oss-cn-shanghai.aliyuncs.com/img/tool/power1.png"></p><figure class="highlight vbnet"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><code class="hljs vbnet"><span class="hljs-comment">&#x27;把pd中那么name想自动添加到comment里面</span><br><span class="hljs-comment">&#x27;如果comment为空,则填入name;如果不为空,则保留不变,这样可以避免已有的注释丢失.</span><br><span class="hljs-comment">&#x27;1、使用Ctrl+Shift+X打开编辑页面</span><br><span class="hljs-comment">&#x27;2、复制以下代码</span><br><span class="hljs-keyword">Option</span>   <span class="hljs-keyword">Explicit</span>    <br>ValidationMode   =   <span class="hljs-literal">True</span>    <br>InteractiveMode   =   im_Batch    <br>  <br><span class="hljs-keyword">Dim</span>   mdl   <span class="hljs-comment">&#x27;   the   current   model    </span><br>  <br><span class="hljs-comment">&#x27;   get   the   current   active   model    </span><br><span class="hljs-keyword">Set</span>   mdl   =   ActiveModel    <br><span class="hljs-keyword">If</span>   (mdl   <span class="hljs-built_in">Is</span>   <span class="hljs-literal">Nothing</span>)   <span class="hljs-keyword">Then</span>    <br>      MsgBox   <span class="hljs-string">&quot;There   is   no   current   Model &quot;</span>    <br><span class="hljs-keyword">ElseIf</span>   <span class="hljs-built_in">Not</span>   mdl.IsKindOf(PdPDM.cls_Model)   <span class="hljs-keyword">Then</span>    <br>      MsgBox   <span class="hljs-string">&quot;The   current   model   is   not   an   Physical   Data   model. &quot;</span>    <br><span class="hljs-keyword">Else</span>    <br>      ProcessFolder   mdl    <br><span class="hljs-keyword">End</span>   <span class="hljs-keyword">If</span>    <br>  <br><span class="hljs-keyword">Private</span>   <span class="hljs-keyword">sub</span>   ProcessFolder(folder)    <br><span class="hljs-keyword">On</span> <span class="hljs-keyword">Error</span> <span class="hljs-keyword">Resume</span> <span class="hljs-keyword">Next</span>   <br>      <span class="hljs-keyword">Dim</span>   Tab   <span class="hljs-comment">&#x27;running     table    </span><br>      <span class="hljs-keyword">for</span>   <span class="hljs-keyword">each</span>   Tab   <span class="hljs-keyword">in</span>   folder.tables    <br>            <span class="hljs-keyword">if</span>   <span class="hljs-built_in">not</span>   tab.isShortcut   <span class="hljs-keyword">then</span>    <br>                  tab.name   =   tab.comment   <br>                  <span class="hljs-keyword">Dim</span>   col   <span class="hljs-comment">&#x27;   running   column    </span><br>                  <span class="hljs-keyword">for</span>   <span class="hljs-keyword">each</span>   col   <span class="hljs-keyword">in</span>   tab.columns    <br>                  <span class="hljs-keyword">if</span> col.comment=<span class="hljs-string">&quot;&quot;</span> <span class="hljs-keyword">then</span>   <br>                  <span class="hljs-keyword">else</span>  <br>                        col.name=   col.comment    <br>                  <span class="hljs-keyword">end</span> <span class="hljs-keyword">if</span>  <br>                  <span class="hljs-keyword">next</span>    <br>            <span class="hljs-keyword">end</span>   <span class="hljs-keyword">if</span>    <br>      <span class="hljs-keyword">next</span>    <br>  <br>      <span class="hljs-keyword">Dim</span>   view   <span class="hljs-comment">&#x27;running   view    </span><br>      <span class="hljs-keyword">for</span>   <span class="hljs-keyword">each</span>   view   <span class="hljs-keyword">in</span>   folder.Views    <br>            <span class="hljs-keyword">if</span>   <span class="hljs-built_in">not</span>   view.isShortcut   <span class="hljs-keyword">then</span>    <br>                  view.name   =   view.comment    <br>            <span class="hljs-keyword">end</span>   <span class="hljs-keyword">if</span>    <br>      <span class="hljs-keyword">next</span>    <br>  <br>      <span class="hljs-comment">&#x27;   go   into   the   sub-packages    </span><br>      <span class="hljs-keyword">Dim</span>   f   <span class="hljs-comment">&#x27;   running   folder    </span><br>      <span class="hljs-keyword">For</span>   <span class="hljs-keyword">Each</span>   f   <span class="hljs-keyword">In</span>   folder.Packages    <br>            <span class="hljs-keyword">if</span>   <span class="hljs-built_in">not</span>   f.IsShortcut   <span class="hljs-keyword">then</span>    <br>                  ProcessFolder   f    <br>            <span class="hljs-keyword">end</span>   <span class="hljs-keyword">if</span>    <br>      <span class="hljs-keyword">Next</span>    <br><span class="hljs-keyword">end</span>   <span class="hljs-keyword">sub</span><br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>tool</category>
      
    </categories>
    
    
    <tags>
      
      <tag>tool,powerdesigner</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>【大数据】事半功倍的shell脚本</title>
    <link href="/blog/docs/shell-01/bigdata/shell/shell-01/"/>
    <url>/blog/docs/shell-01/bigdata/shell/shell-01/</url>
    
    <content type="html"><![CDATA[<blockquote><p>汝之观览，吾之幸也！本文主要讲的是Shell的基本概念与用法</p></blockquote><h3 id="1、概念"><a href="#1、概念" class="headerlink" title="1、概念"></a>1、概念</h3><p><img src="https://jimmy-blog-images.oss-cn-shanghai.aliyuncs.com/img/linux/linux-shell.png"><br>shell是一个命令行解释器，它接收应用程序/用户命令，然后调用操作系统内核。<br><img src="https://jimmy-blog-images.oss-cn-shanghai.aliyuncs.com/img/linux/shell%E5%86%85%E6%A0%B8.png"></p><h3 id="2、文件格式"><a href="#2、文件格式" class="headerlink" title="2、文件格式"></a>2、文件格式</h3><p>脚本以#!/bin/bash开头，.sh文件结尾</p><h3 id="3、变量"><a href="#3、变量" class="headerlink" title="3、变量"></a>3、变量</h3><h4 id="1、常用系统变量"><a href="#1、常用系统变量" class="headerlink" title="1、常用系统变量"></a>1、常用系统变量</h4><p>$HOME、$PWD、$SHELL、$USER等</p><h4 id="2、自定义变量"><a href="#2、自定义变量" class="headerlink" title="2、自定义变量"></a>2、自定义变量</h4><ul><li>变量名称可以由字母、数字和下划线组成，但是不能以数字开头，环境变量名建议大写。</li><li>等号两侧不能有空格</li><li>在bash中，变量默认类型都是字符串类型，无法直接进行数值运算。</li><li>变量的值如果有空格，需要使用双引号或单引号括起来。<h4 id="3、特殊变量"><a href="#3、特殊变量" class="headerlink" title="3、特殊变量"></a>3、特殊变量</h4><h5 id="n"><a href="#n" class="headerlink" title="$n"></a>$n</h5>$n    （功能描述：n为数字，$0代表该脚本名称，$1-$9代表第一到第九个参数，十以上的参数，十以上的参数需要用大括号包含，如${10}）<h5 id><a href="#" class="headerlink" title="$#"></a>$#</h5>$#    （功能描述：获取所有输入参数个数，常用于循环）。<h5 id="、"><a href="#、" class="headerlink" title="$*、$@"></a>$*、$@</h5>$*    （功能描述：这个变量代表命令行中所有的参数，$*把所有的参数看成一个整体）<br>$@    （功能描述：这个变量也代表命令行中所有的参数，不过$@把每个参数区分对待）<h5 id="-1"><a href="#-1" class="headerlink" title="$?"></a>$?</h5>$?    （功能描述：最后一次执行的命令的返回状态。如果这个变量的值为0，证明上一个命令正确执行；如果这个变量的值为非0（具体是哪个数，由命令自己来决定），则证明上一个命令执行不正确了。）<h3 id="4、运算符"><a href="#4、运算符" class="headerlink" title="4、运算符"></a>4、运算符</h3>$((运算式))或$[运算式]<h3 id="5、条件判断"><a href="#5、条件判断" class="headerlink" title="5、条件判断"></a>5、条件判断</h3><h4 id="1、两个整数之间比较"><a href="#1、两个整数之间比较" class="headerlink" title="1、两个整数之间比较"></a>1、两个整数之间比较</h4>= 字符串比较</li><li>lt 小于（less than）            </li><li>le 小于等于（less equal）</li><li>eq 等于（equal）                </li><li>gt 大于（greater than）</li><li>ge 大于等于（greater equal）    </li><li>ne 不等于（Not equal）<h4 id="2、文件权限判断"><a href="#2、文件权限判断" class="headerlink" title="2、文件权限判断"></a>2、文件权限判断</h4></li><li>r 有读的权限（read）            </li><li>w 有写的权限（write）</li><li>x 有执行的权限（execute）<h4 id="3、文件类型判断"><a href="#3、文件类型判断" class="headerlink" title="3、文件类型判断"></a>3、文件类型判断</h4></li><li>f 文件存在并且是一个常规的文件（file）</li><li>e 文件存在（existence）        </li><li>d 文件存在并是一个目录（directory）<h3 id="6、流程控制"><a href="#6、流程控制" class="headerlink" title="6、流程控制"></a>6、流程控制</h3><h4 id="1、if判断"><a href="#1、if判断" class="headerlink" title="1、if判断"></a>1、if判断</h4>基本语法<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-keyword">if</span> [ 条件判断式 ];<span class="hljs-keyword">then</span> <br>  程序 <br><span class="hljs-keyword">fi</span> <br>或者 <br><span class="hljs-keyword">if</span> [ 条件判断式 ] <br>  <span class="hljs-keyword">then</span> <br>    程序 <br><span class="hljs-keyword">elif</span> [ 条件判断式 ]<br><span class="hljs-keyword">then</span><br>程序<br><span class="hljs-keyword">else</span><br>程序<br><span class="hljs-keyword">fi</span><br></code></pre></td></tr></table></figure>备注：</li><li>[ 条件判断式 ]，中括号和条件判断式之间必须有空格</li><li>if后要有空格<h4 id="2、case语句"><a href="#2、case语句" class="headerlink" title="2、case语句"></a>2、case语句</h4>基本语法<figure class="highlight llvm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs llvm">case $变量名 in <br>  <span class="hljs-string">&quot;值1&quot;</span>） <br>    如果变量的值等于值<span class="hljs-number">1</span>，则执行程序<span class="hljs-number">1</span> <br>    <span class="hljs-comment">;; </span><br>  <span class="hljs-string">&quot;值2&quot;</span>） <br>    如果变量的值等于值<span class="hljs-number">2</span>，则执行程序<span class="hljs-number">2</span> <br>    <span class="hljs-comment">;; </span><br>  …省略其他分支… <br>  *） <br>    如果变量的值都不是以上的值，则执行此程序 <br>    <span class="hljs-comment">;; </span><br>esac<br></code></pre></td></tr></table></figure>备注：</li><li>case行尾必须为单词“in”，每一个模式匹配必须以右括号“）”结束。</li><li>双分号“;;”表示命令序列结束，相当于java中的break。</li><li>最后的“*）”表示默认模式，相当于java中的default。<h4 id="3、for循环"><a href="#3、for循环" class="headerlink" title="3、for循环"></a>3、for循环</h4>基本语法<figure class="highlight gcode"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs gcode">for <span class="hljs-comment">(( 初始值;循环控制条件;变量变化 )</span>) <br>  <span class="hljs-keyword">do</span> <br>    程序 <br>  <span class="hljs-keyword">do</span><span class="hljs-symbol">ne</span><br></code></pre></td></tr></table></figure><h4 id="4、while循环"><a href="#4、while循环" class="headerlink" title="4、while循环"></a>4、while循环</h4>基本语法<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-keyword">while</span> [ 条件判断式 ] <br>  <span class="hljs-keyword">do</span> <br>    程序<br>  <span class="hljs-keyword">done</span><br></code></pre></td></tr></table></figure><h3 id="7、read"><a href="#7、read" class="headerlink" title="7、read"></a>7、read</h3>基本语法<figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs stylus"><span class="hljs-function"><span class="hljs-title">read</span><span class="hljs-params">(选项)</span><span class="hljs-params">(参数)</span></span><br>选项：<br>-p：指定读取值时的提示符；<br>-t：指定读取值时等待的时间（秒）。<br>参数<br>变量：指定读取值的变量名<br></code></pre></td></tr></table></figure><h3 id="8、函数"><a href="#8、函数" class="headerlink" title="8、函数"></a>8、函数</h3><h4 id="1、basename"><a href="#1、basename" class="headerlink" title="1、basename"></a>1、basename</h4>基本语法<figure class="highlight mel"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs mel"><span class="hljs-keyword">basename</span> [<span class="hljs-keyword">string</span> / pathname] [suffix]  （功能描述：<span class="hljs-keyword">basename</span>命令会删掉所有的前缀包括最后一个（‘/’）字符，然后将字符串显示出来。<br></code></pre></td></tr></table></figure><h4 id="2、dirname"><a href="#2、dirname" class="headerlink" title="2、dirname"></a>2、dirname</h4>基本语法<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">dirname</span> 文件绝对路径（功能描述：从给定的包含绝对路径的文件名中去除文件名（非目录的部分），然后返回剩下的路径（目录的部分））<br></code></pre></td></tr></table></figure></li></ul>]]></content>
    
    
    <categories>
      
      <category>shell</category>
      
    </categories>
    
    
    <tags>
      
      <tag>shell</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>【大数据】兵马未动，修改网络、主机名先行</title>
    <link href="/blog/docs/linux-02/bigdata/linux/linux-02/"/>
    <url>/blog/docs/linux-02/bigdata/linux/linux-02/</url>
    
    <content type="html"><![CDATA[<blockquote><p>汝之观览，吾之幸也！接上一篇<a href="https://blog.csdn.net/m0_37172770/article/details/126287521?spm=1001.2014.3001.5502">【大数据】用VMware搭建自己的虚拟机</a>,本文主要讲的是配置虚拟机的网络与主机名称</p></blockquote><p>[TOC]</p><h3 id="一、查看网络-IP-与网关"><a href="#一、查看网络-IP-与网关" class="headerlink" title="一、查看网络 IP 与网关"></a>一、查看网络 IP 与网关</h3><h4 id="1、查看虚拟网络编辑器"><a href="#1、查看虚拟网络编辑器" class="headerlink" title="1、查看虚拟网络编辑器"></a>1、查看虚拟网络编辑器</h4><p><img src="https://jimmy-blog-images.oss-cn-shanghai.aliyuncs.com/img/linux/7.png"></p><h4 id="2、修改ip地址"><a href="#2、修改ip地址" class="headerlink" title="2、修改ip地址"></a>2、修改ip地址</h4><p><img src="https://jimmy-blog-images.oss-cn-shanghai.aliyuncs.com/img/linux/8.png"></p><h4 id="3、查看网关"><a href="#3、查看网关" class="headerlink" title="3、查看网关"></a>3、查看网关</h4><p><img src="https://jimmy-blog-images.oss-cn-shanghai.aliyuncs.com/img/linux/9.png"></p><h4 id="4、查看windows环境的中VMnet8网络配置"><a href="#4、查看windows环境的中VMnet8网络配置" class="headerlink" title="4、查看windows环境的中VMnet8网络配置"></a>4、查看windows环境的中VMnet8网络配置</h4><p><img src="https://jimmy-blog-images.oss-cn-shanghai.aliyuncs.com/img/linux/10.png"></p><h3 id="二、配置网络-IP-地址"><a href="#二、配置网络-IP-地址" class="headerlink" title="二、配置网络 IP 地址"></a>二、配置网络 IP 地址</h3><h4 id="1、查看网络接口"><a href="#1、查看网络接口" class="headerlink" title="1、查看网络接口"></a>1、查看网络接口</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">ifconfig（功能描述：显示所有网络接口的配置信息）<br></code></pre></td></tr></table></figure><h4 id="2、测试主机之间网络连通性"><a href="#2、测试主机之间网络连通性" class="headerlink" title="2、测试主机之间网络连通性"></a>2、测试主机之间网络连通性</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">ping 目的主机（功能描述：测试当前服务器是否可以连接目的主机）<br></code></pre></td></tr></table></figure><h4 id="3、修改IP地址"><a href="#3、修改IP地址" class="headerlink" title="3、修改IP地址"></a>3、修改IP地址</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">vim /etc/sysconfig/network-scripts/ifcfg-ens33<br></code></pre></td></tr></table></figure><p><img src="https://jimmy-blog-images.oss-cn-shanghai.aliyuncs.com/img/linux/11.png"><br>以下必须修改，有值的按照下面的值修改，没有该项的要增加。</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs text">#IP的配置方法[none|static|bootp|dhcp]（引导时不使用协议|静态分配IP|BOOTP协议|DHCP协议）<br>BOOTPROTO=static      <br>#IP地址<br>IPADDR=192.168.1.100   <br>#网关  <br>GATEWAY=192.168.1.2      <br>#域名解析器<br>DNS1=192.168.1.2<br></code></pre></td></tr></table></figure><p>修改后，如下图所示<br><img src="https://jimmy-blog-images.oss-cn-shanghai.aliyuncs.com/img/linux/12.png"><br>保存退出</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">:wq!<br></code></pre></td></tr></table></figure><h4 id="4、执行-systemctl-restart-network"><a href="#4、执行-systemctl-restart-network" class="headerlink" title="4、执行 systemctl restart network"></a>4、执行 systemctl restart network</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">systemctl restart network<br></code></pre></td></tr></table></figure><h4 id="5、查看网络接口"><a href="#5、查看网络接口" class="headerlink" title="5、查看网络接口"></a>5、查看网络接口</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">ifconfig（功能描述：显示所有网络接口的配置信息）<br></code></pre></td></tr></table></figure><h3 id="三、配置主机名"><a href="#三、配置主机名" class="headerlink" title="三、配置主机名"></a>三、配置主机名</h3><h4 id="1、查看主机名"><a href="#1、查看主机名" class="headerlink" title="1、查看主机名"></a>1、查看主机名</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">hostname（功能描述：查看当前服务器的主机名称）<br></code></pre></td></tr></table></figure><h4 id="2、修改主机名"><a href="#2、修改主机名" class="headerlink" title="2、修改主机名"></a>2、修改主机名</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">vim /etc/hostname<br></code></pre></td></tr></table></figure><p>localhost.localdomain 改为 hadoop100</p><h4 id="3、配置hosts"><a href="#3、配置hosts" class="headerlink" title="3、配置hosts"></a>3、配置hosts</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">vim /etc/hostname<br></code></pre></td></tr></table></figure><p>添加内容</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs text">192.168.1.100 hadoop100<br>192.168.1.101 hadoop101<br>192.168.1.102 hadoop102<br>192.168.1.103 hadoop103<br></code></pre></td></tr></table></figure><h4 id="4、重启"><a href="#4、重启" class="headerlink" title="4、重启"></a>4、重启</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">reboot<br></code></pre></td></tr></table></figure><h4 id="5、查看主机名"><a href="#5、查看主机名" class="headerlink" title="5、查看主机名"></a>5、查看主机名</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">hostname（功能描述：查看当前服务器的主机名称）<br></code></pre></td></tr></table></figure><h4 id="5、修改windows的hosts文件"><a href="#5、修改windows的hosts文件" class="headerlink" title="5、修改windows的hosts文件"></a>5、修改windows的hosts文件</h4><p>找到 C:\Windows\System32\drivers\etc 目录下的host文件，复制到桌面，修改桌面的host文件，之后再覆盖etc目录下的host文件<br>添加内容：</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs text">192.168.1.100 hadoop100<br>192.168.1.101 hadoop101<br>192.168.1.102 hadoop102<br>192.168.1.103 hadoop103<br></code></pre></td></tr></table></figure><h3 id="四、服务管理"><a href="#四、服务管理" class="headerlink" title="四、服务管理"></a>四、服务管理</h3><h4 id="1、后台服务管理"><a href="#1、后台服务管理" class="headerlink" title="1、后台服务管理"></a>1、后台服务管理</h4><h5 id="基本语法（CentOS-7）"><a href="#基本语法（CentOS-7）" class="headerlink" title="基本语法（CentOS 7）"></a>基本语法（CentOS 7）</h5><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs shell">systemctl  start服务名（功能描述：开启服务）<br>systemctle  stop服务名（功能描述：关闭服务）<br>systemctl   restart 服务名（功能描述：重新启动服务）<br>systemctl   status 服务名（功能描述：查看服务状态）<br>systemctl  --type  service（功能描述：查看正在运行的服务）<br></code></pre></td></tr></table></figure><h5 id="经验技巧"><a href="#经验技巧" class="headerlink" title="经验技巧"></a>经验技巧</h5><p>查看服务的方法：/usr/lib/systemd/system</p><h4 id="2、设置后台自启"><a href="#2、设置后台自启" class="headerlink" title="2、设置后台自启"></a>2、设置后台自启</h4><h5 id="基本语法（CentOS-7）-1"><a href="#基本语法（CentOS-7）-1" class="headerlink" title="基本语法（CentOS 7）"></a>基本语法（CentOS 7）</h5><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs shell">systemctl  list-unit-files   （功能描述：查看所有服务器自启配置）<br>systemctl  disable 服务名   （功能描述：关掉指定服务的自动启动）<br>systemctl  enable  服务名  （功能描述：开启指定服务的自动启动）<br>systemctl  is-enabled 服务名（功能描述：查看服务开机启动状态）<br></code></pre></td></tr></table></figure><h3 id="五、关机重启"><a href="#五、关机重启" class="headerlink" title="五、关机重启"></a>五、关机重启</h3><p>正确的关机流程为：sync &gt; shutdown &gt; reboot &gt;poweroff</p><h4 id="基本语法"><a href="#基本语法" class="headerlink" title="基本语法"></a>基本语法</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs shell">sync  （功能描述：将数据由内存同步到硬盘中）<br>poweroff（功能描述：关闭系统，等同于shutdown -h now）<br>reboot （功能描述：就是重启，等同于 shutdown -r now）<br>shutdown [选项] 时间<br></code></pre></td></tr></table></figure><table><thead><tr><th>选项</th><th>功能</th></tr></thead><tbody><tr><td>-h</td><td>-h=halt关机</td></tr><tr><td>-r</td><td>-r=reboot重启</td></tr></tbody></table><table><thead><tr><th>参数</th><th>功能</th></tr></thead><tbody><tr><td>now</td><td>立刻关机</td></tr><tr><td>时间</td><td>等待多久后关机（时间单位是<strong>分钟</strong>）。</td></tr></tbody></table>]]></content>
    
    
    <categories>
      
      <category>linux</category>
      
    </categories>
    
    
    <tags>
      
      <tag>linux</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>【Linux】若练其功，必先自攻（Linux目录与命令宝典）</title>
    <link href="/blog/docs/linux-01/bigdata/linux/linux-01/"/>
    <url>/blog/docs/linux-01/bigdata/linux/linux-01/</url>
    
    <content type="html"><![CDATA[<blockquote><p>汝之观览，吾之幸也！本文主要讲的是Linux的目录与基本命令</p></blockquote><p>[TOC]</p><h3 id="一、Linux的目录结构"><a href="#一、Linux的目录结构" class="headerlink" title="一、Linux的目录结构"></a>一、Linux的目录结构</h3><h4 id="linux系统的目录结构"><a href="#linux系统的目录结构" class="headerlink" title="linux系统的目录结构"></a>linux系统的目录结构</h4><p><img src="https://jimmy-blog-images.oss-cn-shanghai.aliyuncs.com/img/linux/%E7%9B%AE%E5%BD%95%E7%BB%93%E6%9E%84.png"></p><h4 id="具体每个目录的解释说明"><a href="#具体每个目录的解释说明" class="headerlink" title="具体每个目录的解释说明"></a>具体每个目录的解释说明</h4><p><img src="https://jimmy-blog-images.oss-cn-shanghai.aliyuncs.com/img/linux/1.png"><br><img src="https://jimmy-blog-images.oss-cn-shanghai.aliyuncs.com/img/linux/2.png"><br><img src="https://jimmy-blog-images.oss-cn-shanghai.aliyuncs.com/img/linux/3.png"><br><img src="https://jimmy-blog-images.oss-cn-shanghai.aliyuncs.com/img/linux/4.png"><br><img src="https://jimmy-blog-images.oss-cn-shanghai.aliyuncs.com/img/linux/5.png"></p><h3 id="二、VI-VIM的三种模式"><a href="#二、VI-VIM的三种模式" class="headerlink" title="二、VI/VIM的三种模式"></a>二、VI/VIM的三种模式</h3><h4 id="1、一般模式"><a href="#1、一般模式" class="headerlink" title="1、一般模式"></a>1、一般模式</h4><p>以vi/vim打开一个档案就直接进入一般模式了（这是<strong>默认的模式</strong>）。在这个模式中， 你可以使用『上下左右』按键来移动光标，你可以使用『删除字符』或『删除整行』来处理档案内容， 也可以使用『复制、贴上』来处理你的文件数据。</p><table><thead><tr><th>语法</th><th>功能描述</th></tr></thead><tbody><tr><td>yy</td><td>复制光标当前一行</td></tr><tr><td>y数字y</td><td>复制一段（从第几行到第几行）</td></tr><tr><td>p</td><td>箭头移动到目的行粘贴</td></tr><tr><td>u</td><td>撤销上一步</td></tr><tr><td>dd</td><td>删除光标当前行</td></tr><tr><td>d数字d</td><td>删除光标（含）后多少行</td></tr><tr><td>x</td><td>删除一个字母，相当于del，向后删</td></tr><tr><td>X</td><td>删除一个字母，相当于Backspace，向前删</td></tr><tr><td>yw</td><td>复制一个词</td></tr><tr><td>dw</td><td>删除一个词</td></tr><tr><td>^</td><td>移动到行头</td></tr><tr><td>$</td><td>移动到行尾</td></tr><tr><td>gg或者1+G</td><td>移动到页头</td></tr><tr><td>G</td><td>移动到页尾</td></tr><tr><td>数字+G（先输入数字，在按G）</td><td>移动到目标行</td></tr></tbody></table><h4 id="2、编辑模式"><a href="#2、编辑模式" class="headerlink" title="2、编辑模式"></a>2、编辑模式</h4><p>在一般模式中可以进行删除、复制、粘贴等的动作，但是无法编辑文件内容！要等到你按下『i, I, o, O, a, A』等任何一个字母之后才会进入编辑模式。<br>注意了！通常在Linux中，按下这些按键时，在画面的左下方会出现『INSERT或 REPLACE』的字样，此时才可以进行编辑。而如果要回到一般模式时， 则必须要按下『Esc』这个按键即可退出编辑模式。</p><table><thead><tr><th>按键</th><th>功能</th></tr></thead><tbody><tr><td>i</td><td>当前光标前</td></tr><tr><td>a</td><td>当前光标后</td></tr><tr><td>o</td><td>当前光标行的下一行</td></tr><tr><td>I</td><td>光标所在行最前</td></tr><tr><td>A</td><td>光标所在行最后</td></tr><tr><td>O</td><td>当前光标行的上一行</td></tr></tbody></table><h4 id="3、命令模式"><a href="#3、命令模式" class="headerlink" title="3、命令模式"></a>3、命令模式</h4><p><strong>在一般模式当中</strong>，输入『 **: / ?**』3个中的任何一个按钮，就可以将光标移动到最底下那一行。<br>在这个模式当中， 可以提供你『搜寻资料』的动作，而读取、存盘、大量取代字符、离开 vi 、显示行号等动作是在此模式中达成的！</p><table><thead><tr><th>命令</th><th>功能</th></tr></thead><tbody><tr><td>:w</td><td>保存</td></tr><tr><td>:q</td><td>退出</td></tr><tr><td>:!</td><td>强制执行</td></tr><tr><td>: %s/old字符/new字符</td><td>批量替换</td></tr><tr><td>/ 要查找的词</td><td>n 查找下一个，N 往上查找</td></tr><tr><td>? 要查找的词</td><td>n是查找上一个，N是往下查找</td></tr><tr><td>:set nu</td><td>显示行号</td></tr><tr><td>:set nonu</td><td>关闭行号</td></tr><tr><td>ZZ（shift+zz）     :nohl</td><td><strong>没有修改文件直接退出，如果修改了文件保存后退</strong>  <strong>去除高亮显示</strong></td></tr></tbody></table><h4 id="4、模式转换"><a href="#4、模式转换" class="headerlink" title="4、模式转换"></a>4、模式转换</h4><p><img src="https://jimmy-blog-images.oss-cn-shanghai.aliyuncs.com/img/linux/6.png"></p><h3 id="三、Linux的常用命令"><a href="#三、Linux的常用命令" class="headerlink" title="三、Linux的常用命令"></a>三、Linux的常用命令</h3><h4 id="1、帮助命令"><a href="#1、帮助命令" class="headerlink" title="1、帮助命令"></a>1、帮助命令</h4><h5 id="man"><a href="#man" class="headerlink" title="man"></a>man</h5><ul><li>基本语法<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">man [命令或配置文件]（功能描述：获得帮助信息）<br></code></pre></td></tr></table></figure></li><li>显示说明</li></ul><table><thead><tr><th>信息</th><th>功能</th></tr></thead><tbody><tr><td>NAME</td><td>命令的名称和单行描述</td></tr><tr><td>SYNOPSIS</td><td>怎样使用命令</td></tr><tr><td>DESCRIPTION</td><td>命令功能的深入讨论</td></tr><tr><td>EXAMPLES</td><td>怎样使用命令的例子</td></tr><tr><td>SEE ALSO</td><td>相关主题（通常是手册页）</td></tr></tbody></table><h5 id="help"><a href="#help" class="headerlink" title="help"></a>help</h5><ul><li><p>基本语法</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">help 命令（功能描述：获得shell内置命令的帮助信息）<br></code></pre></td></tr></table></figure><h5 id="常用快捷键"><a href="#常用快捷键" class="headerlink" title="常用快捷键"></a>常用快捷键</h5><table><thead><tr><th>常用快捷键</th><th>功能</th></tr></thead><tbody><tr><td>ctrl + c</td><td>停止进程</td></tr><tr><td>ctrl+l</td><td>清屏；彻底清屏是：reset</td></tr><tr><td>ctrl + q</td><td>退出</td></tr><tr><td>tab</td><td>提示(更重要的是可以防止敲错)</td></tr><tr><td>上下键</td><td>查找执行过的命令</td></tr><tr><td>ctrl +alt</td><td>linux和Windows之间切换</td></tr></tbody></table><h4 id="2、文件目录类"><a href="#2、文件目录类" class="headerlink" title="2、文件目录类"></a>2、文件目录类</h4><h5 id="pwd-显示当前工作目录的绝对路径"><a href="#pwd-显示当前工作目录的绝对路径" class="headerlink" title="pwd 显示当前工作目录的绝对路径"></a>pwd 显示当前工作目录的绝对路径</h5></li><li><p>基本语法</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">pwd（功能描述：显示当前工作目录的绝对路径）<br></code></pre></td></tr></table></figure><h5 id="ls-列出目录的内容"><a href="#ls-列出目录的内容" class="headerlink" title="ls 列出目录的内容"></a>ls 列出目录的内容</h5></li><li><p>基本语法</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">ls [选项] [目录或是文件]<br></code></pre></td></tr></table></figure></li><li><p>选项说明</p><table><thead><tr><th>选项</th><th>功能</th></tr></thead><tbody><tr><td>-a</td><td>全部的文件，连同隐藏档( 开头为 . 的文件) 一起列出来(常用)</td></tr><tr><td>-l</td><td>长数据串列出，包含文件的属性与权限等等数据；(常用)</td></tr></tbody></table></li><li><p>显示说明<br>每行列出的信息依次是： 文件类型与权限 链接数 文件属主 文件属组 文件大小用byte来表示 建立或最近修改的时间 名字</p><h5 id="cd-切换目录"><a href="#cd-切换目录" class="headerlink" title="cd 切换目录"></a>cd 切换目录</h5></li><li><p>基本语法</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">cd  [参数]<br></code></pre></td></tr></table></figure></li><li><p>参数说明</p><table><thead><tr><th>参数</th><th>功能</th></tr></thead><tbody><tr><td>cd 绝对路径</td><td><strong>切换路径</strong></td></tr><tr><td>cd相对路径</td><td><strong>切换路径</strong></td></tr><tr><td>cd ~或者cd</td><td>回到自己的家目录</td></tr><tr><td>cd -</td><td>回到上一次所在目录</td></tr><tr><td>cd ..</td><td>回到当前目录的上一级目录</td></tr><tr><td>cd -P</td><td>跳转到实际物理路径，而非快捷方式路径</td></tr></tbody></table></li></ul><h5 id="mkdir-创建一个新的目录"><a href="#mkdir-创建一个新的目录" class="headerlink" title="mkdir 创建一个新的目录"></a>mkdir 创建一个新的目录</h5><ul><li><p>基本语法</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">mkdir [选项] 要创建的目录<br></code></pre></td></tr></table></figure></li><li><p>选项说明</p><table><thead><tr><th>选项</th><th>功能</th></tr></thead><tbody><tr><td>-p</td><td>创建多层目录</td></tr></tbody></table><h5 id="rmdir-删除一个空的目录"><a href="#rmdir-删除一个空的目录" class="headerlink" title="rmdir 删除一个空的目录"></a>rmdir 删除一个空的目录</h5></li><li><p>基本语法</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">rmdir 要删除的空目录<br></code></pre></td></tr></table></figure><h5 id="touch-创建空文件"><a href="#touch-创建空文件" class="headerlink" title="touch 创建空文件"></a>touch 创建空文件</h5></li><li><p>基本语法</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">touch 文件名称<br></code></pre></td></tr></table></figure><h5 id="cp-复制文件或目录"><a href="#cp-复制文件或目录" class="headerlink" title="cp 复制文件或目录"></a>cp 复制文件或目录</h5></li><li><p>基本语法</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">cp [选项] source dest （功能描述：复制source文件到dest）<br></code></pre></td></tr></table></figure></li><li><p>选项说明</p><table><thead><tr><th>选项</th><th>功能</th></tr></thead><tbody><tr><td>-r</td><td>递归复制整个文件夹</td></tr></tbody></table></li><li><p>参数说明</p><table><thead><tr><th>参数</th><th>功能</th></tr></thead><tbody><tr><td>source</td><td>源文件</td></tr><tr><td>dest</td><td>目标文件</td></tr></tbody></table></li></ul><h5 id="rm-移除文件或目录"><a href="#rm-移除文件或目录" class="headerlink" title="rm 移除文件或目录"></a>rm 移除文件或目录</h5><ul><li><p>基本语法</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">rm [选项] deleteFile（功能描述：递归删除目录中所有内容）<br></code></pre></td></tr></table></figure></li><li><p>选项说明</p><table><thead><tr><th>选项</th><th>功能</th></tr></thead><tbody><tr><td>-r</td><td>递归删除目录中所有内容</td></tr><tr><td>-f</td><td>强制执行删除操作，而不提示用于进行确认。</td></tr><tr><td>-v</td><td>显示指令的详细执行过程</td></tr></tbody></table></li></ul><h5 id="mv-移动文件与目录或重命名"><a href="#mv-移动文件与目录或重命名" class="headerlink" title="mv 移动文件与目录或重命名"></a>mv 移动文件与目录或重命名</h5><ul><li><p>基本语法</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs shell">mv oldNameFile newNameFile（功能描述：重命名）<br>mv /temp/movefile /targetFolder（功能描述：移动文件）<br></code></pre></td></tr></table></figure><h5 id="cat-查看文件内容"><a href="#cat-查看文件内容" class="headerlink" title="cat 查看文件内容"></a>cat 查看文件内容</h5></li><li><p>基本语法</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">cat  [选项] 要查看的文件<br></code></pre></td></tr></table></figure></li><li><p>选项说明</p><table><thead><tr><th>选项</th><th>功能描述</th></tr></thead><tbody><tr><td>-n</td><td>显示所有行的行号，包括空行。</td></tr></tbody></table></li></ul><h5 id="more-文件内容分屏查看器"><a href="#more-文件内容分屏查看器" class="headerlink" title="more 文件内容分屏查看器"></a>more 文件内容分屏查看器</h5><ul><li><p>基本语法</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">more 要查看的文件<br></code></pre></td></tr></table></figure></li><li><p>操作说明</p><table><thead><tr><th>操作</th><th>功能说明</th></tr></thead><tbody><tr><td>空白键 (space)</td><td>代表向下翻一页；</td></tr><tr><td>Enter</td><td>代表向下翻『一行』；</td></tr><tr><td>q</td><td>代表立刻离开 more ，不再显示该文件内容。</td></tr><tr><td>Ctrl+F</td><td>向下滚动一屏</td></tr><tr><td>Ctrl+B</td><td>返回上一屏</td></tr><tr><td>=</td><td>输出当前行的行号</td></tr><tr><td>:f</td><td>输出文件名和当前行的行号</td></tr></tbody></table></li></ul><h5 id="less-分屏显示文件内容"><a href="#less-分屏显示文件内容" class="headerlink" title="less 分屏显示文件内容"></a>less 分屏显示文件内容</h5><ul><li><p>基本语法</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">less 要查看的文件<br></code></pre></td></tr></table></figure></li><li><p>操作说明</p><table><thead><tr><th>操作</th><th>功能说明</th></tr></thead><tbody><tr><td>空白键</td><td>向下翻动一页；</td></tr><tr><td>[pagedown]</td><td>向下翻动一页</td></tr><tr><td>[pageup]</td><td>向上翻动一页；</td></tr><tr><td>/字串</td><td>向下搜寻『字串』的功能；n：向下查找；N：向上查找；</td></tr><tr><td>?字串</td><td>向上搜寻『字串』的功能；n：向上查找；N：向下查找；</td></tr><tr><td>q</td><td>离开 less 这个程序；</td></tr></tbody></table></li></ul><h5 id="echo-输出内容到控制台"><a href="#echo-输出内容到控制台" class="headerlink" title="echo 输出内容到控制台"></a>echo 输出内容到控制台</h5><ul><li><p>基本语法</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">echo [选项] [输出内容]<br></code></pre></td></tr></table></figure></li><li><p>选项说明</p><table><thead><tr><th>选项</th><th>说明</th></tr></thead><tbody><tr><td>-e</td><td>支持反斜线控制的字符转换</td></tr></tbody></table></li><li><p>控制字符</p><table><thead><tr><th>控制字符</th><th>作用</th></tr></thead><tbody><tr><td>\</td><td>输出\本身</td></tr><tr><td>\n</td><td>换行符</td></tr><tr><td>\t</td><td>制表符，也就是Tab键</td></tr></tbody></table></li></ul><h5 id="head-显示文件头部内容"><a href="#head-显示文件头部内容" class="headerlink" title="head 显示文件头部内容"></a>head 显示文件头部内容</h5><ul><li><p>基本语法</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs shell">head 文件      （功能描述：查看文件头10行内容）<br>head -n 5 文件      （功能描述：查看文件头5行内容，5可以是任意行数）<br></code></pre></td></tr></table></figure></li><li><p>选项说明</p><table><thead><tr><th>选项</th><th>功能</th></tr></thead><tbody><tr><td>-n &lt;行数&gt;</td><td>指定显示头部内容的行数</td></tr></tbody></table></li></ul><h5 id="tail-输出文件尾部内容"><a href="#tail-输出文件尾部内容" class="headerlink" title="tail 输出文件尾部内容"></a>tail 输出文件尾部内容</h5><ul><li><p>基本语法</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">tail 用于输出文件中尾部的内容，默认情况下tail指令显示文件的后10行内容<br></code></pre></td></tr></table></figure></li><li><p>选项说明</p><table><thead><tr><th>选项</th><th>功能</th></tr></thead><tbody><tr><td>-n&lt;行数&gt;</td><td>输出文件尾部n行内容</td></tr><tr><td>-f</td><td>显示文件最新追加的内容，监视文件变化</td></tr></tbody></table></li></ul><h5 id="gt-覆盖-和-gt-gt-追加"><a href="#gt-覆盖-和-gt-gt-追加" class="headerlink" title="&gt; 覆盖 和 &gt;&gt; 追加"></a>&gt; 覆盖 和 &gt;&gt; 追加</h5><ul><li><p>基本语法</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs shell">ll &gt;文件（功能描述：列表的内容写入文件a.txt中（覆盖写））<br>ll &gt;&gt;文件（功能描述：列表的内容追加到文件aa.txt的末尾）<br>cat 文件1 &gt; 文件2（功能描述：将文件1的内容覆盖到文件2）<br>echo “内容” &gt;&gt; 文件<br></code></pre></td></tr></table></figure><h5 id="ln-软链接"><a href="#ln-软链接" class="headerlink" title="ln 软链接"></a>ln 软链接</h5></li><li><p>基本语法</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">ln -s [原文件或目录] [软链接名]（功能描述：给原文件创建一个软链接）<br></code></pre></td></tr></table></figure><h5 id="history-查看已经执行过历史命令"><a href="#history-查看已经执行过历史命令" class="headerlink" title="history 查看已经执行过历史命令"></a>history 查看已经执行过历史命令</h5></li><li><p>基本语法</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">history（功能描述：查看已经执行过历史命令）<br></code></pre></td></tr></table></figure><h4 id="3、时间日期类"><a href="#3、时间日期类" class="headerlink" title="3、时间日期类"></a>3、时间日期类</h4><h5 id="date-显示当前时间"><a href="#date-显示当前时间" class="headerlink" title="date 显示当前时间"></a>date 显示当前时间</h5></li><li><p>基本语法</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs shell">date（功能描述：显示当前时间）<br>date +%Y（功能描述：显示当前年份）<br>date +%m（功能描述：显示当前月份）<br>date +%d（功能描述：显示当前是哪一天）<br>date &quot;+%Y-%m-%d %H:%M:%S&quot;（功能描述：显示年月日时分秒）<br></code></pre></td></tr></table></figure><h5 id="date-显示非当前时间"><a href="#date-显示非当前时间" class="headerlink" title="date 显示非当前时间"></a>date 显示非当前时间</h5></li><li><p>基本语法</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs shell">date -d &#x27;1 days ago&#x27;（功能描述：显示前一天时间）<br>date -d &#x27;-1 days ago&#x27;（功能描述：显示明天时间）<br></code></pre></td></tr></table></figure><h5 id="date-显示非当前时间-1"><a href="#date-显示非当前时间-1" class="headerlink" title="date 显示非当前时间"></a>date 显示非当前时间</h5></li><li><p>基本语法</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">date -s 字符串时间<br></code></pre></td></tr></table></figure><h5 id="cal-查看日历"><a href="#cal-查看日历" class="headerlink" title="cal 查看日历"></a>cal 查看日历</h5></li><li><p>基本语法</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">cal [选项]（功能描述：不加选项，显示本月日历）<br></code></pre></td></tr></table></figure></li><li><p>选项说明</p><table><thead><tr><th>选项</th><th>功能</th></tr></thead><tbody><tr><td>具体某一年</td><td>显示这一年的日历</td></tr></tbody></table></li></ul><h4 id="4、用户管理命令"><a href="#4、用户管理命令" class="headerlink" title="4、用户管理命令"></a>4、用户管理命令</h4><h5 id="useradd-添加新用户"><a href="#useradd-添加新用户" class="headerlink" title="useradd 添加新用户"></a>useradd 添加新用户</h5><ul><li><p>基本语法</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs shell">useradd 用户名（功能描述：添加新用户）<br>useradd -g 组名 用户名（功能描述：添加新用户到某个组）<br></code></pre></td></tr></table></figure><h5 id="passwd-设置用户密码"><a href="#passwd-设置用户密码" class="headerlink" title="passwd 设置用户密码"></a>passwd 设置用户密码</h5></li><li><p>基本语法</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">passwd 用户名（功能描述：设置用户密码）<br></code></pre></td></tr></table></figure><h5 id="id-查看用户是否存在"><a href="#id-查看用户是否存在" class="headerlink" title="id 查看用户是否存在"></a>id 查看用户是否存在</h5></li><li><p>基本语法</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">id 用户名<br></code></pre></td></tr></table></figure><h5 id="cat-etc-passwd-查看创建了哪些用户"><a href="#cat-etc-passwd-查看创建了哪些用户" class="headerlink" title="cat  /etc/passwd 查看创建了哪些用户"></a>cat  /etc/passwd 查看创建了哪些用户</h5></li><li><p>基本语法</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">cat  /etc/passwd<br></code></pre></td></tr></table></figure><h5 id="su-切换用户"><a href="#su-切换用户" class="headerlink" title="su 切换用户"></a>su 切换用户</h5></li><li><p>基本语法</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs shell">su 用户名称   （功能描述：切换用户，只能获得用户的执行权限，不能获得环境变量）<br>su - 用户名称（功能描述：切换到用户并获得该用户的环境变量及执行权限）<br></code></pre></td></tr></table></figure><h5 id="userdel-删除用户"><a href="#userdel-删除用户" class="headerlink" title="userdel 删除用户"></a>userdel 删除用户</h5></li><li><p>基本语法</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs shell">userdel  用户名（功能描述：删除用户但保存用户主目录）<br>userdel -r 用户名（功能描述：用户和用户主目录，都删除）<br></code></pre></td></tr></table></figure></li><li><p>选项说明</p><table><thead><tr><th>选项</th><th>功能</th></tr></thead><tbody><tr><td>-r</td><td>删除用户的同时，删除与用户相关的所有文件。</td></tr></tbody></table><h5 id="who-查看登录用户信息"><a href="#who-查看登录用户信息" class="headerlink" title="who 查看登录用户信息"></a>who 查看登录用户信息</h5></li><li><p>基本语法</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs shell">whoami（功能描述：显示自身用户名称）<br>who am i（功能描述：显示登录用户的用户名）<br></code></pre></td></tr></table></figure><h5 id="sudo-设置普通用户具有root权限"><a href="#sudo-设置普通用户具有root权限" class="headerlink" title="sudo 设置普通用户具有root权限"></a>sudo 设置普通用户具有root权限</h5></li><li><p>基本语法</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta prompt_"># </span><span class="language-bash">1、新增用户</span><br>useradd jimmy<br>passwd jimmy<br><span class="hljs-meta prompt_"># </span><span class="language-bash">2、修改配置文件</span><br>vi /etc/sudoers<br>在这行下增加 jimmy  ALL=(ALL)     ALL <br><span class="hljs-meta prompt_">#</span><span class="language-bash"><span class="hljs-comment"># Allow root to run any commands anywhere</span></span><br>root    ALL=(ALL)     ALL<br>jimmy  ALL=(ALL)     ALL <br>或者<br>jimmy   ALL=(ALL)     NOPASSWD:ALL<br><span class="hljs-meta prompt_"># </span><span class="language-bash">3、在命令前加sudo即可拥有root权限</span><br></code></pre></td></tr></table></figure><h5 id="usermod-修改用户"><a href="#usermod-修改用户" class="headerlink" title="usermod 修改用户"></a>usermod 修改用户</h5></li><li><p>基本语法</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">usermod -g 用户组 用户名<br></code></pre></td></tr></table></figure></li><li><p>选项说明</p><table><thead><tr><th>选项</th><th>功能</th></tr></thead><tbody><tr><td>-g</td><td>修改用户的初始登录组，给定的组必须存在</td></tr></tbody></table></li></ul><h4 id="5、用户组管理命令"><a href="#5、用户组管理命令" class="headerlink" title="5、用户组管理命令"></a>5、用户组管理命令</h4><h5 id="groupadd-新增组"><a href="#groupadd-新增组" class="headerlink" title="groupadd 新增组"></a>groupadd 新增组</h5><ul><li><p>基本语法</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">groupadd 组名<br></code></pre></td></tr></table></figure><h5 id="groupdel-删除组"><a href="#groupdel-删除组" class="headerlink" title="groupdel 删除组"></a>groupdel 删除组</h5></li><li><p>基本语法</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">groupdel 组名<br></code></pre></td></tr></table></figure><h5 id="groupmod-修改组"><a href="#groupmod-修改组" class="headerlink" title="groupmod 修改组"></a>groupmod 修改组</h5></li><li><p>基本语法</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">groupmod -n 新组名 老组名<br></code></pre></td></tr></table></figure></li><li><p>选项说明</p><table><thead><tr><th>选项</th><th>功能描述</th></tr></thead><tbody><tr><td>-n&lt;新组名&gt;</td><td>指定工作组的新组名</td></tr></tbody></table></li></ul><h5 id="cat-etc-group-查看创建了哪些组"><a href="#cat-etc-group-查看创建了哪些组" class="headerlink" title="cat  /etc/group 查看创建了哪些组"></a>cat  /etc/group 查看创建了哪些组</h5><ul><li>基本语法<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">cat  /etc/group<br></code></pre></td></tr></table></figure><h4 id="6、文件权限类"><a href="#6、文件权限类" class="headerlink" title="6、文件权限类"></a>6、文件权限类</h4><h5 id="基本概念"><a href="#基本概念" class="headerlink" title="基本概念"></a>基本概念</h5><img src="https://jimmy-blog-images.oss-cn-shanghai.aliyuncs.com/img/linux/13.png"><figure class="highlight crmsh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs crmsh">第<span class="hljs-number">0</span>位表示类型<br>第<span class="hljs-number">1</span>-<span class="hljs-number">3</span>位确定属主（该文件的所有者）拥有该文件的权限。<span class="hljs-keyword">User</span><br><span class="hljs-title">第4-6</span>位确定属组（所有者的同组用户）拥有该文件的权限，<span class="hljs-keyword">Group</span><br><span class="hljs-title">第7-9</span>位确定其他用户拥有该文件的权限 Other<br></code></pre></td></tr></table></figure>rxw作用文件和目录的不同解释<h6 id="作用到文件："><a href="#作用到文件：" class="headerlink" title="作用到文件："></a>作用到文件：</h6><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs text">[r]代表可读(read): 可以读取，查看<br>[w]代表可写(write): 可以修改，但是不代表可以删除该文件，删除一个文件的前提条件是对该文件所在的目录有写权限，才能删除该文件.<br>[x]代表可执行(execute):可以被系统执行<br></code></pre></td></tr></table></figure><h6 id="作用到目录："><a href="#作用到目录：" class="headerlink" title="作用到目录："></a>作用到目录：</h6><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs vim">[r]代表可读(<span class="hljs-keyword">read</span>): 可以读取，<span class="hljs-keyword">ls</span>查看目录内容<br>[<span class="hljs-keyword">w</span>]代表可写(<span class="hljs-keyword">write</span>): 可以修改，目录内创建+删除+重命名目录<br>[<span class="hljs-keyword">x</span>]代表可执行(<span class="hljs-keyword">execute</span>):可以进入该目录<br></code></pre></td></tr></table></figure>例子：<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs shell">drwxr-xr-x. 2 root root  4096 1月  12 14:02 dssz<br>文件类型与权限 链接数 文件所有者 文件属组 文件大小 建立或最近修改时间 文件名字<br></code></pre></td></tr></table></figure><h5 id="chmod-改变权限"><a href="#chmod-改变权限" class="headerlink" title="chmod 改变权限"></a>chmod 改变权限</h5><img src="https://jimmy-blog-images.oss-cn-shanghai.aliyuncs.com/img/linux/14.png"></li><li>基本语法<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs shell">chmod  [&#123;ugoa&#125;&#123;+-=&#125;&#123;rwx&#125;] 文件或目录<br>chmod  [&#123;ugoa&#125;&#123;+-=&#125;&#123;rwx&#125;] 文件或目录<br></code></pre></td></tr></table></figure></li><li>经验技巧<br>u:所有者  g:所有组  o:其他人  a:所有人(u、g、o的总和)<br>r=4 w=2 x=1        rwx=4+2+1=7</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">chmod -R 777 1.txt<br></code></pre></td></tr></table></figure><h5 id="chown-改变所有者"><a href="#chown-改变所有者" class="headerlink" title="chown 改变所有者"></a>chown 改变所有者</h5><ul><li><p>基本语法</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">chown [选项] [最终用户] [文件或目录]<br></code></pre></td></tr></table></figure></li><li><p>选项说明</p><table><thead><tr><th>选项</th><th>功能</th></tr></thead><tbody><tr><td>-R</td><td>递归操作</td></tr></tbody></table></li></ul><h5 id="chgrp-改变所属组"><a href="#chgrp-改变所属组" class="headerlink" title="chgrp 改变所属组"></a>chgrp 改变所属组</h5><ul><li><p>基本语法</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">chgrp [最终用户组] [文件或目录]（功能描述：改变文件或者目录的所属组）<br></code></pre></td></tr></table></figure><h4 id="7、搜索查找类"><a href="#7、搜索查找类" class="headerlink" title="7、搜索查找类"></a>7、搜索查找类</h4><h5 id="find-查找文件或者目录"><a href="#find-查找文件或者目录" class="headerlink" title="find 查找文件或者目录"></a>find 查找文件或者目录</h5></li><li><p>基本语法</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">find [搜索范围] [选项]<br></code></pre></td></tr></table></figure></li><li><p>选项说明</p><table><thead><tr><th>选项</th><th>功能</th></tr></thead><tbody><tr><td>-name&lt;查询方式&gt;</td><td>按照指定的文件名查找模式查找文件</td></tr><tr><td>-user&lt;用户名&gt;</td><td>查找属于指定用户名所有文件</td></tr><tr><td>-size&lt;文件大小&gt;</td><td>按照指定的文件大小查找文件。</td></tr></tbody></table><h5 id="grep-过滤查找及“-”管道符"><a href="#grep-过滤查找及“-”管道符" class="headerlink" title="grep 过滤查找及“|”管道符"></a>grep 过滤查找及“|”管道符</h5></li><li><p>基本语法</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">grep 选项 查找内容 源文件<br></code></pre></td></tr></table></figure></li><li><p>选项说明</p><table><thead><tr><th>选项</th><th>功能</th></tr></thead><tbody><tr><td>-n</td><td>显示匹配行及行号。</td></tr></tbody></table></li></ul><h5 id="which-查找命令"><a href="#which-查找命令" class="headerlink" title="which 查找命令"></a>which 查找命令</h5><ul><li><p>基本语法</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">which 命令<br></code></pre></td></tr></table></figure><h4 id="8、压缩与解压缩"><a href="#8、压缩与解压缩" class="headerlink" title="8、压缩与解压缩"></a>8、压缩与解压缩</h4><h5 id="gzip-gunzip-压缩"><a href="#gzip-gunzip-压缩" class="headerlink" title="gzip/gunzip 压缩"></a>gzip/gunzip 压缩</h5></li><li><p>基本语法</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs shell">gzip 文件（功能描述：压缩文件，只能将文件压缩为*.gz文件）<br>gunzip 文件.gz（功能描述：解压缩文件命令）<br></code></pre></td></tr></table></figure></li><li><p>技巧经验<br>1、只能压缩文件不能压缩目录<br>2、不保留原来的文件</p><h5 id="zip-unzip-压缩"><a href="#zip-unzip-压缩" class="headerlink" title="zip/unzip 压缩"></a>zip/unzip 压缩</h5></li><li><p>基本语法</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs shell">zip  [选项] XXX.zip  将要压缩的内容 （功能描述：压缩文件和目录的命令）<br>unzip [选项] XXX.zip（功能描述：解压缩文件）<br></code></pre></td></tr></table></figure></li><li><p>选项说明</p><table><thead><tr><th>zip选项</th><th>功能</th></tr></thead><tbody><tr><td>-r</td><td>压缩目录</td></tr></tbody></table><table><thead><tr><th>unzip选项</th><th>功能</th></tr></thead><tbody><tr><td>-d&lt;目录&gt;</td><td>指定解压后文件的存放目录</td></tr></tbody></table></li><li><p>经验技巧<br>可以压缩目录且保留源文件</p><h5 id="tar-打包"><a href="#tar-打包" class="headerlink" title="tar 打包"></a>tar 打包</h5></li><li><p>基本语法</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">tar  [选项]  XXX.tar.gz  要打包的内容 功能描述：打包目录，压缩后的文件格式.tar.gz）<br></code></pre></td></tr></table></figure></li><li><p>选项说明</p><table><thead><tr><th>选项</th><th>功能</th></tr></thead><tbody><tr><td>-z</td><td>打包同时压缩</td></tr><tr><td><strong>-c</strong></td><td><strong>产生</strong><strong>.tar****打包文件</strong></td></tr><tr><td>-v</td><td>显示详细信息</td></tr><tr><td>-f</td><td>指定压缩后的文件名</td></tr><tr><td><strong>-x</strong></td><td><strong>解包</strong><strong>.tar****文件</strong></td></tr></tbody></table></li></ul><h4 id="9、磁盘分区类"><a href="#9、磁盘分区类" class="headerlink" title="9、磁盘分区类"></a>9、磁盘分区类</h4><h5 id="df-查看磁盘空间使用情况"><a href="#df-查看磁盘空间使用情况" class="headerlink" title="df 查看磁盘空间使用情况"></a>df 查看磁盘空间使用情况</h5><ul><li><p>基本语法</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">df  选项（功能描述：列出文件系统的整体磁盘使用量，检查文件系统的磁盘空间占用情况）<br></code></pre></td></tr></table></figure></li><li><p>选项说明</p><table><thead><tr><th>选项</th><th>功能</th></tr></thead><tbody><tr><td>-h</td><td>以人们较易阅读的 GBytes, MBytes, KBytes 等格式自行显示；</td></tr></tbody></table></li></ul><h5 id="fdisk-查看分区"><a href="#fdisk-查看分区" class="headerlink" title="fdisk 查看分区"></a>fdisk 查看分区</h5><ul><li><p>基本语法</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">fdisk -l（功能描述：查看磁盘分区详情）<br></code></pre></td></tr></table></figure></li><li><p>选项说明</p><table><thead><tr><th>选项</th><th>功能</th></tr></thead><tbody><tr><td>-l</td><td>显示所有硬盘的分区列表</td></tr></tbody></table></li></ul><h5 id="mount-umount-挂载-卸载"><a href="#mount-umount-挂载-卸载" class="headerlink" title="mount/umount 挂载/卸载"></a>mount/umount 挂载/卸载</h5><ul><li><p>基本语法</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs shell">mount [-t vfstype] [-o options] device dir（功能描述：挂载设备）<br>umount 设备文件名或挂载点（功能描述：卸载设备）<br></code></pre></td></tr></table></figure></li><li><p>参数说明</p><table><thead><tr><th>参数</th><th>功能</th></tr></thead><tbody><tr><td>-t vfstype</td><td>指定文件系统的类型，通常不必指定。mount 会自动选择正确的类型。常用类型有：  光盘或光盘镜像：iso9660  DOS fat16文件系统：msdos  <a href="http://blog.csdn.net/hancunai0017/article/details/6995284">Windows</a> 9x fat32文件系统：vfat  Windows NT ntfs文件系统：ntfs  Mount Windows文件<a href="http://blog.csdn.net/hancunai0017/article/details/6995284">网络</a>共享：smbfs  <a href="http://blog.csdn.net/hancunai0017/article/details/6995284">UNIX</a>(LINUX) 文件网络共享：nfs</td></tr><tr><td>-o options</td><td>主要用来描述设备或档案的挂接方式。常用的参数有：  loop：用来把一个文件当成硬盘分区挂接上系统  ro：采用只读方式挂接设备  rw：采用读写方式挂接设备  　 iocharset：指定访问文件系统所用字符集</td></tr><tr><td>device</td><td>要挂接(mount)的设备</td></tr><tr><td>dir</td><td>设备在系统上的挂接点(mount point)</td></tr></tbody></table></li></ul><h4 id="10、进程线程类"><a href="#10、进程线程类" class="headerlink" title="10、进程线程类"></a>10、进程线程类</h4><h5 id="ps-查看当前系统进程状态"><a href="#ps-查看当前系统进程状态" class="headerlink" title="ps 查看当前系统进程状态"></a>ps 查看当前系统进程状态</h5><ul><li><p>基本语法</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs shell">ps -aux | grep xxx（功能描述：查看系统中所有进程）<br>ps -ef | grep xxx（功能描述：可以查看子父进程之间的关系）<br></code></pre></td></tr></table></figure></li><li><p>选项说明</p><table><thead><tr><th>选项</th><th>功能</th></tr></thead><tbody><tr><td>-a</td><td>选择所有进程</td></tr><tr><td>-u</td><td>显示所有用户的所有进程</td></tr><tr><td>-x</td><td>显示没有终端的进程</td></tr></tbody></table></li></ul><h5 id="kill-终止进程"><a href="#kill-终止进程" class="headerlink" title="kill 终止进程"></a>kill 终止进程</h5><ul><li><p>基本语法</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs shell">kill  [选项] 进程号（功能描述：通过进程号杀死进程）<br>killall 进程名称（功能描述：通过进程名称杀死进程，也支持通配符，这在系统因负载过大而变得很慢时很有用）<br></code></pre></td></tr></table></figure></li><li><p>选项说明</p><table><thead><tr><th>选项</th><th>功能</th></tr></thead><tbody><tr><td>-9</td><td>表示强迫进程立即停止</td></tr></tbody></table></li></ul><h5 id="pstree-查看进程树"><a href="#pstree-查看进程树" class="headerlink" title="pstree 查看进程树"></a>pstree 查看进程树</h5><ul><li><p>基本语法</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">pstree [选项]<br></code></pre></td></tr></table></figure></li><li><p>选项说明</p><table><thead><tr><th>选项</th><th>功能</th></tr></thead><tbody><tr><td>-p</td><td>显示进程的PID</td></tr><tr><td>-u</td><td>显示进程的所属用户</td></tr></tbody></table></li></ul><h5 id="top-查看系统健康状态"><a href="#top-查看系统健康状态" class="headerlink" title="top 查看系统健康状态"></a>top 查看系统健康状态</h5><ul><li><p>基本语法</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">top [选项]<br></code></pre></td></tr></table></figure></li><li><p>选项说明</p><table><thead><tr><th>选项</th><th>功能</th></tr></thead><tbody><tr><td>-d 秒数</td><td>指定top命令每隔几秒更新。默认是3秒在top命令的交互模式当中可以执行的命令：</td></tr><tr><td>-i</td><td>使top不显示任何闲置或者僵死进程。</td></tr><tr><td>-p</td><td>通过指定监控进程ID来仅仅监控某个进程的状态。</td></tr></tbody></table></li><li><p>操作说明</p><table><thead><tr><th>操作</th><th>功能</th></tr></thead><tbody><tr><td>P</td><td>以CPU使用率排序，默认就是此项</td></tr><tr><td>M</td><td>以内存的使用率排序</td></tr><tr><td>N</td><td>以PID排序</td></tr><tr><td>q</td><td>退出top</td></tr></tbody></table></li><li><p>查询结果字段解释</p><p>第一行信息为任务队列信息</p><table><thead><tr><th>内容</th><th>说明</th></tr></thead><tbody><tr><td>12:26:46</td><td>系统当前时间</td></tr><tr><td>up 1 day, 13:32</td><td>系统的运行时间，本机已经运行1天  13小时32分钟</td></tr><tr><td>2 users</td><td>当前登录了两个用户</td></tr><tr><td>load average:   0.00, 0.00, 0.00</td><td>系统在之前1分钟，5分钟，15分钟的平均负载。一般认为小于1时，负载较小。如果大于1，系统已经超出负荷。</td></tr></tbody></table></li></ul><p>​      第二行为进程信息</p><table><thead><tr><th>Tasks: 95 total</th><th>系统中的进程总数</th></tr></thead><tbody><tr><td>1 running</td><td>正在运行的进程数</td></tr><tr><td>94 sleeping</td><td>睡眠的进程</td></tr><tr><td>0 stopped</td><td>正在停止的进程</td></tr><tr><td>0 zombie</td><td>僵尸进程。如果不是0，需要手工检查僵尸进程</td></tr></tbody></table><p>第三行为CPU信息</p><table><thead><tr><th>Cpu(s): 0.1%us</th><th>用户模式占用的CPU百分比</th></tr></thead><tbody><tr><td>0.1%sy</td><td>系统模式占用的CPU百分比</td></tr><tr><td>0.0%ni</td><td>改变过优先级的用户进程占用的CPU百分比</td></tr><tr><td>99.7%id</td><td>空闲CPU的CPU百分比</td></tr><tr><td>0.1%wa</td><td>等待输入/输出的进程的占用CPU百分比</td></tr><tr><td>0.0%hi</td><td>硬中断请求服务占用的CPU百分比</td></tr><tr><td>0.1%si</td><td>软中断请求服务占用的CPU百分比</td></tr><tr><td>0.0%st</td><td>st（Steal time）虚拟时间百分比。就是当有虚拟机时，虚拟CPU等待实际CPU的时间百分比。</td></tr></tbody></table><p>第四行为物理内存信息</p><table><thead><tr><th>Mem:  625344k total</th><th>物理内存的总量，单位KB</th></tr></thead><tbody><tr><td>571504k used</td><td>已经使用的物理内存数量</td></tr><tr><td>53840k free</td><td>空闲的物理内存数量，我们使用的是虚拟机，总共只分配了628MB内存，所以只有53MB的空闲内存了</td></tr><tr><td>65800k buffers</td><td>作为缓冲的内存数量</td></tr></tbody></table><p>第五行为交换分区（swap）信息</p><table><thead><tr><th>Swap:  524280k total</th><th>交换分区（虚拟内存）的总大小</th></tr></thead><tbody><tr><td>0k used</td><td>已经使用的交互分区的大小</td></tr><tr><td>524280k free</td><td>空闲交换分区的大小</td></tr><tr><td>409280k cached</td><td>作为缓存的交互分区的大小</td></tr></tbody></table><h5 id="netstat-显示网络统计信息和端口占用情况"><a href="#netstat-显示网络统计信息和端口占用情况" class="headerlink" title="netstat 显示网络统计信息和端口占用情况"></a>netstat 显示网络统计信息和端口占用情况</h5><ul><li><p>基本语法</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs shell">netstat -anp |grep 进程号（功能描述：查看该进程网络信息）<br>netstat -nlp| grep 端口号（功能描述：查看网络端口号占用情况）<br></code></pre></td></tr></table></figure></li><li><p>选项说明</p><table><thead><tr><th>选项</th><th>功能</th></tr></thead><tbody><tr><td>-n</td><td>拒绝显示别名，能显示数字的全部转化成数字</td></tr><tr><td>-l</td><td>仅列出有在listen（监听）的服务状态</td></tr><tr><td>-p</td><td>表示显示哪个进程在调用</td></tr></tbody></table></li></ul><h4 id="11、crond系统定时任务"><a href="#11、crond系统定时任务" class="headerlink" title="11、crond系统定时任务"></a>11、crond系统定时任务</h4><h5 id="crond-服务管理"><a href="#crond-服务管理" class="headerlink" title="crond 服务管理"></a>crond 服务管理</h5><ul><li><p>基本语法</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">service crond restart  (重新启动crond服务)<br></code></pre></td></tr></table></figure><h5 id="crontab-定时任务设置"><a href="#crontab-定时任务设置" class="headerlink" title="crontab 定时任务设置"></a>crontab 定时任务设置</h5></li><li><p>基本语法</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">crontab [选项]<br></code></pre></td></tr></table></figure></li><li><p>选项说明</p><table><thead><tr><th>选项</th><th>功能</th></tr></thead><tbody><tr><td>-e</td><td>编辑crontab定时任务</td></tr><tr><td>-l</td><td>查询crontab任务</td></tr><tr><td>-r</td><td>删除当前用户所有的crontab任务</td></tr></tbody></table></li></ul>]]></content>
    
    
    <categories>
      
      <category>linux</category>
      
    </categories>
    
    
    <tags>
      
      <tag>linux</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>【大数据】工欲善其大数据，必先利其CDH</title>
    <link href="/blog/docs/cdh-01/bigdata/cdh/cdh-01/"/>
    <url>/blog/docs/cdh-01/bigdata/cdh/cdh-01/</url>
    
    <content type="html"><![CDATA[<blockquote><p>汝之观览，吾之幸也！本文主要讲解大数据平台搭建工具CDH</p></blockquote><h3 id="一、准备工作"><a href="#一、准备工作" class="headerlink" title="一、准备工作"></a>一、准备工作</h3><h3 id="二、"><a href="#二、" class="headerlink" title="二、"></a>二、</h3>]]></content>
    
    
    <categories>
      
      <category>cdh</category>
      
    </categories>
    
    
    <tags>
      
      <tag>cdh,bigdata</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>【Linux】Linux中ifconfig command not found解决方法</title>
    <link href="/blog/docs/linux-ifconfig/bigdata/linux/linux-ifconfig/"/>
    <url>/blog/docs/linux-ifconfig/bigdata/linux/linux-ifconfig/</url>
    
    <content type="html"><![CDATA[<blockquote><p>汝之观览，吾之幸也！本文主要讲的是ifconfig命令未找到的问题</p></blockquote><h3 id="问题描述：Linux中ifconfig-command-not-found"><a href="#问题描述：Linux中ifconfig-command-not-found" class="headerlink" title="问题描述：Linux中ifconfig command not found"></a>问题描述：Linux中ifconfig command not found</h3><p><img src="https://jimmy-blog-images.oss-cn-shanghai.aliyuncs.com/img/vmware/27.png"></p><h3 id="解决方案："><a href="#解决方案：" class="headerlink" title="解决方案："></a>解决方案：</h3><h4 id="1、查看环境变量中是否有usr-local-sbin目录"><a href="#1、查看环境变量中是否有usr-local-sbin目录" class="headerlink" title="1、查看环境变量中是否有usr/local/sbin目录"></a>1、查看环境变量中是否有usr/local/sbin目录</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">echo $PATH<br></code></pre></td></tr></table></figure><p><img src="https://jimmy-blog-images.oss-cn-shanghai.aliyuncs.com/img/vmware/28.png"></p><h4 id="2、有的话查找ifconfig命令需要安装什么"><a href="#2、有的话查找ifconfig命令需要安装什么" class="headerlink" title="2、有的话查找ifconfig命令需要安装什么"></a>2、有的话查找ifconfig命令需要安装什么</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">yum search ifconfig<br></code></pre></td></tr></table></figure><p><img src="https://jimmy-blog-images.oss-cn-shanghai.aliyuncs.com/img/vmware/29.png"></p><h4 id="3、安装需要的工具包"><a href="#3、安装需要的工具包" class="headerlink" title="3、安装需要的工具包"></a>3、安装需要的工具包</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">yum install net-tools.x86_64<br></code></pre></td></tr></table></figure><p>备注：遇到判断直接输入【y】即可<br><img src="https://jimmy-blog-images.oss-cn-shanghai.aliyuncs.com/img/vmware/30.png"></p><h4 id="4、执行ifconfig命令"><a href="#4、执行ifconfig命令" class="headerlink" title="4、执行ifconfig命令"></a>4、执行ifconfig命令</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">ifconfig<br></code></pre></td></tr></table></figure><p><img src="https://jimmy-blog-images.oss-cn-shanghai.aliyuncs.com/img/vmware/31.png"></p>]]></content>
    
    
    <categories>
      
      <category>linux</category>
      
    </categories>
    
    
    <tags>
      
      <tag>linux</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>【大数据】用VMware搭建自己的虚拟机</title>
    <link href="/blog/docs/vmware-install/bigdata/software/vmware-install/"/>
    <url>/blog/docs/vmware-install/bigdata/software/vmware-install/</url>
    
    <content type="html"><![CDATA[<blockquote><p>汝之观览，吾之幸也！本文主要讲的是大数据最常使用的工具【VMware】的安装与新建虚拟机</p></blockquote><h3 id="一、下载所需软件"><a href="#一、下载所需软件" class="headerlink" title="一、下载所需软件"></a>一、下载所需软件</h3><p>【VMware-pro 15】下载，可加公众号【纯码农（purecodefarmer）】输入“vmware”即可获取下载链接<br>【CentOS-7.5】下载，可加公众号【纯码农（purecodefarmer）】输入“centos”即可获取下载链接</p><p><a href="https://mirrors.163.com/centos/7/isos/">网易镜像</a>、<a href="https://mirrors.sohu.com/centos/7/isos/">搜狐镜像</a></p><h3 id="二、新建虚拟机"><a href="#二、新建虚拟机" class="headerlink" title="二、新建虚拟机"></a>二、新建虚拟机</h3><h4 id="1、打开VMware【文件】-【新建虚拟机】"><a href="#1、打开VMware【文件】-【新建虚拟机】" class="headerlink" title="1、打开VMware【文件】-【新建虚拟机】"></a>1、打开VMware【文件】-【新建虚拟机】</h4><p><img src="https://jimmy-blog-images.oss-cn-shanghai.aliyuncs.com/img/vmware/1.png"></p><h4 id="2、硬件兼容性选择【Workstation-15-X】"><a href="#2、硬件兼容性选择【Workstation-15-X】" class="headerlink" title="2、硬件兼容性选择【Workstation 15.X】"></a>2、硬件兼容性选择【Workstation 15.X】</h4><p><img src="https://jimmy-blog-images.oss-cn-shanghai.aliyuncs.com/img/vmware/2.png"></p><h4 id="3、选择安装ios的方案"><a href="#3、选择安装ios的方案" class="headerlink" title="3、选择安装ios的方案"></a>3、选择安装ios的方案</h4><ul><li>方案一：选择下载好的ios文件</li><li>方案二：稍后安装<br><img src="https://jimmy-blog-images.oss-cn-shanghai.aliyuncs.com/img/vmware/3.png"><h4 id="4、选择操作系统"><a href="#4、选择操作系统" class="headerlink" title="4、选择操作系统"></a>4、选择操作系统</h4>操作系统为Linux<br>版本 CentOS 7 64位<br><img src="https://jimmy-blog-images.oss-cn-shanghai.aliyuncs.com/img/vmware/4.png"><h4 id="5、更改虚拟机的名称和位置"><a href="#5、更改虚拟机的名称和位置" class="headerlink" title="5、更改虚拟机的名称和位置"></a>5、更改虚拟机的名称和位置</h4>备注：位置不要放在C盘<br><img src="https://jimmy-blog-images.oss-cn-shanghai.aliyuncs.com/img/vmware/5.png"><h4 id="6、设置处理器配置"><a href="#6、设置处理器配置" class="headerlink" title="6、设置处理器配置"></a>6、设置处理器配置</h4>打开【任务管理器】-【性能】-【CPU】查看本机的内核和逻辑处理器数量<br>备注：处理器配置不要大于本机的内核数，超过启动虚拟机会失败<br>【处理器数量】*【每个处理器的内核数量】&lt;=【内核数】<br><img src="https://jimmy-blog-images.oss-cn-shanghai.aliyuncs.com/img/vmware/6.png"><h4 id="7、设置内存"><a href="#7、设置内存" class="headerlink" title="7、设置内存"></a>7、设置内存</h4>打开【任务管理器】-【性能】-【内存】查看本机的内存数<br>备注：一般设置2G即可<br><img src="https://jimmy-blog-images.oss-cn-shanghai.aliyuncs.com/img/vmware/7.png"><h4 id="8、设置网络"><a href="#8、设置网络" class="headerlink" title="8、设置网络"></a>8、设置网络</h4><img src="https://jimmy-blog-images.oss-cn-shanghai.aliyuncs.com/img/vmware/8.png"><h4 id="9、设置I-O控制器"><a href="#9、设置I-O控制器" class="headerlink" title="9、设置I/O控制器"></a>9、设置I/O控制器</h4><img src="https://jimmy-blog-images.oss-cn-shanghai.aliyuncs.com/img/vmware/9.png"><h4 id="10、设置磁盘类型"><a href="#10、设置磁盘类型" class="headerlink" title="10、设置磁盘类型"></a>10、设置磁盘类型</h4><img src="https://jimmy-blog-images.oss-cn-shanghai.aliyuncs.com/img/vmware/10.png"><h4 id="11、选择磁盘-创建新虚拟磁盘"><a href="#11、选择磁盘-创建新虚拟磁盘" class="headerlink" title="11、选择磁盘-创建新虚拟磁盘"></a>11、选择磁盘-创建新虚拟磁盘</h4><img src="https://jimmy-blog-images.oss-cn-shanghai.aliyuncs.com/img/vmware/11.png"><h4 id="12、分配磁盘大小"><a href="#12、分配磁盘大小" class="headerlink" title="12、分配磁盘大小"></a>12、分配磁盘大小</h4><img src="https://jimmy-blog-images.oss-cn-shanghai.aliyuncs.com/img/vmware/12.png"><h4 id="13、指定磁盘文件"><a href="#13、指定磁盘文件" class="headerlink" title="13、指定磁盘文件"></a>13、指定磁盘文件</h4><img src="https://jimmy-blog-images.oss-cn-shanghai.aliyuncs.com/img/vmware/13.png"><h4 id="14、完成"><a href="#14、完成" class="headerlink" title="14、完成"></a>14、完成</h4>备注：如果在【步骤4】选择的稍后安装，在自定义硬件时进行选择ios文件<br><img src="https://jimmy-blog-images.oss-cn-shanghai.aliyuncs.com/img/vmware/14.png"><h4 id="15、开启虚拟机"><a href="#15、开启虚拟机" class="headerlink" title="15、开启虚拟机"></a>15、开启虚拟机</h4><img src="https://jimmy-blog-images.oss-cn-shanghai.aliyuncs.com/img/vmware/15.png"><h4 id="16、选择Install-CentOS-7"><a href="#16、选择Install-CentOS-7" class="headerlink" title="16、选择Install CentOS 7"></a>16、选择Install CentOS 7</h4><img src="https://jimmy-blog-images.oss-cn-shanghai.aliyuncs.com/img/vmware/16.png"><h4 id="17、安装中"><a href="#17、安装中" class="headerlink" title="17、安装中"></a>17、安装中</h4><img src="https://jimmy-blog-images.oss-cn-shanghai.aliyuncs.com/img/vmware/17.png"><h4 id="18、选择语言"><a href="#18、选择语言" class="headerlink" title="18、选择语言"></a>18、选择语言</h4><img src="https://jimmy-blog-images.oss-cn-shanghai.aliyuncs.com/img/vmware/18.png"><h4 id="19、配置安装"><a href="#19、配置安装" class="headerlink" title="19、配置安装"></a>19、配置安装</h4></li><li>【安装源】-【本地介质】</li><li>【软件安装】-【最小安装】<br>备注：如果想有windows界面，可以选择【GNOME 桌面】<br><img src="https://jimmy-blog-images.oss-cn-shanghai.aliyuncs.com/img/vmware/19.png"></li><li>【安装位置】-【已选择自动分区】</li><li>【网络与主机名】-【打开】<br><img src="https://jimmy-blog-images.oss-cn-shanghai.aliyuncs.com/img/vmware/20.png"></li><li>【KDUMP】-【去掉勾选】<br><img src="https://jimmy-blog-images.oss-cn-shanghai.aliyuncs.com/img/vmware/21.png"></li><li>【开始安装】<br><img src="https://jimmy-blog-images.oss-cn-shanghai.aliyuncs.com/img/vmware/22.png"><h4 id="20、设置root密码"><a href="#20、设置root密码" class="headerlink" title="20、设置root密码"></a>20、设置root密码</h4><img src="https://jimmy-blog-images.oss-cn-shanghai.aliyuncs.com/img/vmware/23.png"><h4 id="21、重启"><a href="#21、重启" class="headerlink" title="21、重启"></a>21、重启</h4><img src="https://jimmy-blog-images.oss-cn-shanghai.aliyuncs.com/img/vmware/24.png"><h4 id="22、输入root和密码"><a href="#22、输入root和密码" class="headerlink" title="22、输入root和密码"></a>22、输入root和密码</h4><img src="https://jimmy-blog-images.oss-cn-shanghai.aliyuncs.com/img/vmware/25.png"><br>以上就算完成新建虚拟机了。<h4 id="23、输入用户名密码进入"><a href="#23、输入用户名密码进入" class="headerlink" title="23、输入用户名密码进入"></a>23、输入用户名密码进入</h4></li></ul><h4 id><a href="#" class="headerlink" title></a><img src="https://jimmy-blog-images.oss-cn-shanghai.aliyuncs.com/img/vmware/26.png"></h4><h3 id="三、问题"><a href="#三、问题" class="headerlink" title="三、问题"></a>三、问题</h3><h4 id="1、执行ifconfig-命令出错"><a href="#1、执行ifconfig-命令出错" class="headerlink" title="1、执行ifconfig 命令出错"></a>1、执行ifconfig 命令出错</h4><p>解决方案参考:<a href="https://blog.csdn.net/m0_37172770/article/details/126287372?spm=1001.2014.3001.5501">Linux中ifconfig command not found解决方法</a></p>]]></content>
    
    
    <categories>
      
      <category>vmware</category>
      
    </categories>
    
    
    <tags>
      
      <tag>vmware</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>【大数据】统一打包的名词备忘录</title>
    <link href="/blog/docs/hadoop-00/bigdata/hadoop/hadoop-00/"/>
    <url>/blog/docs/hadoop-00/bigdata/hadoop/hadoop-00/</url>
    
    <content type="html"><![CDATA[<blockquote><p>汝之观览，吾之幸也！本文章主要统计大数据方面的名词概念，不至于一上来就看到那么多技术名词晕头转向。随时更新<br>[TOC]</p></blockquote><h3 id="一、Linux"><a href="#一、Linux" class="headerlink" title="一、Linux"></a>一、Linux</h3><p>Linux是一个操作系统，是在Unix基础上进行开发的。<br>Linux的是<a href="https://baike.baidu.com/item/%E6%9E%97%E7%BA%B3%E6%96%AF%C2%B7%E6%9C%AC%E7%BA%B3%E7%AC%AC%E5%85%8B%E7%89%B9%C2%B7%E6%89%98%E7%93%A6%E5%85%B9/1034429?fr=aladdin">林纳斯·本纳第克特·托瓦兹（Linus Benedict Torvalds）</a>在大学期间在Unix做了磁盘驱动与文件系统，这些就成为了Linxu的内核。如果在内核上基础上加了软件，就会成为Linux的发行版，比如RedHat、CentOs、<a href="https://www.deepin.org/index/zh">Deppin-基于Linux的开源国产操作系统</a>等<br><img src="https://jimmy-blog-images.oss-cn-shanghai.aliyuncs.com/img/linux/linux%E7%9A%84%E5%8F%91%E8%A1%8C%E7%89%88%E6%9E%B6%E6%9E%84.png" alt="linux"><br><img src="https://jimmy-blog-images.oss-cn-shanghai.aliyuncs.com/img/linux/linux%E5%8F%91%E8%A1%8C%E7%89%88.png" alt="linux发行版本"></p><h4 id="虚拟机"><a href="#虚拟机" class="headerlink" title="虚拟机"></a>虚拟机</h4><p>虚拟机（Virtual Machine）指通过软件模拟的具有完整硬件系统功能的，运行在一个完全隔离环境中的完整计算机系统。<br>一般虚拟机就是指操作系统。</p><h4 id="Vmware"><a href="#Vmware" class="headerlink" title="Vmware"></a>Vmware</h4><p>是一款虚拟机软件，兼容性强，快照功能便捷，方便，允许你在任意开机时刻创建系统快照和恢复。其他的虚拟机软件（VirtualBox）</p><h3 id="二、大数据"><a href="#二、大数据" class="headerlink" title="二、大数据"></a>二、大数据</h3><p><img src="https://jimmy-blog-images.oss-cn-shanghai.aliyuncs.com/img/bigdata/hadoop%E7%94%9F%E6%80%81%E5%9C%88.png"><br>常见的数据单位<br>| 1Byte（字节）=8bit（比特） | 1K（千）=1024Byte  | 1M（兆）=1024K     | 1G（千兆）=1024M   |<br>| ————————– | —————— | —————— | —————— |<br>| <strong>1T（太）=1024G</strong>         | <strong>1P（拍）=1024T</strong> | <strong>1E（艾）=1024P</strong> | <strong>1Z（泽）=1024E</strong> |<br>| <strong>1Y（尧）=1024Z</strong>         | <strong>1B（布）=1024Y</strong> | <strong>1N（诺）=1024B</strong> | <strong>1D（刀）=1024N</strong> |</p><p>一般我们了解的只到TB级别，再往上的数据我们怎么处理，这就引申出大数据的概念。<br>大数据（Big Data）,是值无法在一定时间范围内用常规工具进行捕捉、管理和处理的数据集合。是需要新处理模式才能具有更强的决策力、洞察发现力和流程优化能力的海量、高增长率和多样化的信息资产。<br>大数据主要解决的问题：海量数据的<font color="red">存储</font>和海量数据的<font color="red">计算</font>问题</p><h4 id="Hadoop"><a href="#Hadoop" class="headerlink" title="Hadoop"></a>Hadoop</h4><p>是Apache基金会开发的分布式系统基础架构。广泛的概念是Hadoop生态圈。<br>Google的三篇论文：</p><figure class="highlight livescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs livescript">GFS --&gt; HDFS ：分布式框架<br><span class="hljs-built_in">Map</span> Reduce --&gt;MR：分布式计算<br>BigTable --&gt;HBase：分布式数据库<br></code></pre></td></tr></table></figure><p><img src="https://jimmy-blog-images.oss-cn-shanghai.aliyuncs.com/img/bigdata/Hadoop.png"></p><h4 id="Hive"><a href="#Hive" class="headerlink" title="Hive"></a>Hive</h4><p>由Facebook开源用于解决海量结构化日志的数据统计工具。Hive是基于Hadoop的一个数据仓库工具，可以将结构化的数据文件映射为一张表，并提供类SQL查询功能。<br>本质是：将HQL转化成MapReduce程序，不做存储与计算。存储还是在HDFS，计算还是用MapReduce。<br><img src="https://jimmy-blog-images.oss-cn-shanghai.aliyuncs.com/img/bigdata/Hive.png"></p><h4 id="HBase"><a href="#HBase" class="headerlink" title="HBase"></a>HBase</h4><p>HBase是一个分布式的、面向列的开源数据库,适合于非结构化数据存储的数据库。<br><img src="https://jimmy-blog-images.oss-cn-shanghai.aliyuncs.com/img/bigdata/hbase.png"></p><h4 id="Impala"><a href="#Impala" class="headerlink" title="Impala"></a>Impala</h4><p>用于处理存储在Hadoop集群中的大量数据的MPP（大规模并行处理）SQL查询引擎。 它是一个用C ++和Java编写的开源软件。 与其他Hadoop的SQL引擎相比，它提供了高性能和低延迟。<br>Impala是性能最高的SQL引擎（提供类似RDBMS的体验），它提供了访问存储在Hadoop分布式文件系统中的数据的最快方法。<br><img src="https://jimmy-blog-images.oss-cn-shanghai.aliyuncs.com/img/bigdata/impala.png"></p><h4 id="Spark"><a href="#Spark" class="headerlink" title="Spark"></a>Spark</h4><p>是专为大规模数据处理而设计的快速通用的计算引擎<br>首先，高级 API 剥离了对集群本身的关注，Spark 应用开发者可以专注于应用所要做的计算本身。<br>其次，Spark 很快，支持交互式计算和复杂算法。<br>最后，Spark 是一个通用引擎，可用它来完成各种各样的运算，包括 SQL 查询、文本处理、机器学习等，而在 Spark 出现之前，我们一般需要学习各种各样的引擎来分别处理这些需求。<br><img src="https://jimmy-blog-images.oss-cn-shanghai.aliyuncs.com/img/bigdata/spark.png"></p><h4 id="ClickHouse"><a href="#ClickHouse" class="headerlink" title="ClickHouse"></a>ClickHouse</h4><p>是俄罗斯的 Yandex 于 2016 年开源的用于在线分析处理查询（OLAP :Online Analytical Processing）MPP架构的列式存储数据库（DBMS：Database Management System），能够使用 SQL 查询实时生成分析数据报告。ClickHouse的全称是Click Stream，Data WareHouse。<br><img src="https://jimmy-blog-images.oss-cn-shanghai.aliyuncs.com/img/bigdata/clickhouse.png"></p><h4 id="Kafka"><a href="#Kafka" class="headerlink" title="Kafka"></a>Kafka</h4><p>是一种高吞吐量的分布式发布订阅消息系统<br><img src="https://jimmy-blog-images.oss-cn-shanghai.aliyuncs.com/img/bigdata/kafka.png"></p><h4 id="Redis"><a href="#Redis" class="headerlink" title="Redis"></a>Redis</h4><p>是一个key-value存储系统，它支持存储的value类型相对更多，包括string(字符串)、list(链表)、set(集合)、zset(sorted set –有序集合)和hash（哈希类型）。<br><img src="https://jimmy-blog-images.oss-cn-shanghai.aliyuncs.com/img/bigdata/redis.png"></p><h4 id="CDH"><a href="#CDH" class="headerlink" title="CDH"></a>CDH</h4><p>Cloudera Hadoop发行版（Cloudera’s Distribution Including Apache Hadoop，简称CDH），<br>Cloudera提供一个可伸缩，稳定的，综合的企业级大数据管理平台，它拥有最多的部署案例，提供强大的部署，管理和监控工具。<br><img src="https://jimmy-blog-images.oss-cn-shanghai.aliyuncs.com/img/bigdata/cloudermanager.png"></p><h4 id="Hue"><a href="#Hue" class="headerlink" title="Hue"></a>Hue</h4><p>是一款开源的可界面化配置调度、运行代码或管理集群文件系统的工具。<br><img src="https://jimmy-blog-images.oss-cn-shanghai.aliyuncs.com/img/bigdata/hue.png"></p><h4 id="Oozie"><a href="#Oozie" class="headerlink" title="Oozie"></a>Oozie</h4><p>是一个基于工作流引擎的开源框架，是由Cloudera公司贡献给Apache的，它能够提供对Hadoop MapReduce和Pig Jobs的任务调度与协调。<br><img src="https://jimmy-blog-images.oss-cn-shanghai.aliyuncs.com/img/bigdata/Oozie.png"></p><h3 id="三、数据仓库"><a href="#三、数据仓库" class="headerlink" title="三、数据仓库"></a>三、数据仓库</h3><h4 id="ETL（Extract-Transform-Load）"><a href="#ETL（Extract-Transform-Load）" class="headerlink" title="ETL（Extract-Transform-Load）"></a>ETL（Extract-Transform-Load）</h4><p>数据仓库技术，用来描述将<strong>数据</strong>从来源端经过抽取（extract）、转换（transform）、加载（load）至目的端的过程。<strong>ETL</strong>一词较常用在<a href="https://baike.baidu.com/item/%E6%95%B0%E6%8D%AE%E4%BB%93%E5%BA%93">数据仓库</a>，但其对象并不限于数据仓库。</p><h5 id="主流ETL工具"><a href="#主流ETL工具" class="headerlink" title="主流ETL工具"></a>主流ETL工具</h5><h6 id="Kettle"><a href="#Kettle" class="headerlink" title="Kettle"></a>Kettle</h6><p>是目前最为流行的一款开源etl工具之一，被Pentaho公司收购后正式更名为Pentaho Data Integration，但在中国，最为业内大众所熟知的还是“Kettle”。<br><img src="https://jimmy-blog-images.oss-cn-shanghai.aliyuncs.com/img/bigdata/kettle.png"></p><h6 id="Talend"><a href="#Talend" class="headerlink" title="Talend"></a>Talend</h6><p>是第一家针对数据集成工具市场的ETL开源软件供应商。Talend以它的技术和商业双重模式为ETL服务提供了一个全新的远景。<br><img src="https://jimmy-blog-images.oss-cn-shanghai.aliyuncs.com/img/bigdata/talend.png"></p><h6 id="DataX"><a href="#DataX" class="headerlink" title="DataX"></a>DataX</h6><p>是阿里巴巴开源的一个异构数据源离线同步工具，致力于实现包括关系型数据库(MySQL、Oracle等)、HDFS、Hive、ODPS、HBase、FTP等各种异构数据源之间稳定高效的数据同步功能。目前已经有了比较全面的插件体系，主流的RDBMS数据库、NOSQL、大数据计算系统都已经接入。<br><img src="https://jimmy-blog-images.oss-cn-shanghai.aliyuncs.com/img/bigdata/datax.png"></p><h6 id="DataStage"><a href="#DataStage" class="headerlink" title="DataStage"></a>DataStage</h6><p>是IBM旗下的一款十分强大的ETL工具。<br>支持对数据结构从简单到高度复杂的大量数据进行收集、变换以及分发操作，且管理到达的数据以及定期或按调度接收的数据。<br><img src="https://jimmy-blog-images.oss-cn-shanghai.aliyuncs.com/img/bigdata/datastage.png"></p><h4 id="分层"><a href="#分层" class="headerlink" title="分层"></a>分层</h4><h5 id="ODS（Operational-Data-Store，操作数据层）"><a href="#ODS（Operational-Data-Store，操作数据层）" class="headerlink" title="ODS（Operational Data Store，操作数据层）"></a>ODS（Operational Data Store，操作数据层）</h5><p>把操作系统数据几乎无处理的存放在数据仓库系统中。</p><ul><li>实现功能：该层为数据接入源层，业务源系统数据接入到此层，此层数据不做任何加工，禁止重复进入</li><li>数据来源范围：业务源系统</li><li>数据存储时长：根据业务需求状况<h5 id="CDM（Common-Data-Model，通用数据模型层-数据中间层）"><a href="#CDM（Common-Data-Model，通用数据模型层-数据中间层）" class="headerlink" title="CDM（Common Data Model，通用数据模型层/数据中间层）"></a>CDM（Common Data Model，通用数据模型层/数据中间层）</h5>主要完成公共数据加工与整合，建立一致性的维度，构建可复用面向分析和统计的明细事实表以及汇总事实表。<h6 id="DIM（Dimension，公共维度层）"><a href="#DIM（Dimension，公共维度层）" class="headerlink" title="DIM（Dimension，公共维度层）"></a>DIM（Dimension，公共维度层）</h6>是CDM层中的公共维度层，基于维度建模理论，建设企业一致性公共维度数据。</li><li>实现功能：该层为公共维表层，该层独立于dwd、dws、ads，为dwd、dws、ads提供维度字段说明。</li><li>数据来源范围：ods、人工录入</li><li>数据存储时长：根据业务需求状况<h6 id="DWD（Data-Warehouse-Detail-Model，明细宽表层）"><a href="#DWD（Data-Warehouse-Detail-Model，明细宽表层）" class="headerlink" title="DWD（Data Warehouse Detail Model，明细宽表层）"></a>DWD（Data Warehouse Detail Model，明细宽表层）</h6>是CDM层中的明细宽表层，用于存放完整详细历史数据。</li><li>实现功能：该层为融合数据层，主要对分来源基础数据进行数据整合。该层数据可以对应用开放。用于解决数据融合的问题。</li><li>数据来源范围：此层数据来源于分来源基础数据表</li><li>数据存储时长：根据业务需求保留<h6 id="DWS（Data-Warehouse-Subject，数据汇总层）"><a href="#DWS（Data-Warehouse-Subject，数据汇总层）" class="headerlink" title="DWS（Data Warehouse Subject，数据汇总层）"></a>DWS（Data Warehouse Subject，数据汇总层）</h6>是CDM层中存放详细历史数据的公共汇总数据层，面向分析主题建模。</li><li>实现功能：该层为宽表数据层，主要根据多个基础数据层表，整合应用需要的指标宽表。为全局抽象的业务实体及汇总型事实表</li><li>数据来源范围：dwd</li><li>数据存储时长：根据业务需求状况<h5 id="ADS（Application-Data-Service，应用数据层）"><a href="#ADS（Application-Data-Service，应用数据层）" class="headerlink" title="ADS（Application Data Service，应用数据层）"></a>ADS（Application Data Service，应用数据层）</h5>提供直接面向业务或应用的数据，主要对个性化指标数据进行架构处理，如无公用性或复杂性（如指数型、比值型、排名型等指标数据）的指标数据加工。</li><li>实现功能：该层为应用数据层，根据业务需求组织数据，该层支持百花齐放、尽可能都依赖dws，特殊情况可依赖dwd的数据，该层定期需要定期review，将公共指标沉淀到dws中</li><li>数据来源范围：dws、dwd</li><li>数据存储时长：根据业务需求状况<h5 id="EVL（Evaluation，数据评价层）"><a href="#EVL（Evaluation，数据评价层）" class="headerlink" title="EVL（Evaluation，数据评价层）"></a>EVL（Evaluation，数据评价层）</h5></li><li>实现功能：该层为数据评价层，该层独立与ods、dwd、dws，对其他层进行数据的检测和评价</li><li>数据来源：其他各层</li><li>存储时长：根据业务需求情况<h4 id="分域"><a href="#分域" class="headerlink" title="分域"></a>分域</h4></li><li>业务域有用户数据和业务数据，比如用户的消费习惯、终端信息、ARPU的分组、业务内容，业务受众人群等</li><li>操作域有网络数据，比如信令、告警、故障、网络资源等</li><li>运动域有位置信息，比如对象的流动轨迹、地图信息等<h4 id="数据实体"><a href="#数据实体" class="headerlink" title="数据实体"></a>数据实体</h4>实体是指现实世界中客观存在的并可以相互区分的对象或事物。就数据库而言，实体往往指某类事物的集合。可以是具体的人事物，也可以是抽象的概念、联系。<h4 id="账期"><a href="#账期" class="headerlink" title="账期"></a>账期</h4>年、月、日、周、时、分、秒、实时、历史<h4 id="编码规则"><a href="#编码规则" class="headerlink" title="编码规则"></a>编码规则</h4>表名的编码规则：<figure class="highlight bnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs bnf">ods_[业务单位]_<span class="hljs-attribute">&lt;源系统简写&gt;</span>_<span class="hljs-attribute">&lt;源系统表名&gt;</span><br>dwd_<span class="hljs-attribute">&lt;数据域&gt;</span>_<span class="hljs-attribute">&lt;数据内容描述&gt;</span> _[数据周期]<br>dws_<span class="hljs-attribute">&lt;数据域&gt;</span>_<span class="hljs-attribute">&lt;数据粒度&gt;</span>_<span class="hljs-attribute">&lt;表内容描述&gt;</span>_[数据周期]<br>ads_<span class="hljs-attribute">&lt;应用名称&gt;</span>_<span class="hljs-attribute">&lt;数据内容描述&gt;</span>_[数据周期]<br>dim_<span class="hljs-attribute">&lt;数据内容描述&gt;</span><br>evl_<span class="hljs-attribute">&lt;主题域&gt;</span>_<span class="hljs-attribute">&lt;数据内容描述&gt;</span><br></code></pre></td></tr></table></figure><h4 id="数据目录"><a href="#数据目录" class="headerlink" title="数据目录"></a>数据目录</h4>是层、域的关系合集展示<h3 id="四、其他"><a href="#四、其他" class="headerlink" title="四、其他"></a>四、其他</h3><h4 id="C-S、B-S"><a href="#C-S、B-S" class="headerlink" title="C/S、B/S"></a>C/S、B/S</h4>C/S : Client/Server , 客户端/服务器。传统的桌面级的应用程序，基于客户端的应用。<br>B/S : Browser/Server , 浏览器/服务器。web应用程序，基于浏览器的应用<br>区别：</li></ul><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs text">[1] 语言：<br>     C/S: c,c++,<br>     B/S：java,php,.Net,js,nodeJs<br><br>[2] 更新：<br>     C/S: 下载新版本的客户端，升级不大方便。<br>     B/S：热更新，永远都是最新的。<br><br>[3] 数据通信：<br>    C/S: 基于自定义的应用层协议<br>    B/S：基于http协议，基于http的服务器拿来就能用，nginx，apache，微软的IIS这些<br><br>[4] 跨平台：<br>     C/S：开发时可能需要考虑跨平台问题(不同操作系统下)<br>     B/S：开发时跨平台方便，毕竟每个平台都有浏览器<br>[5] 数据处理：<br>     C/S: 支持离线，数据可以本地保存或处理.<br>     B/S： 支持云端，数据保存在云端，随时随地联网就能访问<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>hadoop</category>
      
    </categories>
    
    
    <tags>
      
      <tag>hadoop</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>【大数据】扒开Hadoop的外衣，窥探其中缘由</title>
    <link href="/blog/docs/hadoop-01/bigdata/hadoop/hadoop-01/"/>
    <url>/blog/docs/hadoop-01/bigdata/hadoop/hadoop-01/</url>
    
    <content type="html"><![CDATA[<blockquote><p>汝之观览，吾之幸也！“十四五”大数据产业规划，规划到2025年，大数据产业市场规模突破3万亿，大数据核心人才缺口高达230万，这是挑战，也是机遇。未来的方向大数据肯定占一席之地，所以从现在起自身也要转型才是。居安思危，才能游刃有余。</p></blockquote><h3 id="一、Hadoop的组成"><a href="#一、Hadoop的组成" class="headerlink" title="一、Hadoop的组成"></a>一、Hadoop的组成</h3><h4 id="1、HDFS架构：（数据存储）存放在磁盘上"><a href="#1、HDFS架构：（数据存储）存放在磁盘上" class="headerlink" title="1、HDFS架构：（数据存储）存放在磁盘上"></a>1、HDFS架构：（数据存储）存放在磁盘上</h4><h5 id="（1）NameNode（nn）"><a href="#（1）NameNode（nn）" class="headerlink" title="（1）NameNode（nn）"></a>（1）NameNode（nn）</h5><p>存储文件的元数据，如文件名、文件目录结构、文件属性（生成时间、副本数、文件权限），以及每个文件的块列表和块所在的DataNode等</p><h5 id="（2）DataNode（dn）"><a href="#（2）DataNode（dn）" class="headerlink" title="（2）DataNode（dn）"></a>（2）DataNode（dn）</h5><p>在本地文件系统存储文件块数据，以及块数据的校验和</p><h5 id="（3）Secondary-NameNode（2nn）"><a href="#（3）Secondary-NameNode（2nn）" class="headerlink" title="（3）Secondary NameNode（2nn）"></a>（3）Secondary NameNode（2nn）</h5><p>每隔一段时间对NameNode元数据备份</p><h4 id="2、Yarn（资源调度）：负责CPU与内存的调用"><a href="#2、Yarn（资源调度）：负责CPU与内存的调用" class="headerlink" title="2、Yarn（资源调度）：负责CPU与内存的调用"></a>2、Yarn（资源调度）：负责CPU与内存的调用</h4><h5 id="（1）ResourceManager（RM）"><a href="#（1）ResourceManager（RM）" class="headerlink" title="（1）ResourceManager（RM）"></a>（1）ResourceManager（RM）</h5><p>（2）</p><h4 id="3、MapReduce（计算）"><a href="#3、MapReduce（计算）" class="headerlink" title="3、MapReduce（计算）"></a>3、MapReduce（计算）</h4>]]></content>
    
    
    <categories>
      
      <category>hadoop</category>
      
    </categories>
    
    
    <tags>
      
      <tag>bigdata,hadoop</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>【大数据】搭建Hadoop集群（附一键部署脚本）</title>
    <link href="/blog/docs/hadoop-02/bigdata/hadoop/hadoop-02/"/>
    <url>/blog/docs/hadoop-02/bigdata/hadoop/hadoop-02/</url>
    
    <content type="html"><![CDATA[<blockquote><p>汝之观览，吾之幸也！本文主要讲解Hadoop运行环境的搭建（三台虚拟机），一键脚本部署，全自动化，不再需要按照文档一个一个进行配置，脚本执行后就可登录hadoop集群。</p></blockquote><p>[TOC]</p><h3 id="一、最小安装CentOS"><a href="#一、最小安装CentOS" class="headerlink" title="一、最小安装CentOS"></a>一、最小安装CentOS</h3><p>如果使用Vmware安装虚拟机请看<a href="https://blog.csdn.net/m0_37172770/article/details/126287521?spm=1001.2014.3001.5501">【大数据】用VMware搭建自己的虚拟机</a>（选择最小安装，内存4G、磁盘50G）</p><p>最小安装好虚拟机后一般使用ifconfig 查看ip，但最小安装后是没有这个命令，我们也可以使用 ip addr show查看</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">ip addr show<br></code></pre></td></tr></table></figure><h3 id="二、准备jdk与hadoop包"><a href="#二、准备jdk与hadoop包" class="headerlink" title="二、准备jdk与hadoop包"></a>二、准备jdk与hadoop包</h3><p>在/opt 目录下建software、module文件夹，将压缩包放到software下</p><p>具体安装包可加公众号【纯码农（purecodefarmer）】输入“hadoop”即可获取下载链接</p><h3 id="三、一键部署脚本分解"><a href="#三、一键部署脚本分解" class="headerlink" title="三、一键部署脚本分解"></a>三、一键部署脚本分解</h3><p>新建one、xsync脚本放到/bin目录下，赋权限</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">chmod</span> +x one<br><span class="hljs-built_in">chmod</span> +x xsync<br><span class="hljs-built_in">mv</span> one /bin/<br><span class="hljs-built_in">mv</span> xsync /bin/<br></code></pre></td></tr></table></figure><p><img src="https://jimmy-blog-images.oss-cn-shanghai.aliyuncs.com/img/hadoop/one-00.png"></p><h4 id="1、安装工具包"><a href="#1、安装工具包" class="headerlink" title="1、安装工具包"></a>1、安装工具包</h4><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs text">expect:expect工具包，实现自动交互功能<br>epel-release：额外的软件源，就可以安装更多的软件包<br>psmisc：工具包 <br>nc：工具包 <br>net-tools:网络工具（ifconfig） <br>rsync:远程同步 <br>vim：vim编辑器 <br>lrzsz： 同步<br>ntp：时间同步<br>git：git库<br>libzstd、openssl-static、tree、 iotop：hadoop的标准库<br></code></pre></td></tr></table></figure><p>脚本内容</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs shell">yum install -y expect<br>yum install -y epel-release<br>yum install -y psmisc nc net-tools rsync vim lrzsz ntp libzstd openssl-static tree iotop git<br></code></pre></td></tr></table></figure><p>执行脚本命令</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">one 0<br></code></pre></td></tr></table></figure><p><img src="https://jimmy-blog-images.oss-cn-shanghai.aliyuncs.com/img/hadoop/one-0.png"></p><h4 id="2、修改主机名"><a href="#2、修改主机名" class="headerlink" title="2、修改主机名"></a>2、修改主机名</h4><p>脚本内容</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs shell">echo &quot;-------修改系统名称-------&quot;<br>hostnamectl --static set-hostname $1<br></code></pre></td></tr></table></figure><p>执行脚本命令</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">one 2 hdp101 101<br></code></pre></td></tr></table></figure><h4 id="3、修改ip"><a href="#3、修改ip" class="headerlink" title="3、修改ip"></a>3、修改ip</h4><p>脚本内容</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs shell">echo &quot;-------修改IP静态地址-------&quot;<br><span class="hljs-meta prompt_">#</span><span class="language-bash">先检查文件是否已被修改过</span><br>chk=`cat /etc/sysconfig/network-scripts/ifcfg-ens33 | grep static`<br>if [ &quot;$chk&quot; == &quot;&quot; ];then<br><span class="hljs-meta prompt_">#</span><span class="language-bash">修改/etc/sysconfig/network-scripts/ifcfg-ens33文件中的dhcp</span><br>sed -i &#x27;s/dhcp/static/&#x27; /etc/sysconfig/network-scripts/ifcfg-ens33<br>echo &quot;IPADDR=192.168.10.$1&quot; &gt;&gt; /etc/sysconfig/network-scripts/ifcfg-ens33<br>echo &quot;NETMASK=255.255.255.0&quot; &gt;&gt; /etc/sysconfig/network-scripts/ifcfg-ens33<br>echo &quot;GATEWAY=192.168.10.2&quot; &gt;&gt; /etc/sysconfig/network-scripts/ifcfg-ens33<br>echo &quot;DNS1=192.168.10.2&quot; &gt;&gt; /etc/sysconfig/network-scripts/ifcfg-ens33<br>echo &quot;PREFIX=24&quot; &gt;&gt; /etc/sysconfig/network-scripts/ifcfg-ens33<br>systemctl restart network<br>else<br>sed -i &quot;s/IPADDR=192.168.10.101/IPADDR=192.168.10.&quot;$1&quot;/&quot; /etc/sysconfig/network-scripts/ifcfg-ens33<br>systemctl restart network<br>fi<br></code></pre></td></tr></table></figure><p>执行脚本命令</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">one 3 hdp101 101<br></code></pre></td></tr></table></figure><p><img src="https://jimmy-blog-images.oss-cn-shanghai.aliyuncs.com/img/hadoop/%E7%BD%91%E7%BB%9C%E8%AE%BE%E7%BD%AE.png"><br>备注：需要看本机的ip与网关，修改ip之后需要重新登录</p><h4 id="4、关闭防火墙"><a href="#4、关闭防火墙" class="headerlink" title="4、关闭防火墙"></a>4、关闭防火墙</h4><p>脚本内容</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;-------关闭防火墙-------&quot;</span><br>systemctl stop firewalld<br>systemctl <span class="hljs-built_in">disable</span> firewalld<br></code></pre></td></tr></table></figure><p>执行脚本命令</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">one 4<br></code></pre></td></tr></table></figure><p><img src="https://jimmy-blog-images.oss-cn-shanghai.aliyuncs.com/img/hadoop/one-4.png"></p><h4 id="5、创建用户"><a href="#5、创建用户" class="headerlink" title="5、创建用户"></a>5、创建用户</h4><p>脚本内容</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs shell">echo &quot;请注意,在创建用户时会先对该用户进行删除操作以确保脚本运行成功, 如已有该用户请慎重输入用户名!&quot;<br>read -p &quot;继续请输入 1 ,停止请输入 2. : &quot; IS_CONTINUE<br>if [ $&#123;IS_CONTINUE&#125; -ne 1 ]; then<br>  echo &quot;停止运行该脚本!&quot;<br>  exit<br>fi<br>read -p &quot;请输入新增用户用户名 : &quot; username<br>read -p &quot;请输入新增用户密码 : &quot; password<br>userdel -r $&#123;username&#125;<br>useradd -d /home/$&#123;username&#125; $&#123;username&#125;<br>expect -c&quot;<br> spawn passwd $&#123;username&#125;<br> expect &#123;<br> &quot;*yes/no*&quot; &#123;send &quot;yes\r&quot;;exp_continue&#125;<br> &quot;*New password:*&quot; &#123;send &quot;$&#123;password&#125;\r&quot;;exp_continue&#125;<br> &quot;*Retype new password:*&quot; &#123;send &quot;$&#123;password&#125;\r&quot;;exp_continue&#125;<br>&#125;&quot;<br>echo &quot;配置新增用户root权限&quot;<br>sed -i &quot;93a &quot;$&#123;username&#125;&quot; ALL=(ALL) NOPASSWD:ALL&quot; /etc/sudoers<br>echo &quot;创建software、module文件夹&quot;<br>mkdir /opt/module /opt/software<br>chown $&#123;username&#125;:$&#123;username&#125; /opt/module /opt/software<br>echo &quot;切换用户&quot;<br>su - $&#123;username&#125;<br></code></pre></td></tr></table></figure><p>执行脚本命令</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">one 1<br></code></pre></td></tr></table></figure><p><img src="https://jimmy-blog-images.oss-cn-shanghai.aliyuncs.com/img/hadoop/one-1.png"></p><h4 id="6、解压jdk压缩包并配置jdk的环境变量"><a href="#6、解压jdk压缩包并配置jdk的环境变量" class="headerlink" title="6、解压jdk压缩包并配置jdk的环境变量"></a>6、解压jdk压缩包并配置jdk的环境变量</h4><p>先建好文件夹</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs awk">mkdir <span class="hljs-regexp">/opt/</span>software <span class="hljs-regexp">/opt/m</span>odule<br></code></pre></td></tr></table></figure><p>脚本内容</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs shell">echo &quot;-------安装JDK并配置环境变量-------&quot;<br><span class="hljs-meta prompt_">#</span><span class="language-bash">检查JDK是否已经安装过</span><br>check_soft_folder jdk8<br>if [ $? == 1 ];then<br><span class="hljs-meta prompt_">#</span><span class="language-bash">在opt文件夹下搜索jdk的tar.gz文件</span><br>jdkName=`ls /opt/software/ | grep jdk*`<br><span class="hljs-meta prompt_">#</span><span class="language-bash">将文件解压到对应的soft文件夹下</span><br>tar -zxvf /opt/software/$jdkName -C /opt/module/jdk8 --strip-components 1<br><span class="hljs-meta prompt_">#</span><span class="language-bash">配置/etc/profile文件</span><br>sudo touch /etc/profile.d/my_env.sh<br>echo &quot;配置jdk环境变量&quot;<br>echo &quot;&quot; &gt;&gt; /etc/profile.d/my_env.sh<br>echo &quot;#java environment&quot; &gt;&gt; /etc/profile.d/my_env.sh<br>echo &quot;export JAVA_HOME=/opt/module/jdk8&quot; &gt;&gt; /etc/profile.d/my_env.sh<br>echo &quot;export CLASSPATH=.:\$&#123;JAVA_HOME&#125;/jre/lib/rt.jar:\$&#123;JAVA_HOME&#125;/lib/dt.jar:\$&#123;JAVA_HOME&#125;/lib/tools.jar&quot; &gt;&gt; /etc/profile.d/my_env.sh<br>echo &quot;export PATH=\$PATH:\$&#123;JAVA_HOME&#125;/bin&quot; &gt;&gt; /etc/profile.d/my_env.sh<br>fi<br></code></pre></td></tr></table></figure><p>执行脚本命令</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">one 5<br></code></pre></td></tr></table></figure><h4 id="7、解压hadoop压缩包并配置hadoop的环境变量"><a href="#7、解压hadoop压缩包并配置hadoop的环境变量" class="headerlink" title="7、解压hadoop压缩包并配置hadoop的环境变量"></a>7、解压hadoop压缩包并配置hadoop的环境变量</h4><p>脚本内容</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs shell">echo &quot;-------安装Hadoop并配置环境变量-------&quot;<br><span class="hljs-meta prompt_">#</span><span class="language-bash">检查JDK是否已经安装过</span><br>check_soft_folder hadoop330<br>if [ $? == 1 ];then<br><span class="hljs-meta prompt_">#</span><span class="language-bash">在opt文件夹下搜索Hadoop的tar.gz文件</span><br>hadoopName=`ls /opt/software/ | grep hadoop*`<br><span class="hljs-meta prompt_">#</span><span class="language-bash">将文件解压到对应的soft文件夹下</span><br>tar -zxvf /opt/software/$hadoopName -C /opt/module/hadoop330 --strip-components 1<br><span class="hljs-meta prompt_">#</span><span class="language-bash">配置/etc/profile.d/my_env.sh文件</span><br>echo &quot;配置hadoop环境变量&quot;<br>echo &quot;&quot; &gt;&gt; /etc/profile.d/my_env.sh<br>echo &quot;#hadoop environment&quot; &gt;&gt; /etc/profile.d/my_env.sh<br>echo &quot;export HADOOP_HOME=/opt/module/hadoop330&quot; &gt;&gt; /etc/profile.d/my_env.sh<br>echo &quot;export PATH=\$PATH:\$&#123;HADOOP_HOME&#125;/bin&quot; &gt;&gt; /etc/profile.d/my_env.sh<br>echo &quot;export PATH=\$PATH:\$&#123;HADOOP_HOME&#125;/sbin&quot; &gt;&gt; /etc/profile.d/my_env.sh<br>fi<br></code></pre></td></tr></table></figure><p>执行脚本命令</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">one 6<br></code></pre></td></tr></table></figure><p>备注：非root用户配置环境变量</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs awk">touch <span class="hljs-regexp">/etc/</span>profile.d/my_env.sh<br></code></pre></td></tr></table></figure><p>将下面的内容复制到my_env.sh中</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs routeros"><span class="hljs-comment">#JAVA_HOME</span><br><span class="hljs-built_in">export</span> <span class="hljs-attribute">JAVA_HOME</span>=/opt/module/jdk8<br><span class="hljs-built_in">export</span> <span class="hljs-attribute">PATH</span>=<span class="hljs-variable">$PATH</span>:$JAVA_HOME/bin<br><span class="hljs-comment">##HADOOP_HOME</span><br><span class="hljs-built_in">export</span> <span class="hljs-attribute">HADOOP_HOME</span>=/opt/module/hadoop330<br><span class="hljs-built_in">export</span> <span class="hljs-attribute">PATH</span>=<span class="hljs-variable">$PATH</span>:$HADOOP_HOME/bin<br><span class="hljs-built_in">export</span> <span class="hljs-attribute">PATH</span>=<span class="hljs-variable">$PATH</span>:$HADOOP_HOME/sbin<br></code></pre></td></tr></table></figure><p><img src="https://jimmy-blog-images.oss-cn-shanghai.aliyuncs.com/img/hadoop/one-6-7.png"></p><h4 id="8、克隆虚拟机（无脚本）"><a href="#8、克隆虚拟机（无脚本）" class="headerlink" title="8、克隆虚拟机（无脚本）"></a>8、克隆虚拟机（无脚本）</h4><p><img src="https://jimmy-blog-images.oss-cn-shanghai.aliyuncs.com/img/hadoop/%E5%85%8B%E9%9A%86.png"></p><h4 id="9、分发脚本xsync"><a href="#9、分发脚本xsync" class="headerlink" title="9、分发脚本xsync"></a>9、分发脚本xsync</h4><p>脚本内容</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># 获取输入参数个数，如果没有参数，直接退出</span><br>pcount=<span class="hljs-variable">$#</span><br><span class="hljs-keyword">if</span>((pcount==0)); <span class="hljs-keyword">then</span><br><span class="hljs-built_in">echo</span> no args...;<br><span class="hljs-built_in">exit</span>;<br><span class="hljs-keyword">fi</span><br><span class="hljs-comment"># 获取文件名称</span><br>pname=<span class="hljs-variable">$1</span><br>fname=`<span class="hljs-built_in">basename</span> <span class="hljs-variable">$pname</span>`<br><span class="hljs-built_in">echo</span> fname=<span class="hljs-variable">$fname</span><br><span class="hljs-comment"># 获取上级目录到绝对路径</span><br>pdir=`<span class="hljs-built_in">cd</span> -P $(<span class="hljs-built_in">dirname</span> <span class="hljs-variable">$pname</span>); <span class="hljs-built_in">pwd</span>`<br><span class="hljs-built_in">echo</span> pdir=<span class="hljs-variable">$pdir</span><br><span class="hljs-comment"># 获取当前用户名称</span><br>user=`<span class="hljs-built_in">whoami</span>`<br><span class="hljs-comment"># 循环</span><br><span class="hljs-keyword">for</span>((host=2; host&lt;=3; host++)); <span class="hljs-keyword">do</span><br><span class="hljs-built_in">echo</span> <span class="hljs-variable">$pdir</span>/<span class="hljs-variable">$fname</span> <span class="hljs-variable">$user</span>@hdp10<span class="hljs-variable">$host</span>:<span class="hljs-variable">$pdir</span><br><span class="hljs-built_in">echo</span> ==================hdp10<span class="hljs-variable">$host</span>==================<br>rsync -rvl <span class="hljs-variable">$pdir</span>/<span class="hljs-variable">$fname</span> <span class="hljs-variable">$user</span>@hdp10<span class="hljs-variable">$host</span>:<span class="hljs-variable">$pdir</span><br><span class="hljs-keyword">done</span><br><span class="hljs-comment">#Note:这里的slave对应自己主机名，需要做相应修改。另外，for循环中的host的边界值</span><br></code></pre></td></tr></table></figure><p>执行脚本命令</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs shell">xsync /bin/one<br>xsync /bin/xsync<br></code></pre></td></tr></table></figure><p>备注：在101修改配置文件后可使用xsync命令将所修改的文件分发到102、103</p><h4 id="8、免密登录"><a href="#8、免密登录" class="headerlink" title="8、免密登录"></a>8、免密登录</h4><p>脚本内容</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs shell">echo &quot;-------免密登录-------&quot;<br>if [ ! -f ~/.ssh/id_rsa ];then<br>echo &quot;-------生成ssh密钥-------&quot;<br>ssh-keygen -t rsa<br>expect -c&quot;<br> expect &#123;<br> &quot;*.ssh/id_rsa*&quot; &#123;send &quot;\r&quot;;exp_continue&#125;<br> &quot;*empty for no passphrase:*&quot; &#123;send &quot;\r&quot;;exp_continue&#125;<br> &quot;*fingerprint is:*&quot; &#123;send &quot;\r&quot;;exp_continue&#125;<br>&#125;&quot;<br>echo &quot;-------分发密钥-------&quot;<br>for host in hdp101 hdp102 hdp103<br>do <br>ssh-copy-id $host<br>done<br>else<br>echo &quot;-------id_rsa已存在，直接分发-------&quot;<br>for host in hdp101 hdp102 hdp103<br>do <br>ssh-copy-id $host<br>done<br>fi<br></code></pre></td></tr></table></figure><p>执行脚本命令</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">one 8<br></code></pre></td></tr></table></figure><p>备注：需要在101、102都执行一次<br><img src="https://jimmy-blog-images.oss-cn-shanghai.aliyuncs.com/img/hadoop/one-9.png"></p><h4 id="8、配置当前的hadoop配置文件"><a href="#8、配置当前的hadoop配置文件" class="headerlink" title="8、配置当前的hadoop配置文件"></a>8、配置当前的hadoop配置文件</h4><p>脚本内容</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br></pre></td><td class="code"><pre><code class="hljs shell">cd /opt/module/hadoop330/etc/hadoop<br><span class="hljs-meta prompt_"># </span><span class="language-bash">配置hadoop-env.sh文件</span><br>sed -i &#x27;25c export JAVA_HOME=/opt/module/jdk8&#x27; hadoop-env.sh<br>echo &quot;-------配置hadoop-env.sh文件完成------&quot;<br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">配置core-site.xml文件 root是用户名，可更改</span><br>sed -i &#x27;19a &lt;property&gt;&#x27; core-site.xml<br>sed -i &#x27;20a &lt;name&gt;fs.defaultFS&lt;/name&gt;&#x27; core-site.xml<br>sed -i &#x27;21a &lt;value&gt;hdfs://hdp101:8020&lt;/value&gt;&#x27; core-site.xml<br>sed -i &#x27;22a &lt;/property&gt;&#x27; core-site.xml<br>sed -i &#x27;23a &lt;property&gt;&#x27; core-site.xml<br>sed -i &#x27;24a &lt;name&gt;hadoop.data.dir&lt;/name&gt;&#x27; core-site.xml<br>sed -i &#x27;25a &lt;value&gt;/opt/module/hadoop330/data&lt;/value&gt;&#x27; core-site.xml<br>sed -i &#x27;26a &lt;/property&gt;&#x27; core-site.xml<br>sed -i &#x27;27a &lt;property&gt;&#x27; core-site.xml<br>sed -i &#x27;28a &lt;name&gt;hadoop.proxyuser.root.groups&lt;/name&gt;&#x27; core-site.xml<br>sed -i &#x27;29a &lt;value&gt;*&lt;/value&gt;&#x27; core-site.xml<br>sed -i &#x27;30a &lt;/property&gt;&#x27; core-site.xml<br>sed -i &#x27;31a &lt;property&gt;&#x27; core-site.xml<br>sed -i &#x27;32a &lt;name&gt;hadoop.proxyuser.root.hosts&lt;/name&gt;&#x27; core-site.xml<br>sed -i &#x27;33a &lt;value&gt;*&lt;/value&gt;&#x27; core-site.xml<br>sed -i &#x27;34a &lt;/property&gt;&#x27; core-site.xml<br>echo &quot;-------配置core-site.xml文件完成-------&quot;<br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">配置hdfs-site.xml文件</span><br>sed -i &#x27;19a &lt;property&gt;&#x27; hdfs-site.xml<br>    sed -i &#x27;20a &lt;name&gt;dfs.namenode.secondary.http-address&lt;/name&gt;&#x27; hdfs-site.xml<br>    sed -i &#x27;21a &lt;value&gt;hdp103:9868&lt;/value&gt;&#x27; hdfs-site.xml<br>    sed -i &#x27;22a &lt;/property&gt;&#x27; hdfs-site.xml<br>sed -i &#x27;23a &lt;property&gt;&#x27; hdfs-site.xml<br>    sed -i &#x27;24a &lt;name&gt;dfs.namenode.name.dir&lt;/name&gt;&#x27; hdfs-site.xml<br>    sed -i &#x27;25a &lt;value&gt;file://$&#123;hadoop.data.dir&#125;/name&lt;/value&gt;&#x27; hdfs-site.xml<br>    sed -i &#x27;26a &lt;/property&gt;&#x27; hdfs-site.xml<br>    sed -i &#x27;27a &lt;property&gt;&#x27; hdfs-site.xml<br>sed -i &#x27;28a &lt;name&gt;dfs.datanode.data.dir&lt;/name&gt;&#x27; hdfs-site.xml<br>sed -i &#x27;29a &lt;value&gt;file://$&#123;hadoop.data.dir&#125;/data&lt;/value&gt;&#x27; hdfs-site.xml<br>sed -i &#x27;30a &lt;/property&gt;&#x27; hdfs-site.xml<br>sed -i &#x27;31a &lt;property&gt;&#x27; hdfs-site.xml<br>sed -i &#x27;32a &lt;name&gt;dfs.namenode.checkpoint.dir&lt;/name&gt;&#x27; hdfs-site.xml<br>sed -i &#x27;33a &lt;value&gt;file://$&#123;hadoop.data.dir&#125;/namesecondary&lt;/value&gt;&#x27; hdfs-site.xml<br>sed -i &#x27;34a &lt;/property&gt;&#x27; hdfs-site.xml<br>sed -i &#x27;35a &lt;property&gt;&#x27; hdfs-site.xml<br>sed -i &#x27;36a &lt;name&gt;dfs.client.datanode-restart.timeout&lt;/name&gt;&#x27; hdfs-site.xml<br>sed -i &#x27;37a &lt;value&gt;30&lt;/value&gt;&#x27; hdfs-site.xml<br>sed -i &#x27;38a &lt;/property&gt;&#x27; hdfs-site.xml<br>sed -i &#x27;39a &lt;property&gt;&#x27; hdfs-site.xml<br>sed -i &#x27;40a &lt;name&gt;dfs.namenode.http-address&lt;/name&gt;&#x27; hdfs-site.xml<br>sed -i &#x27;41a &lt;value&gt;hadoop101:9870&lt;/value&gt;&#x27; hdfs-site.xml<br>sed -i &#x27;42a &lt;/property&gt;&#x27; hdfs-site.xml<br>echo &quot;-------配置hdfs-site.xml文件完成-------&quot;<br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">配置yarn-site.xml文件</span><br>sed -i &#x27;18a &lt;property&gt;&#x27; yarn-site.xml<br>sed -i &#x27;19a &lt;name&gt;yarn.resourcemanager.hostname&lt;/name&gt;&#x27; yarn-site.xml<br>sed -i &#x27;20a &lt;value&gt;hdp102&lt;/value&gt;&#x27; yarn-site.xml<br>sed -i &#x27;21a &lt;/property&gt;&#x27; yarn-site.xml<br>sed -i &#x27;22a &lt;property&gt;&#x27; yarn-site.xml<br>sed -i &#x27;23a &lt;name&gt;yarn.nodemanager.aux-services&lt;/name&gt;&#x27; yarn-site.xml<br>sed -i &#x27;24a &lt;value&gt;mapreduce_shuffle&lt;/value&gt;&#x27; yarn-site.xml<br>sed -i &#x27;25a &lt;/property&gt;&#x27; yarn-site.xml<br>sed -i &#x27;26a &lt;property&gt;&#x27; yarn-site.xml<br>    sed -i &#x27;27a &lt;name&gt;yarn.nodemanager.env-whitelist&lt;/name&gt;&#x27; yarn-site.xml<br>    sed -i &#x27;28a &lt;value&gt;JAVA_HOME,HADOOP_COMMON_HOME,HADOOP_HDFS_HOME,HADOOP_CONF_DIR,CLASSPATH_PREPEND_DISTCACHE,HADOOP_YARN_HOME,HADOOP_MAPRED_HOME&lt;/value&gt;&#x27; yarn-site.xml<br>    sed -i &#x27;29a &lt;/property&gt;&#x27; yarn-site.xml<br>echo &quot;-------配置yarn-site.xml文件完成-------&quot;<br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">配置mapred-site.xml</span><br>sed -i &#x27;20a &lt;property&gt;&#x27; mapred-site.xml<br>sed -i &#x27;21a &lt;name&gt;mapreduce.framework.name&lt;/name&gt;&#x27; mapred-site.xml<br>sed -i &#x27;22a &lt;value&gt;yarn&lt;/value&gt;&#x27; mapred-site.xml<br>sed -i &#x27;23a &lt;/property&gt;&#x27; mapred-site.xml<br>echo &quot;-------配置mapred-site.xml文件完成-------&quot;<br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">配置workers</span><br>sed -i &#x27;2a hdp101&#x27; workers<br>sed -i &#x27;3a hdp102&#x27; workers<br>sed -i &#x27;4a hdp103&#x27; workers<br>echo &quot;-------配置workers文件完成-------&quot;<br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">配置hadoop-env.sh</span><br>sed -i &#x27;26a export HDFS_NAMENODE_USER=root&#x27; hadoop-env.sh<br>sed -i &#x27;27a export HDFS_SECONDARYNAMENODE_USER=root&#x27; hadoop-env.sh<br>sed -i &#x27;28a export HDFS_DATANODE_USER=root&#x27; hadoop-env.sh<br>echo &quot;-------配置hadoop-env.sh文件完成-------&quot;<br><br>cd /opt/module/hadoop330/sbin<br>sed -i &#x27;2a HDFS_DATANODE_USER=root&#x27; start-dfs.sh<br>    sed -i &#x27;3a HDFS_DATANODE_SECURE_USER=hdfs&#x27; start-dfs.sh<br>    sed -i &#x27;4a HDFS_NAMENODE_USER=root&#x27; start-dfs.sh<br>    sed -i &#x27;5a HDFS_SECONDARYNAMENODE_USER=root&#x27; start-dfs.sh<br>echo &quot;-------配置start-dfs.sh文件完成-------&quot;<br><br>sed -i &#x27;2a HDFS_DATANODE_USER=root&#x27; stop-dfs.sh<br>    sed -i &#x27;3a HDFS_DATANODE_SECURE_USER=hdfs&#x27; stop-dfs.sh<br>    sed -i &#x27;4a HDFS_NAMENODE_USER=root&#x27; stop-dfs.sh<br>    sed -i &#x27;5a HDFS_SECONDARYNAMENODE_USER=root&#x27; stop-dfs.sh<br>echo &quot;-------配置stop-dfs.sh文件完成-------&quot;<br><br>sed -i &#x27;2a YARN_RESOURCEMANAGER_USER=root&#x27; start-yarn.sh<br>    sed -i &#x27;3a HDFS_DATANODE_SECURE_USER=yarn&#x27; start-yarn.sh<br>    sed -i &#x27;4a YARN_NODEMANAGER_USER=root&#x27; start-yarn.sh<br>echo &quot;-------配置start-yarn.sh文件完成-------&quot;<br><br>sed -i &#x27;2a YARN_RESOURCEMANAGER_USER=root&#x27; stop-yarn.sh<br>    sed -i &#x27;3a HDFS_DATANODE_SECURE_USER=yarn&#x27; stop-yarn.sh<br>    sed -i &#x27;4a YARN_NODEMANAGER_USER=root&#x27; stop-yarn.sh<br>echo &quot;-------配置stop-yarn.sh文件完成-------&quot;<br><span class="hljs-meta prompt_"># </span><span class="language-bash">格式化namenode并启动hadoop</span><br>hadoop namenode -format<br>echo &quot;-------格式化namenode完成-------&quot;<br></code></pre></td></tr></table></figure><p>执行脚本命令</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">one 9<br></code></pre></td></tr></table></figure><h4 id="11、一键启动hadoop集群"><a href="#11、一键启动hadoop集群" class="headerlink" title="11、一键启动hadoop集群"></a>11、一键启动hadoop集群</h4><p>脚本内容</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs shell">echo &quot;-------hadoop集群启动-------&quot;<br>echo &quot; --------------- 启动 hdfs ---------------&quot;<br>ssh hdp101 &quot;/opt/module/hadoop330/sbin/start-dfs.sh&quot;<br>echo &quot; --------------- 启动 yarn ---------------&quot;<br>ssh hdp102 &quot;/opt/module/hadoop330/sbin/start-yarn.sh&quot;<br>echo &quot; --------------- 启动 historyserver ---------------&quot;<br>ssh hdp102 &quot;/opt/module/hadoop330/bin/mapred --daemon start historyserver&quot;<br></code></pre></td></tr></table></figure><p>执行脚本命令</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">one 10<br></code></pre></td></tr></table></figure><h4 id="12、一键停止hadoop集群"><a href="#12、一键停止hadoop集群" class="headerlink" title="12、一键停止hadoop集群"></a>12、一键停止hadoop集群</h4><p>脚本内容</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs shell">echo &quot;-------hadoop集群停止-------&quot;<br>echo &quot; --------------- 关闭 historyserver ---------------&quot;<br>ssh hdp102 &quot;/opt/module/hadoop330/bin/mapred --daemon stop historyserver&quot;<br>echo &quot; --------------- 关闭 yarn ---------------&quot;<br>ssh hdp102 &quot;/opt/module/hadoop330/sbin/stop-yarn.sh&quot;<br>echo &quot; --------------- 关闭 hdfs ---------------&quot;<br>ssh hdp101 &quot;/opt/module/hadoop330/sbin/stop-dfs.sh&quot;<br></code></pre></td></tr></table></figure><p>执行脚本命令</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">one 11<br></code></pre></td></tr></table></figure><h4 id="13、查看hadoop集群"><a href="#13、查看hadoop集群" class="headerlink" title="13、查看hadoop集群"></a>13、查看hadoop集群</h4><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs ebnf"><span class="hljs-attribute">jps</span><br></code></pre></td></tr></table></figure><h3 id="四、一键部署脚本集合"><a href="#四、一键部署脚本集合" class="headerlink" title="四、一键部署脚本集合"></a>四、一键部署脚本集合</h3><p>脚本内容</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br><span class="line">358</span><br><span class="line">359</span><br><span class="line">360</span><br><span class="line">361</span><br><span class="line">362</span><br><span class="line">363</span><br><span class="line">364</span><br><span class="line">365</span><br><span class="line">366</span><br><span class="line">367</span><br><span class="line">368</span><br><span class="line">369</span><br><span class="line">370</span><br><span class="line">371</span><br><span class="line">372</span><br><span class="line">373</span><br><span class="line">374</span><br><span class="line">375</span><br><span class="line">376</span><br><span class="line">377</span><br><span class="line">378</span><br><span class="line">379</span><br><span class="line">380</span><br><span class="line">381</span><br><span class="line">382</span><br><span class="line">383</span><br><span class="line">384</span><br><span class="line">385</span><br><span class="line">386</span><br><span class="line">387</span><br><span class="line">388</span><br><span class="line">389</span><br><span class="line">390</span><br><span class="line">391</span><br><span class="line">392</span><br><span class="line">393</span><br><span class="line">394</span><br><span class="line">395</span><br><span class="line">396</span><br><span class="line">397</span><br><span class="line">398</span><br><span class="line">399</span><br><span class="line">400</span><br><span class="line">401</span><br><span class="line">402</span><br><span class="line">403</span><br><span class="line">404</span><br><span class="line">405</span><br><span class="line">406</span><br><span class="line">407</span><br><span class="line">408</span><br><span class="line">409</span><br><span class="line">410</span><br><span class="line">411</span><br><span class="line">412</span><br><span class="line">413</span><br><span class="line">414</span><br><span class="line">415</span><br><span class="line">416</span><br><span class="line">417</span><br><span class="line">418</span><br><span class="line">419</span><br><span class="line">420</span><br><span class="line">421</span><br><span class="line">422</span><br><span class="line">423</span><br><span class="line">424</span><br><span class="line">425</span><br><span class="line">426</span><br><span class="line">427</span><br><span class="line">428</span><br><span class="line">429</span><br><span class="line">430</span><br><span class="line">431</span><br><span class="line">432</span><br><span class="line">433</span><br><span class="line">434</span><br><span class="line">435</span><br><span class="line">436</span><br><span class="line">437</span><br><span class="line">438</span><br><span class="line">439</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta prompt_">#</span><span class="language-bash">!/bin/bash</span><br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">安装工具包</span><br>install_package() &#123; <br>echo &quot;-------安装工具包-------&quot;<br>yum install -y expect<br>yum install -y epel-release<br>    yum install -y psmisc nc net-tools rsync vim lrzsz ntp libzstd openssl-static tree iotop git dos2unix<br>&#125;<br><span class="hljs-meta prompt_"># </span><span class="language-bash">统一配置hosts文件</span><br>modify_syshosts() &#123; <br>echo &quot;-------修改hosts文件-------&quot;<br>for hosts in 101 102 103 104 105 106<br>do <br>echo &quot;192.168.10.&quot;$hosts&quot; hdp&quot;$hosts&quot;&quot; &gt;&gt; /etc/hosts<br>done<br>&#125;<br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">修改系统名称 同时修改hosts文件</span><br>modify_sysname() &#123; <br>echo &quot;-------修改系统名称-------&quot;<br>hostnamectl --static set-hostname $1<br>&#125;<br><span class="hljs-meta prompt_"> </span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">修改IP静态地址</span><br>modify_staticip() &#123; <br>echo &quot;-------修改IP静态地址-------&quot;<br><span class="hljs-meta prompt_">#</span><span class="language-bash">先检查文件是否已被修改过</span><br>chk=`cat /etc/sysconfig/network-scripts/ifcfg-ens33 | grep static`<br>if [ &quot;$chk&quot; == &quot;&quot; ];then<br><span class="hljs-meta prompt_">#</span><span class="language-bash">修改/etc/sysconfig/network-scripts/ifcfg-ens33文件中的dhcp</span><br>sed -i &#x27;s/dhcp/static/&#x27; /etc/sysconfig/network-scripts/ifcfg-ens33<br>echo &quot;IPADDR=192.168.10.$1&quot; &gt;&gt; /etc/sysconfig/network-scripts/ifcfg-ens33<br>echo &quot;NETMASK=255.255.255.0&quot; &gt;&gt; /etc/sysconfig/network-scripts/ifcfg-ens33<br>echo &quot;GATEWAY=192.168.10.2&quot; &gt;&gt; /etc/sysconfig/network-scripts/ifcfg-ens33<br>echo &quot;DNS1=192.168.10.2&quot; &gt;&gt; /etc/sysconfig/network-scripts/ifcfg-ens33<br>echo &quot;PREFIX=24&quot; &gt;&gt; /etc/sysconfig/network-scripts/ifcfg-ens33<br>systemctl restart network<br>else<br>sed -i &quot;s/IPADDR=192.168.10.101/IPADDR=192.168.10.&quot;$1&quot;/&quot; /etc/sysconfig/network-scripts/ifcfg-ens33<br>systemctl restart network<br>fi<br>&#125;<br><span class="hljs-meta prompt_"> </span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">关闭防火墙</span><br>close_firewalld() &#123; <br>echo &quot;-------关闭防火墙-------&quot;<br>systemctl stop firewalld<br>systemctl disable firewalld<br>&#125;<br><span class="hljs-meta prompt_"> </span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">修改yum源为阿里源</span><br>modify_yumsource() &#123; <br>echo &quot;-------修改yum源为阿里源-------&quot;<br><span class="hljs-meta prompt_"># </span><span class="language-bash">检查是否已有备份文件 如果有则说明已经做过了</span><br>if [ -e /etc/yum.repos.d/CentOS-Base.repo_bak ];then<br>echo &quot;don&#x27;t nothing!&quot;<br>else<br><span class="hljs-meta prompt_">#</span><span class="language-bash">首先安装wget命令</span><br>yum install -y wget<br><span class="hljs-meta prompt_">#</span><span class="language-bash">修改yum</span><br>cd /etc/yum.repos.d/<br>mv CentOS-Base.repo CentOS-Base.repo_bak<br>wget -O /etc/yum.repos.d/CentOS-Base.repo http://mirrors.aliyun.com/repo/Centos-7.repo<br>yum clean all<br>yum makecache<br>fi<br>cd /<br>&#125;<br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">创建用户并切换用户</span><br>add_user() &#123; <br>echo &quot;请注意,在创建用户时会先对该用户进行删除操作以确保脚本运行成功, 如已有该用户请慎重输入用户名!&quot;<br>read -p &quot;继续请输入 1 ,停止请输入 2. : &quot; IS_CONTINUE<br>if [ $&#123;IS_CONTINUE&#125; -ne 1 ]; then<br>  echo &quot;停止运行该脚本!&quot;<br>  exit<br>fi<br>read -p &quot;请输入新增用户用户名 : &quot; username<br>read -p &quot;请输入新增用户密码 : &quot; password<br>userdel -r $&#123;username&#125;<br>useradd -d /home/$&#123;username&#125; $&#123;username&#125;<br>expect -c&quot;<br> spawn passwd $&#123;username&#125;<br> expect &#123;<br> &quot;*yes/no*&quot; &#123;send &quot;yes\r&quot;;exp_continue&#125;<br> &quot;*New password:*&quot; &#123;send &quot;$&#123;password&#125;\r&quot;;exp_continue&#125;<br> &quot;*Retype new password:*&quot; &#123;send &quot;$&#123;password&#125;\r&quot;;exp_continue&#125;<br>&#125;&quot;<br>echo &quot;配置新增用户root权限&quot;<br>sed -i &quot;93a &quot;$&#123;username&#125;&quot; ALL=(ALL) NOPASSWD:ALL&quot; /etc/sudoers<br>echo &quot;创建software、module文件夹&quot;<br>mkdir /opt/module /opt/software<br>chown $&#123;username&#125;:$&#123;username&#125; /opt/module /opt/software<br>echo &quot;切换用户&quot;<br>su - $&#123;username&#125;<br>&#125;<br><span class="hljs-meta prompt_"> </span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">检查文件的文件夹是否存在不存在就创建1个</span><br>check_soft_folder() &#123; <br>echo &quot;-------检查文件夹是否存在-------&quot;<br>if [ -e /opt/module/$1 ];then<br>echo &quot;/opt/module/$1 folder already exists&quot;<br>rm -rf $1<br>return 1<br>else<br>mkdir /opt/module/$1<br>return 1<br>fi<br>&#125;<br><span class="hljs-meta prompt_"> </span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">安装JDK 软件目录必须在/opt/software下 jdk目录命名为jdk8</span><br>setup_jdk() &#123; <br>echo &quot;-------安装JDK并配置环境变量-------&quot;<br><span class="hljs-meta prompt_">#</span><span class="language-bash">检查JDK是否已经安装过</span><br>check_soft_folder jdk8<br>if [ $? == 1 ];then<br><span class="hljs-meta prompt_">#</span><span class="language-bash">在opt文件夹下搜索jdk的tar.gz文件</span><br>jdkName=`ls /opt/software/ | grep jdk*`<br><span class="hljs-meta prompt_">#</span><span class="language-bash">将文件解压到对应的soft文件夹下</span><br>tar -zxvf /opt/software/$jdkName -C /opt/module/jdk8 --strip-components 1<br><span class="hljs-meta prompt_">#</span><span class="language-bash">配置/etc/profile文件</span><br>sudo touch /etc/profile.d/my_env.sh<br>echo &quot;配置jdk环境变量&quot;<br>echo &quot;&quot; &gt;&gt; /etc/profile.d/my_env.sh<br>echo &quot;#java environment&quot; &gt;&gt; /etc/profile.d/my_env.sh<br>echo &quot;export JAVA_HOME=/opt/module/jdk8&quot; &gt;&gt; /etc/profile.d/my_env.sh<br>echo &quot;export CLASSPATH=.:\$&#123;JAVA_HOME&#125;/jre/lib/rt.jar:\$&#123;JAVA_HOME&#125;/lib/dt.jar:\$&#123;JAVA_HOME&#125;/lib/tools.jar&quot; &gt;&gt; /etc/profile.d/my_env.sh<br>echo &quot;export PATH=\$PATH:\$&#123;JAVA_HOME&#125;/bin&quot; &gt;&gt; /etc/profile.d/my_env.sh<br>fi<br>&#125;<br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">安装Hadoop 软件目录必须在/opt/software下 hadoop目录命名为hadoop330</span><br>setup_hadoop() &#123; <br>echo &quot;-------安装Hadoop并配置环境变量-------&quot;<br><span class="hljs-meta prompt_">#</span><span class="language-bash">检查JDK是否已经安装过</span><br>check_soft_folder hadoop330<br>if [ $? == 1 ];then<br><span class="hljs-meta prompt_">#</span><span class="language-bash">在opt文件夹下搜索Hadoop的tar.gz文件</span><br>hadoopName=`ls /opt/software/ | grep hadoop*`<br><span class="hljs-meta prompt_">#</span><span class="language-bash">将文件解压到对应的soft文件夹下</span><br>tar -zxvf /opt/software/$hadoopName -C /opt/module/hadoop330 --strip-components 1<br><span class="hljs-meta prompt_">#</span><span class="language-bash">配置/etc/profile.d/my_env.sh文件</span><br>echo &quot;配置hadoop环境变量&quot;<br>echo &quot;&quot; &gt;&gt; /etc/profile.d/my_env.sh<br>echo &quot;#hadoop environment&quot; &gt;&gt; /etc/profile.d/my_env.sh<br>echo &quot;export HADOOP_HOME=/opt/module/hadoop330&quot; &gt;&gt; /etc/profile.d/my_env.sh<br>echo &quot;export PATH=\$PATH:\$&#123;HADOOP_HOME&#125;/bin&quot; &gt;&gt; /etc/profile.d/my_env.sh<br>echo &quot;export PATH=\$PATH:\$&#123;HADOOP_HOME&#125;/sbin&quot; &gt;&gt; /etc/profile.d/my_env.sh<br>fi<br>&#125;<br><br>IP_LIST=(<br>hdp101<br>hdp102<br>hdp103<br>)<br><span class="hljs-meta prompt_"># </span><span class="language-bash">生成ssh密钥，用于免密登录</span><br>create_ssh() &#123; <br>echo &quot;-------免密登录-------&quot;<br>if [ ! -f ~/.ssh/id_rsa ];then<br>echo &quot;-------生成ssh密钥-------&quot;<br>ssh-keygen -t rsa<br>expect -c&quot;<br> expect &#123;<br> &quot;*.ssh/id_rsa*&quot; &#123;send &quot;\r&quot;;exp_continue&#125;<br> &quot;*empty for no passphrase:*&quot; &#123;send &quot;\r&quot;;exp_continue&#125;<br> &quot;*fingerprint is:*&quot; &#123;send &quot;\r&quot;;exp_continue&#125;<br>&#125;&quot;<br>echo &quot;-------分发密钥-------&quot;<br>for host in hdp101 hdp102 hdp103<br>do <br>ssh-copy-id $host<br>done<br>else<br>echo &quot;-------id_rsa已存在，直接分发-------&quot;<br>for host in hdp101 hdp102 hdp103<br>do <br>ssh-copy-id $host<br>done<br>fi<br>&#125;<br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">hadoop配置脚本</span><br>hadoop_config() &#123; <br>cd /opt/module/hadoop330/etc/hadoop<br><span class="hljs-meta prompt_"># </span><span class="language-bash">配置hadoop-env.sh文件</span><br>sed -i &#x27;25c export JAVA_HOME=/opt/module/jdk8&#x27; hadoop-env.sh<br>echo &quot;-------配置hadoop-env.sh文件完成------&quot;<br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">配置core-site.xml文件 root是用户名，可更改</span><br>sed -i &#x27;19a &lt;property&gt;&#x27; core-site.xml<br>sed -i &#x27;20a &lt;name&gt;fs.defaultFS&lt;/name&gt;&#x27; core-site.xml<br>sed -i &#x27;21a &lt;value&gt;hdfs://hdp101:8020&lt;/value&gt;&#x27; core-site.xml<br>sed -i &#x27;22a &lt;/property&gt;&#x27; core-site.xml<br>sed -i &#x27;23a &lt;property&gt;&#x27; core-site.xml<br>sed -i &#x27;24a &lt;name&gt;hadoop.data.dir&lt;/name&gt;&#x27; core-site.xml<br>sed -i &#x27;25a &lt;value&gt;/opt/module/hadoop330/data&lt;/value&gt;&#x27; core-site.xml<br>sed -i &#x27;26a &lt;/property&gt;&#x27; core-site.xml<br>sed -i &#x27;27a &lt;property&gt;&#x27; core-site.xml<br>sed -i &#x27;28a &lt;name&gt;hadoop.proxyuser.root.groups&lt;/name&gt;&#x27; core-site.xml<br>sed -i &#x27;29a &lt;value&gt;*&lt;/value&gt;&#x27; core-site.xml<br>sed -i &#x27;30a &lt;/property&gt;&#x27; core-site.xml<br>sed -i &#x27;31a &lt;property&gt;&#x27; core-site.xml<br>sed -i &#x27;32a &lt;name&gt;hadoop.proxyuser.root.hosts&lt;/name&gt;&#x27; core-site.xml<br>sed -i &#x27;33a &lt;value&gt;*&lt;/value&gt;&#x27; core-site.xml<br>sed -i &#x27;34a &lt;/property&gt;&#x27; core-site.xml<br>echo &quot;-------配置core-site.xml文件完成-------&quot;<br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">配置hdfs-site.xml文件</span><br>sed -i &#x27;19a &lt;property&gt;&#x27; hdfs-site.xml<br>    sed -i &#x27;20a &lt;name&gt;dfs.namenode.secondary.http-address&lt;/name&gt;&#x27; hdfs-site.xml<br>    sed -i &#x27;21a &lt;value&gt;hdp103:9868&lt;/value&gt;&#x27; hdfs-site.xml<br>    sed -i &#x27;22a &lt;/property&gt;&#x27; hdfs-site.xml<br>sed -i &#x27;23a &lt;property&gt;&#x27; hdfs-site.xml<br>    sed -i &#x27;24a &lt;name&gt;dfs.namenode.name.dir&lt;/name&gt;&#x27; hdfs-site.xml<br>    sed -i &#x27;25a &lt;value&gt;file://$&#123;hadoop.data.dir&#125;/name&lt;/value&gt;&#x27; hdfs-site.xml<br>    sed -i &#x27;26a &lt;/property&gt;&#x27; hdfs-site.xml<br>    sed -i &#x27;27a &lt;property&gt;&#x27; hdfs-site.xml<br>sed -i &#x27;28a &lt;name&gt;dfs.datanode.data.dir&lt;/name&gt;&#x27; hdfs-site.xml<br>sed -i &#x27;29a &lt;value&gt;file://$&#123;hadoop.data.dir&#125;/data&lt;/value&gt;&#x27; hdfs-site.xml<br>sed -i &#x27;30a &lt;/property&gt;&#x27; hdfs-site.xml<br>sed -i &#x27;31a &lt;property&gt;&#x27; hdfs-site.xml<br>sed -i &#x27;32a &lt;name&gt;dfs.namenode.checkpoint.dir&lt;/name&gt;&#x27; hdfs-site.xml<br>sed -i &#x27;33a &lt;value&gt;file://$&#123;hadoop.data.dir&#125;/namesecondary&lt;/value&gt;&#x27; hdfs-site.xml<br>sed -i &#x27;34a &lt;/property&gt;&#x27; hdfs-site.xml<br>sed -i &#x27;35a &lt;property&gt;&#x27; hdfs-site.xml<br>sed -i &#x27;36a &lt;name&gt;dfs.client.datanode-restart.timeout&lt;/name&gt;&#x27; hdfs-site.xml<br>sed -i &#x27;37a &lt;value&gt;30&lt;/value&gt;&#x27; hdfs-site.xml<br>sed -i &#x27;38a &lt;/property&gt;&#x27; hdfs-site.xml<br>sed -i &#x27;39a &lt;property&gt;&#x27; hdfs-site.xml<br>sed -i &#x27;40a &lt;name&gt;dfs.namenode.http-address&lt;/name&gt;&#x27; hdfs-site.xml<br>sed -i &#x27;41a &lt;value&gt;hadoop101:9870&lt;/value&gt;&#x27; hdfs-site.xml<br>sed -i &#x27;42a &lt;/property&gt;&#x27; hdfs-site.xml<br>echo &quot;-------配置hdfs-site.xml文件完成-------&quot;<br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">配置yarn-site.xml文件</span><br>sed -i &#x27;18a &lt;property&gt;&#x27; yarn-site.xml<br>sed -i &#x27;19a &lt;name&gt;yarn.resourcemanager.hostname&lt;/name&gt;&#x27; yarn-site.xml<br>sed -i &#x27;20a &lt;value&gt;hdp102&lt;/value&gt;&#x27; yarn-site.xml<br>sed -i &#x27;21a &lt;/property&gt;&#x27; yarn-site.xml<br>sed -i &#x27;22a &lt;property&gt;&#x27; yarn-site.xml<br>sed -i &#x27;23a &lt;name&gt;yarn.nodemanager.aux-services&lt;/name&gt;&#x27; yarn-site.xml<br>sed -i &#x27;24a &lt;value&gt;mapreduce_shuffle&lt;/value&gt;&#x27; yarn-site.xml<br>sed -i &#x27;25a &lt;/property&gt;&#x27; yarn-site.xml<br>sed -i &#x27;26a &lt;property&gt;&#x27; yarn-site.xml<br>    sed -i &#x27;27a &lt;name&gt;yarn.nodemanager.env-whitelist&lt;/name&gt;&#x27; yarn-site.xml<br>    sed -i &#x27;28a &lt;value&gt;JAVA_HOME,HADOOP_COMMON_HOME,HADOOP_HDFS_HOME,HADOOP_CONF_DIR,CLASSPATH_PREPEND_DISTCACHE,HADOOP_YARN_HOME,HADOOP_MAPRED_HOME&lt;/value&gt;&#x27; yarn-site.xml<br>    sed -i &#x27;29a &lt;/property&gt;&#x27; yarn-site.xml<br>echo &quot;-------配置yarn-site.xml文件完成-------&quot;<br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">配置mapred-site.xml</span><br>sed -i &#x27;20a &lt;property&gt;&#x27; mapred-site.xml<br>sed -i &#x27;21a &lt;name&gt;mapreduce.framework.name&lt;/name&gt;&#x27; mapred-site.xml<br>sed -i &#x27;22a &lt;value&gt;yarn&lt;/value&gt;&#x27; mapred-site.xml<br>sed -i &#x27;23a &lt;/property&gt;&#x27; mapred-site.xml<br>echo &quot;-------配置mapred-site.xml文件完成-------&quot;<br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">配置workers</span><br>sed -i &#x27;2a hdp101&#x27; workers<br>sed -i &#x27;3a hdp102&#x27; workers<br>sed -i &#x27;4a hdp103&#x27; workers<br>echo &quot;-------配置workers文件完成-------&quot;<br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">配置hadoop-env.sh</span><br>sed -i &#x27;26a export HDFS_NAMENODE_USER=root&#x27; hadoop-env.sh<br>sed -i &#x27;27a export HDFS_SECONDARYNAMENODE_USER=root&#x27; hadoop-env.sh<br>sed -i &#x27;28a export HDFS_DATANODE_USER=root&#x27; hadoop-env.sh<br>echo &quot;-------配置hadoop-env.sh文件完成-------&quot;<br><br>cd /opt/module/hadoop330/sbin<br>sed -i &#x27;2a HDFS_DATANODE_USER=root&#x27; start-dfs.sh<br>    sed -i &#x27;3a HDFS_DATANODE_SECURE_USER=hdfs&#x27; start-dfs.sh<br>    sed -i &#x27;4a HDFS_NAMENODE_USER=root&#x27; start-dfs.sh<br>    sed -i &#x27;5a HDFS_SECONDARYNAMENODE_USER=root&#x27; start-dfs.sh<br>echo &quot;-------配置start-dfs.sh文件完成-------&quot;<br><br>sed -i &#x27;2a HDFS_DATANODE_USER=root&#x27; stop-dfs.sh<br>    sed -i &#x27;3a HDFS_DATANODE_SECURE_USER=hdfs&#x27; stop-dfs.sh<br>    sed -i &#x27;4a HDFS_NAMENODE_USER=root&#x27; stop-dfs.sh<br>    sed -i &#x27;5a HDFS_SECONDARYNAMENODE_USER=root&#x27; stop-dfs.sh<br>echo &quot;-------配置stop-dfs.sh文件完成-------&quot;<br><br>sed -i &#x27;2a YARN_RESOURCEMANAGER_USER=root&#x27; start-yarn.sh<br>    sed -i &#x27;3a HDFS_DATANODE_SECURE_USER=yarn&#x27; start-yarn.sh<br>    sed -i &#x27;4a YARN_NODEMANAGER_USER=root&#x27; start-yarn.sh<br>echo &quot;-------配置start-yarn.sh文件完成-------&quot;<br><br>sed -i &#x27;2a YARN_RESOURCEMANAGER_USER=root&#x27; stop-yarn.sh<br>    sed -i &#x27;3a HDFS_DATANODE_SECURE_USER=yarn&#x27; stop-yarn.sh<br>    sed -i &#x27;4a YARN_NODEMANAGER_USER=root&#x27; stop-yarn.sh<br>echo &quot;-------配置stop-yarn.sh文件完成-------&quot;<br><span class="hljs-meta prompt_"># </span><span class="language-bash">格式化namenode并启动hadoop</span><br>hadoop namenode -format<br>echo &quot;-------格式化namenode完成-------&quot;<br>&#125;<br><span class="hljs-meta prompt_"> </span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">hadoop集群启动</span><br>hadoop_start() &#123; <br>echo &quot;-------hadoop集群启动-------&quot;<br>echo &quot; --------------- 启动 hdfs ---------------&quot;<br>ssh hdp101 &quot;/opt/module/hadoop330/sbin/start-dfs.sh&quot;<br>echo &quot; --------------- 启动 yarn ---------------&quot;<br>ssh hdp102 &quot;/opt/module/hadoop330/sbin/start-yarn.sh&quot;<br>echo &quot; --------------- 启动 historyserver ---------------&quot;<br>ssh hdp102 &quot;/opt/module/hadoop330/bin/mapred --daemon start historyserver&quot;<br>&#125;<br><span class="hljs-meta prompt_"># </span><span class="language-bash">hadoop集群停止</span><br>hadoop_stop() &#123; <br>echo &quot;-------hadoop集群停止-------&quot;<br>echo &quot; --------------- 关闭 historyserver ---------------&quot;<br>ssh hdp102 &quot;/opt/module/hadoop330/bin/mapred --daemon stop historyserver&quot;<br>echo &quot; --------------- 关闭 yarn ---------------&quot;<br>ssh hdp102 &quot;/opt/module/hadoop330/sbin/stop-yarn.sh&quot;<br>echo &quot; --------------- 关闭 hdfs ---------------&quot;<br>ssh hdp101 &quot;/opt/module/hadoop330/sbin/stop-dfs.sh&quot;<br>&#125;<br><span class="hljs-meta prompt_"># </span><span class="language-bash">分发脚本</span><br>xsync() &#123; <br><span class="hljs-meta prompt_"># </span><span class="language-bash">获取输入参数个数，如果没有参数，直接退出</span><br>pcount=$#<br>if((pcount==0)); then<br>echo no args...;<br>exit;<br>fi<br><span class="hljs-meta prompt_"># </span><span class="language-bash">获取文件名称</span><br>pname=$1<br>fname=`basename $pname`<br>echo fname=$fname<br><span class="hljs-meta prompt_"># </span><span class="language-bash">获取上级目录到绝对路径</span><br>pdir=`cd -P $(dirname $pname); pwd`<br>echo pdir=$pdir<br><span class="hljs-meta prompt_"># </span><span class="language-bash">获取当前用户名称</span><br>user=`whoami`<br><span class="hljs-meta prompt_"># </span><span class="language-bash">循环</span><br>for((host=2; host&lt;=3; host++)); do<br>echo $pdir/$fname $user@hdp10$host:$pdir<br>echo ==================hdp10$host==================<br>rsync -rvl $pdir/$fname $user@hdp10$host:$pdir<br>done<br><span class="hljs-meta prompt_">#</span><span class="language-bash">Note:这里的slave对应自己主机名，需要做相应修改。另外，<span class="hljs-keyword">for</span>循环中的host的边界值</span><br>&#125;<br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">安装mysql5.7</span><br>setup_mysql() &#123; <br><span class="hljs-meta prompt_">#</span><span class="language-bash">检查linux的mariadb是否卸载 如果没有说明没有安装过mysql</span><br>mdb=`rpm -qa | grep mariadb`<br>if [ &quot;$mdb&quot; != &quot;&quot; ];then<br>rpm -e --nodeps $mdb<br>cd /opt/<br>wget -i -c http://dev.mysql.com/get/mysql57-community-release-el7-10.noarch.rpm<br>yum -y install mysql57-community-release-el7-10.noarch.rpm<br>yum -y install mysql-community-server<br><span class="hljs-meta prompt_">#</span><span class="language-bash">修改/etc/my.cnf文件解决中文乱码</span><br>sed -i &#x27;/socket/a character-set-server=utf8&#x27; /etc/my.cnf<br>echo &quot;[client]&quot; &gt;&gt; /etc/my.cnf<br>echo &quot;default-character-set=utf8&quot; &gt;&gt; /etc/my.cnf<br>echo &quot;[mysql]&quot; &gt;&gt; /etc/my.cnf<br>echo &quot;default-character-set=utf8&quot; &gt;&gt; /etc/my.cnf<br>systemctl start  mysqld.service<br><span class="hljs-meta prompt_">#</span><span class="language-bash">获取临时密码</span><br>pwdinfo=`grep &quot;password&quot; /var/log/mysqld.log| grep -wF &quot;temporary password&quot;`<br>passwd=$&#123;pwdinfo#*localhost:&#125;<br>passwd=$(echo $passwd)<br><span class="hljs-meta prompt_">#</span><span class="language-bash">执行修改密码语句</span><br>mysql -uroot -p$passwd --connect-expired-password -e &quot;set global validate_password_policy=0&quot;<br>mysql -uroot -p$passwd --connect-expired-password -e &quot;set global validate_password_length=1&quot;<br>mysql -uroot -p$passwd --connect-expired-password -e &quot;ALTER USER &#x27;root&#x27;@&#x27;localhost&#x27; IDENTIFIED BY &#x27;okok&#x27;&quot;<br><span class="hljs-meta prompt_">#</span><span class="language-bash">修改远程登录</span><br>mysql -uroot -pokok -e &quot;GRANT ALL PRIVILEGES ON *.* TO root@&#x27;%&#x27; IDENTIFIED BY &#x27;okok&#x27;&quot;<br>mysql -uroot -pokok -e &quot;flush privileges&quot;<br><span class="hljs-meta prompt_">#</span><span class="language-bash">重启服务</span><br>systemctl restart mysqld.service<br>fi<br>&#125;<br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">根据用户的选择进行对应的安装</span><br>custom_option() &#123; <br>case $1 in <br>0)<br>install_package<br>;;<br>1)<br>add_user<br>;;<br>2)<br>modify_sysname $2 $3<br>modify_staticip $3<br>;;<br>3)<br>close_firewalld<br>;;<br>4)<br>modify_yumsource<br>;;<br>5)<br>setup_jdk<br>;;<br>6)<br>setup_hadoop<br>;;<br>7)<br>setup_mysql<br>;;<br>8)<br>create_ssh<br>;;<br>9)<br>hadoop_config<br>;;<br>10)<br>hadoop_start<br>;;<br>11)<br>hadoop_stop<br>;;<br>12)<br>xsync<br>;;<br>98)<br>install_package<br>modify_sysname $2 $3<br>modify_staticip $3<br>modify_syshosts<br>close_firewalld<br>;;<br>99)<br>setup_jdk<br>setup_hadoop<br>hadoop_config<br>;;<br>*)<br> echo &quot;please option 1~12、98、99&quot;<br>esac<br>&#125;<br><span class="hljs-meta prompt_"> </span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">规定<span class="hljs-variable">$1</span>用户安装软件选择[] <span class="hljs-variable">$2</span>用户传入必须是系统的名称(hdp101~hdp103) <span class="hljs-variable">$3</span>用户传入必须是IP地址(101~103)</span><br>custom_option $1 $2 $3<br></code></pre></td></tr></table></figure><p>执行脚本命令</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta prompt_"># </span><span class="language-bash">不同命令</span><br>0：安装工具包<br>1：新增用户<br>2：修改主机名与ip<br>3：关闭防火墙<br>4：配置yum源<br>5：安装jdk<br>6：安装hadoop<br>7：安装mysql<br>8：设置免密<br>9：配置hadoop文件<br>10：启动hadoop集群<br>11：关闭hadoop集群<br>12：xsync同步文件<br>98：从安装工具包到关闭防火墙<br>99：安装jdk、hadoop、配置hadoop<br>one [0~12|98|99] hdp101~hdp103 101~103<br></code></pre></td></tr></table></figure><p><img src="https://jimmy-blog-images.oss-cn-shanghai.aliyuncs.com/img/hadoop/%E5%90%AF%E5%8A%A8%E7%95%8C%E9%9D%A2.png"></p>]]></content>
    
    
    <categories>
      
      <category>hadoop</category>
      
    </categories>
    
    
    <tags>
      
      <tag>bigdata,hadoop,shell</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>【软考】信息系统项目管理师-考试题型</title>
    <link href="/blog/docs/exam-type/exam/exam-type/"/>
    <url>/blog/docs/exam-type/exam/exam-type/</url>
    
    <content type="html"><![CDATA[<blockquote><p>计算机技术与软件专业技术资格位列人力资源社会保障部《国家职业资格目录》的58项专业技术资格之一，是唯一一个能通过考试取得高级职称的专业。公众号【纯码农（purecodefarmer）】输入”考试”获取《专业人员资格考试清单》《信息系统项目管理师教程-第四版（电子版）无水印.pdf》</p></blockquote><h3 id="一、综合知识"><a href="#一、综合知识" class="headerlink" title="一、综合知识"></a>一、综合知识</h3><p>总分：75分<br>及格分：45分<br>考试类型：选择题<br>考试时间：150分钟<br>题目数：75题<br>包含知识点：IT知识（15<del>20分）、项目管理知识（40</del>45分）、时事新闻（5分以上）、运筹学（5分）、英语题（5分）</p><h3 id="二、案例分析"><a href="#二、案例分析" class="headerlink" title="二、案例分析"></a>二、案例分析</h3><p>总分：75分<br>及格分：45分<br>考试类型：<br>问答题（50分）：找错、改错、选择、填空、判断、默写<br>计算题（25分）：画图、计算、默写<br>考试时间：90分钟<br>题目数：3题</p><h3 id="三、论文"><a href="#三、论文" class="headerlink" title="三、论文"></a>三、论文</h3><p>总分：75分<br>及格分：45分<br>考试类型：论文写作<br>考试时间：120分钟<br>题目数：2题选一<br>包含知识点：10大管理、安全管理、合同管理、招投标</p>]]></content>
    
    
    <categories>
      
      <category>exam</category>
      
    </categories>
    
    
    <tags>
      
      <tag>软考,高项</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>【软考】信息系统项目管理师-信息化发展</title>
    <link href="/blog/docs/exam-part1/exam/part1/"/>
    <url>/blog/docs/exam-part1/exam/part1/</url>
    
    <content type="html"><![CDATA[<blockquote><p>汝之观览，吾之幸也！本文主要说明《信息系统项目管理师》第4版第一章内容</p></blockquote><h3 id="一、信息与信息化"><a href="#一、信息与信息化" class="headerlink" title="一、信息与信息化"></a>一、信息与信息化</h3><h4 id="信息"><a href="#信息" class="headerlink" title="信息"></a>信息</h4><p>信息是物质，能量及其属性的标示的集合，是确定性的增加。<br>以物质介质为载体，传递和反映世界各种事物存在方式、运动状态的表征<br>信息不是物质，也不是能量</p><h5 id="信息的定义："><a href="#信息的定义：" class="headerlink" title="信息的定义："></a>信息的定义：</h5><p>香农-信息是用来消除随机不定性的东西。</p><h4 id="信息系统"><a href="#信息系统" class="headerlink" title="信息系统"></a>信息系统</h4><h5 id="信息系统抽象模型："><a href="#信息系统抽象模型：" class="headerlink" title="信息系统抽象模型："></a>信息系统抽象模型：</h5><p>管理模型、信息处理模型、系统实现条件</p><h5 id="信息系统生命周期："><a href="#信息系统生命周期：" class="headerlink" title="信息系统生命周期："></a>信息系统生命周期：</h5><p>系统规划、系统分析（需求分析）、系统设计（概要设计、详细设计）、系统实施（编码、测试）、系统运行、系统维护</p><h4 id="信息化"><a href="#信息化" class="headerlink" title="信息化"></a>信息化</h4><h5 id="信息化内涵："><a href="#信息化内涵：" class="headerlink" title="信息化内涵："></a>信息化内涵：</h5><p>信息化的核心：<br>包含内容：信息网络体系、信息产业基础、社会运行环境、效用积累过程</p><h5 id="信息化体系"><a href="#信息化体系" class="headerlink" title="信息化体系"></a>信息化体系</h5><p>6要素：信息技术应用、信息技术和产业、信息化人才、信息化政策法规和标准规范（上鹰下鸡左人右龟）、信息资源、信息网络</p><h5 id="信息化趋势"><a href="#信息化趋势" class="headerlink" title="信息化趋势"></a>信息化趋势</h5><p>组织信息化趋势<br>国家信息化趋势：三步走<br>第一步：到2020年<br>第二步：到2025年<br>第三步：到21世纪中叶</p><h3 id="二、现代化基础设施"><a href="#二、现代化基础设施" class="headerlink" title="二、现代化基础设施"></a>二、现代化基础设施</h3><h4 id="新型基础设施建设："><a href="#新型基础设施建设：" class="headerlink" title="新型基础设施建设："></a>新型基础设施建设：</h4><h5 id="新基建"><a href="#新基建" class="headerlink" title="新基建"></a>新基建</h5><p>5G基建、特高压、城际高速铁路和城际轨道交通、新能源汽车充电桩、大数据中心、</p><h5 id="概念定义"><a href="#概念定义" class="headerlink" title="概念定义"></a>概念定义</h5><p>信息基础设施<br>融合基础设施<br>创新基础设施</p><h4 id="工业互联网"><a href="#工业互联网" class="headerlink" title="工业互联网"></a>工业互联网</h4><h5 id="内涵与外延："><a href="#内涵与外延：" class="headerlink" title="内涵与外延："></a>内涵与外延：</h5><p>工业互联网不是互联网在工业的简单应用</p><h5 id="平台体系：四大层次"><a href="#平台体系：四大层次" class="headerlink" title="平台体系：四大层次"></a>平台体系：四大层次</h5><p>网络是基础：网络互连、数据互通、标识解析<br>平台是中枢：边缘层、Iass层、Pass层、Saas层  四层作用：数据汇聚、建模分析、知识复用、应用创新<br>数据是要素：重要性、专业性、复杂性<br>安全是保障：涉及范围广、造成影响大、企业的防护基础弱</p><h5 id="融合应用"><a href="#融合应用" class="headerlink" title="融合应用"></a>融合应用</h5><p>平台化设计、智能化制造、网络化协同、个性化定制、服务化延伸、数据化管理</p><h4 id="车联网"><a href="#车联网" class="headerlink" title="车联网"></a>车联网</h4><h5 id="体系架构"><a href="#体系架构" class="headerlink" title="体系架构"></a>体系架构</h5><p>端系统、管系统、云系统</p><h5 id="连接方式"><a href="#连接方式" class="headerlink" title="连接方式"></a>连接方式</h5><h5 id="场景应用"><a href="#场景应用" class="headerlink" title="场景应用"></a>场景应用</h5><h3 id="三、现代化创新发展"><a href="#三、现代化创新发展" class="headerlink" title="三、现代化创新发展"></a>三、现代化创新发展</h3><h4 id="农业农村现代化"><a href="#农业农村现代化" class="headerlink" title="农业农村现代化"></a>农业农村现代化</h4><p>农村现代化<br>乡村振兴战略：建设基础设施、发展智慧农业、建设数据农村</p><h4 id="两化融合与智能制造"><a href="#两化融合与智能制造" class="headerlink" title="两化融合与智能制造"></a>两化融合与智能制造</h4><h5 id="工业发展的重要战略："><a href="#工业发展的重要战略：" class="headerlink" title="工业发展的重要战略："></a>工业发展的重要战略：</h5><p>坚持自主可控</p><h5 id="推动制造业优化升级的重点方向："><a href="#推动制造业优化升级的重点方向：" class="headerlink" title="推动制造业优化升级的重点方向："></a>推动制造业优化升级的重点方向：</h5><p>深入实施智能制造和绿色制造工程，发展服务型制造新模式，推动制造业高端化、智能化、绿色化</p><h5 id="两化融合："><a href="#两化融合：" class="headerlink" title="两化融合："></a>两化融合：</h5><p>信息化带动工业化，以工业化促进信息化，走新型工业化道路</p><h5 id="智能制造："><a href="#智能制造：" class="headerlink" title="智能制造："></a>智能制造：</h5><p>智能制造能力成熟度模型：五个等级<br>规划级、规范级、集成级、优化级、 引领级</p><h3 id="四、数字中国"><a href="#四、数字中国" class="headerlink" title="四、数字中国"></a>四、数字中国</h3><h4 id="信息化发展主旋律"><a href="#信息化发展主旋律" class="headerlink" title="信息化发展主旋律"></a>信息化发展主旋律</h4><p>迎接数据时代，激活数据要素潜能，推动网络强国建设，加快建设数据经济，数据社会，</p><h4 id="数据经济"><a href="#数据经济" class="headerlink" title="数据经济"></a>数据经济</h4><h5 id="分类"><a href="#分类" class="headerlink" title="分类"></a>分类</h5><p>产业构成：数字产业化、产业数字化<br>整体结构：<br>数字产业化（云计算、大数据、物联网、工业互联网、区块链、人工智能、虚拟现实与增强现实）、<br>产业数字化（上云用数赋智）、<br>数字治理、<br>数据价值化：三化（数据资源化、数据资产化、数据资本化（数据信贷融资、数据证券化））</p><h4 id="数字政府"><a href="#数字政府" class="headerlink" title="数字政府"></a>数字政府</h4><p>定义：形成“用数据决策、数据服务、数据创新”的现代化治理模式<br>新特征：协同化、云端化、智能化、数据化、动态化<br>主要内容：一网通办、跨省通办、一网通管</p><h4 id="数字社会"><a href="#数字社会" class="headerlink" title="数字社会"></a>数字社会</h4><h5 id="数字民生"><a href="#数字民生" class="headerlink" title="数字民生"></a>数字民生</h5><p>数字民生建设重点强调：普惠、赋能、利民</p><h5 id="智慧城市"><a href="#智慧城市" class="headerlink" title="智慧城市"></a>智慧城市</h5><p>五个核心能力：<br>数据治理、数字孪生、边际决策、多元融合、态势感知</p><p>成熟级等级：规划级、管理级、协同级、优化级、引领级</p><h5 id="数字生活"><a href="#数字生活" class="headerlink" title="数字生活"></a>数字生活</h5><h4 id="数字生态"><a href="#数字生态" class="headerlink" title="数字生态"></a>数字生态</h4><p>数据要素市场：数据作为新生产要素，具有劳动工具和劳动对象的双重属性<br>数字运营商环境<br>网络安全保护：安全法律法规</p><h3 id="五、数字化转型与元宇宙"><a href="#五、数字化转型与元宇宙" class="headerlink" title="五、数字化转型与元宇宙"></a>五、数字化转型与元宇宙</h3><h4 id="数字化转型"><a href="#数字化转型" class="headerlink" title="数字化转型"></a>数字化转型</h4><p>驱动因素<br>基本原理<br>智慧转移<br>持续迭代</p><h4 id="元宇宙"><a href="#元宇宙" class="headerlink" title="元宇宙"></a>元宇宙</h4><p>特征：沉浸式体验、虚拟身份、虚拟经济、虚拟社会治理<br>发展演进：数字人-》数字人生-》数字组织-》数字生态-》数字社会治理</p>]]></content>
    
    
    <categories>
      
      <category>exam</category>
      
    </categories>
    
    
    <tags>
      
      <tag>软考,高项</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>【大数据调度】宙斯、赫拉女神、海豚的孰是孰非</title>
    <link href="/blog/docs/bigdata-dispatch/bigdata/dispatch/bigdata-dispatch/"/>
    <url>/blog/docs/bigdata-dispatch/bigdata/dispatch/bigdata-dispatch/</url>
    
    <content type="html"><![CDATA[<blockquote><p>汝之观览，吾之幸也！在如今的大数据调度系统中，有着一个又一个的名字出现，从伟大的宙斯（Zeus）到赫拉女神（hera）,还有横空出世的海豚（dolphinscheduler）。</p></blockquote><h3 id="一、宙斯（Zeus）"><a href="#一、宙斯（Zeus）" class="headerlink" title="一、宙斯（Zeus）"></a>一、宙斯（Zeus）</h3><p>Zeus是阿里巴巴开源的资源调度系统，在2014开源，但开源后未进行维护，目前已经在<a href="https://github.com/alibaba/?q=z&type=all&language=&sort=">阿里巴巴开源项目</a>中找不到了，网上也没有很少关于此项目的最新文档。暂不讨论，直接进行下一回。</p><h3 id="二、赫拉女神（hera）"><a href="#二、赫拉女神（hera）" class="headerlink" title="二、赫拉女神（hera）"></a>二、赫拉女神（hera）</h3><p>hera是在Zeus的基础上做的，是一款分布式任务调度系统，</p><h3 id="三、海豚（dolphinscheduler）"><a href="#三、海豚（dolphinscheduler）" class="headerlink" title="三、海豚（dolphinscheduler）"></a>三、海豚（dolphinscheduler）</h3><h3 id="四、自研调度器"><a href="#四、自研调度器" class="headerlink" title="四、自研调度器"></a>四、自研调度器</h3><p>目前正在开发中，请稍等</p>]]></content>
    
    
    <categories>
      
      <category>dispatch</category>
      
    </categories>
    
    
    <tags>
      
      <tag>bigdata,DolphinScheduler</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>【读书笔记】《5%的改变》</title>
    <link href="/blog/docs/read-fivechange/read/read-fivechange/"/>
    <url>/blog/docs/read-fivechange/read/read-fivechange/</url>
    
    <content type="html"><![CDATA[<blockquote><p>分享知识，让更多的人爱上读书。每周我会在公众号【纯码农（purecodefarmer）】免费赠送限量读书卡（樊登读书），输入“读书”即可获取，ps:在此声明，不是广告，仅仅是想更多人好读书，读好书，也希望遇到志同道合的人。读书卡数量有限，先到先得。</p></blockquote><h4 id="一、前言"><a href="#一、前言" class="headerlink" title="一、前言"></a>一、前言</h4><p>本书主要是以“问”、“答”、“反馈”、“复盘”四个步骤来讨论不同方面的问题，以简短简洁的语言回答每个人遇到的不同问题，再以当事人的反馈做最后的复盘给出结论。每章之后会有对应的工具箱，可能让你有一点改变，也可能没有，但哪有怎么样呢？只要自己觉得轻松，不再那么焦虑，带点佛性的状态去感悟自己，感悟人生，感悟世界。</p><h4 id="二、目录"><a href="#二、目录" class="headerlink" title="二、目录"></a>二、目录</h4><h5 id="1、自我"><a href="#1、自我" class="headerlink" title="1、自我"></a>1、自我</h5><h5 id="2、原生家庭"><a href="#2、原生家庭" class="headerlink" title="2、原生家庭"></a>2、原生家庭</h5><h5 id="3、工作与理想"><a href="#3、工作与理想" class="headerlink" title="3、工作与理想"></a>3、工作与理想</h5><h5 id="4、亲密关系"><a href="#4、亲密关系" class="headerlink" title="4、亲密关系"></a>4、亲密关系</h5><h5 id="5、人际关系"><a href="#5、人际关系" class="headerlink" title="5、人际关系"></a>5、人际关系</h5>]]></content>
    
    
    <categories>
      
      <category>读书</category>
      
    </categories>
    
    
    <tags>
      
      <tag>读书</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>【Java】IO一进一出苦了谁</title>
    <link href="/blog/docs/java-io/java/java-io/"/>
    <url>/blog/docs/java-io/java/java-io/</url>
    
    <content type="html"><![CDATA[<blockquote><p>汝之观览，吾之幸也！本文主要讲解Java IO流，通过IO流的历史、概念、分类到如何使用IO流详细说明。</p></blockquote><h3 id="一、IO的历史"><a href="#一、IO的历史" class="headerlink" title="一、IO的历史"></a>一、IO的历史</h3><p>今天我们开始了解下Java的一些知识，首先从我们的IO开始，先说下IO的发展历史，从BIO–&gt;NIO–&gt;AIO，请看下图</p><p><img src="https://jimmy-blog-images.oss-cn-shanghai.aliyuncs.com/img/java/io-%E5%8E%86%E5%8F%B2.png" alt="Java IO历史"></p><p>以生活中的烧开水为例子:</p><p>BIO 同步阻塞（blocking I/O）就是一直监测某个水壶，等该水壶开了再去监测下一个；</p><p>NIO 同步非阻塞（non-blocking I/O）就是监测所有的水壶，哪个水开了处理哪个；</p><p>AIO 异步非阻塞（Asynchronous I/O）是将所有的水壶加上报警器，哪个水壶烧开报警了就处理哪个。</p><p><img src="https://jimmy-blog-images.oss-cn-shanghai.aliyuncs.com/img/java/io-%E7%83%A7%E5%BC%80%E6%B0%B4.png"></p><h3 id="二、IO流"><a href="#二、IO流" class="headerlink" title="二、IO流"></a>二、IO流</h3><h4 id="1、什么是流"><a href="#1、什么是流" class="headerlink" title="1、什么是流"></a>1、什么是流</h4><p>就相当于是自来水管道中的水流。打个比方，一张图片，一段视频，一个word文档，这些数据全部都是以0，1（二进制）形式存在于设备中,就好比《黑客帝国》中的虚拟世界，以为看到的是实体，其实在电脑内部只是一串数字拼接而成。</p><p><img src="https://jimmy-blog-images.oss-cn-shanghai.aliyuncs.com/img/java/%E6%95%B0%E5%AD%9701.jpeg" alt="数字01"></p><p>IO流就是数据流，一张图片，通过程序拷贝到硬盘中。会将图片转换为二进制数据集，把数据一点一点的传递到文件夹，这就类似于水的流动，整体的数据就是数据流。</p><p><img src="https://jimmy-blog-images.oss-cn-shanghai.aliyuncs.com/img/java/io-%E5%9B%BE%E7%89%87%E7%9A%84%E6%9C%AC%E8%B4%A8.png" alt="图片数据流"></p><h4 id="2、流的分类"><a href="#2、流的分类" class="headerlink" title="2、流的分类"></a>2、流的分类</h4><ul><li><p>数据流向：输入流、输出流</p></li><li><p>数据类型：字节流(图片、视频等)、字符流（文本）</p><table><thead><tr><th>数据流向/数据类型</th><th>字节流</th><th>字符流</th></tr></thead><tbody><tr><td>输入流</td><td>InputStream</td><td>Reader</td></tr><tr><td>输出流</td><td>OutputStream</td><td>Writer</td></tr></tbody></table><p>根据数据流向与数据类型就可以显而易见的看出IO类的分布，整理如下</p></li></ul><p><img src="https://jimmy-blog-images.oss-cn-shanghai.aliyuncs.com/img/java/IO%E6%B5%81%E5%88%86%E7%B1%BB.png" alt="IO流分类"></p><h4 id="3、IO流对象"><a href="#3、IO流对象" class="headerlink" title="3、IO流对象"></a>3、IO流对象</h4><h5 id="3-1、InputStream"><a href="#3-1、InputStream" class="headerlink" title="3-1、InputStream"></a>3-1、InputStream</h5><p>InputStream 是字节输入流的抽象类，提供了通用的读方法</p><table><thead><tr><th>方法</th><th>功能</th></tr></thead><tbody><tr><td>public abstract int read()</td><td>从输入流读取下一个字节，读取到尾部时返回-1</td></tr><tr><td>public int read(byte b[])</td><td>从输入流中读取长度为b.length个字节放入字节数组b中</td></tr><tr><td>public int read(byte b[], int off, int len)</td><td>从输入流中读取指定范围的字节数据放到字节数组b中</td></tr><tr><td>public long skip(long n)</td><td>跳过n个字节，返回实际跳过的字节数</td></tr><tr><td>public int available()</td><td>返回下一次可读取且不会被方法阻塞的字节数的估计值</td></tr><tr><td>public void close()</td><td>关闭此输入流并释放资源</td></tr><tr><td>public synchronized void mark(int readlimit)</td><td>标记此输入流的当前位置，对reset()方法的后续调用<br>将会重新定位在mark()标记的位置，可以重新读取相同的字节</td></tr><tr><td>public synchronized void reset()</td><td>将流的位置重新定位在最后一次调用mark()方法时的位置</td></tr><tr><td>public boolean markSupported()</td><td>判断输入流是否支持mark()和reset()方法，即能否重复读取字节</td></tr></tbody></table><h5 id="3-2、OutputStream"><a href="#3-2、OutputStream" class="headerlink" title="3-2、OutputStream"></a>3-2、OutputStream</h5><p>OutputStream是字节输出流的抽象类，提供了通用的写方法</p><table><thead><tr><th>方法</th><th>功能</th></tr></thead><tbody><tr><td>public abstract void write(int b)</td><td>将指定的字节写出到输出流，写入的字节是b的低8位</td></tr><tr><td>public void write(byte b[])</td><td>将指定字节数组中的所有字节写入到输出流当中</td></tr><tr><td>public void write(byte b[], int off, int len)</td><td>指定写入的起始位置offer,字节数位len的字节数组写入到输出流中</td></tr><tr><td>public void flush()</td><td>刷新输出流，并强制写出所有缓冲的输出字节到指定位置，<br>每次写完都要调用</td></tr><tr><td>public void close()</td><td>关闭此输出流并释放资源</td></tr></tbody></table><h5 id="3-3、Reader"><a href="#3-3、Reader" class="headerlink" title="3-3、Reader"></a>3-3、Reader</h5><p>Reader是字符输入流的抽象类</p><table><thead><tr><th>方法</th><th>功能</th></tr></thead><tbody><tr><td>public int read(java.nio.CharBuffer target)</td><td>将读入的字符存入指定的字符缓冲区中</td></tr><tr><td>public int read()</td><td>读取一个字符</td></tr><tr><td>public int read(char cbuf[])</td><td>读入字符放入整个字符数组中</td></tr><tr><td>abstract public int read(char cbuf[], int off, int len)</td><td>将字符读入字符数组中的指定范围中</td></tr></tbody></table><h5 id="3-4、Writer"><a href="#3-4、Writer" class="headerlink" title="3-4、Writer"></a>3-4、Writer</h5><p>Writer是字符输出流的抽象类</p><table><thead><tr><th>方法</th><th>功能</th></tr></thead><tbody><tr><td>public void write(char cbuf[])</td><td>将cbuf字符数组写出到输出流</td></tr><tr><td>abstract public void write(char cbuf[], int off, int len)</td><td>将指定范围的cbuf数组写出到输出流</td></tr><tr><td>public void write(String str)</td><td>将字符串str写出到输出流，str内部也是字符数组</td></tr><tr><td>public void write(String str, int off, int len)</td><td>将字符串str的一部分写出到输出流</td></tr><tr><td>abstract public void flush()</td><td>刷新缓冲流</td></tr><tr><td>abstract public void close()</td><td>关闭流对象并释放资源</td></tr></tbody></table>]]></content>
    
    
    <categories>
      
      <category>java</category>
      
    </categories>
    
    
    <tags>
      
      <tag>java,io</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>花钱的图片服务就是好用哈（picGo+阿里云OSS）</title>
    <link href="/blog/docs/hexo-picgo-oss/hexo/picgo-oss/"/>
    <url>/blog/docs/hexo-picgo-oss/hexo/picgo-oss/</url>
    
    <content type="html"><![CDATA[<p>接上一篇<a href="https://purecodefarmer.gitee.io/blog/docs/hexo-picgo/hexo-picgo/">让你一篇文章走天下（SM.MS的妙用）</a>,虽然SM.MS还是不错的，但是将文章发布到其他平台时，会出现获取不到图片的问题，如简书，公众号等，试了下，使用SM.MS是可以在知乎上正常使用的<a href="https://zhuanlan.zhihu.com/p/530200122">上篇文章</a>。但为了保持各平台都可以通用，所以狠心买了OSS服务（心疼那几十块）。</p><h3 id="一、注册阿里云账号并创建子账号赋权"><a href="#一、注册阿里云账号并创建子账号赋权" class="headerlink" title="一、注册阿里云账号并创建子账号赋权"></a>一、注册阿里云账号并创建子账号赋权</h3><p>可自行注册阿里云账号，也可以使用淘宝，钉钉登录。注册好阿里云账号可设置RAM子账号，一般使用子账号进行操作。</p><p>创建子账号后赋OSS权限，记住子账号的AccessKey ID、AccessKey Secret</p><p><img src="https://jimmy-blog-images.oss-cn-shanghai.aliyuncs.com/img/%E9%98%BF%E9%87%8C%E8%AE%BE%E7%BD%AERAM%E7%94%A8%E6%88%B7%E6%9D%83%E9%99%90.png" alt="创建用户并赋OSS权限"></p><h3 id="二、购买OSS"><a href="#二、购买OSS" class="headerlink" title="二、购买OSS"></a>二、购买OSS</h3><h4 id="1、进入到产品页面，进入OSS页面"><a href="#1、进入到产品页面，进入OSS页面" class="headerlink" title="1、进入到产品页面，进入OSS页面"></a>1、进入到产品页面，进入OSS页面</h4><p><img src="https://jimmy-blog-images.oss-cn-shanghai.aliyuncs.com/img/%E9%98%BF%E9%87%8C%E5%AF%B9%E8%B1%A1%E5%AD%98%E5%82%A8OSS.png" alt="产品-存储-OSS"></p><h4 id="2、购买OSS，选择购买方式"><a href="#2、购买OSS，选择购买方式" class="headerlink" title="2、购买OSS，选择购买方式"></a>2、购买OSS，选择购买方式</h4><p><img src="https://jimmy-blog-images.oss-cn-shanghai.aliyuncs.com/img/%E9%98%BF%E9%87%8C%E8%B4%AD%E4%B9%B0OSS.png" alt="选择购买方式"></p><h4 id="3、立即开通OSS"><a href="#3、立即开通OSS" class="headerlink" title="3、立即开通OSS"></a>3、立即开通OSS</h4><p><img src="https://jimmy-blog-images.oss-cn-shanghai.aliyuncs.com/img/%E9%98%BF%E9%87%8COSS%E5%BC%80%E9%80%9A.png"></p><h4 id="4、创建Bucket"><a href="#4、创建Bucket" class="headerlink" title="4、创建Bucket"></a>4、创建Bucket</h4><p>创建bucket，创建后复制创建的名称与地域节点</p><p><img src="https://jimmy-blog-images.oss-cn-shanghai.aliyuncs.com/img/%E9%98%BF%E9%87%8C%E5%AD%98%E5%82%A8%E5%8C%BA%E5%9F%9F.png"></p><h3 id="三、配置PicGo中的OSS配置"><a href="#三、配置PicGo中的OSS配置" class="headerlink" title="三、配置PicGo中的OSS配置"></a>三、配置PicGo中的OSS配置</h3><h4 id="图床配置"><a href="#图床配置" class="headerlink" title="图床配置"></a>图床配置</h4><p>将上述的子账号的AccessKey ID、AccessKey Secret、创建的Bucket名称、地域节点（去掉.aliyuncs.com）后分别配置到设定KeyId、设定KeySecret、设定存储空间名、确认存储区域、指定存储路径。配置好设为默认图床</p><p><img src="https://jimmy-blog-images.oss-cn-shanghai.aliyuncs.com/img/%E9%98%BF%E9%87%8CpicGo%E8%AE%BE%E7%BD%AEOSS%E9%85%8D%E7%BD%AE.png" alt="图床配置"></p><h3 id="四、其他平台展示"><a href="#四、其他平台展示" class="headerlink" title="四、其他平台展示"></a>四、其他平台展示</h3><h4 id="1、知乎文章"><a href="#1、知乎文章" class="headerlink" title="1、知乎文章"></a>1、知乎文章</h4><p><img src="https://jimmy-blog-images.oss-cn-shanghai.aliyuncs.com/img/%E7%9F%A5%E4%B9%8E%E6%90%AD%E5%BB%BA%E5%8D%9A%E5%AE%A2%E6%96%87%E7%AB%A0.png"></p><h4 id="2、csdn文章"><a href="#2、csdn文章" class="headerlink" title="2、csdn文章"></a>2、csdn文章</h4><p><img src="https://jimmy-blog-images.oss-cn-shanghai.aliyuncs.com/img/csdn%E6%96%87%E7%AB%A0.png" alt="csdn文章"></p><h4 id="3、头条文章"><a href="#3、头条文章" class="headerlink" title="3、头条文章"></a>3、头条文章</h4><p><img src="https://jimmy-blog-images.oss-cn-shanghai.aliyuncs.com/img/%E5%A4%B4%E6%9D%A1%E6%96%87%E7%AB%A0.png" alt="头条文章"></p>]]></content>
    
    
    <categories>
      
      <category>hexo</category>
      
    </categories>
    
    
    <tags>
      
      <tag>hexo,picgo,oss</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>让你一篇文章走天下（SM.MS的妙用）</title>
    <link href="/blog/docs/hexo-picgo/hexo/hexo-picgo/"/>
    <url>/blog/docs/hexo-picgo/hexo/hexo-picgo/</url>
    
    <content type="html"><![CDATA[<p>上篇解决了fluid的配置问题(可访问<a href="https://purecodefarmer.gitee.io/blog/">纯码农的博客</a>)，现在就是关于图片的问题，如果想在多个平台发布文章，那么图片就不能存放在本地，那么就有了图床的概念。就是把你的图片上传到网上，我们获取到对应的url就可以一次编辑，多处使用了。</p><h3 id="一、gitee无法使用外链"><a href="#一、gitee无法使用外链" class="headerlink" title="一、gitee无法使用外链"></a>一、gitee无法使用外链</h3><p>之前看网上可以结合Gitee,新建仓库然后使用picGo工具上传，鄙人试了一下，现在Gitee做了检查，不准使用图床外链，如果使用就会将仓库设为私有，这样就没法使用了，所以换了一种方式，使用SM.MS的方式</p><p><img src="https://s2.loli.net/2022/06/17/COnbyGgoZz8lW1w.png" alt="Gitee禁止图床外链"></p><h3 id="二、SM-MS的注册"><a href="#二、SM-MS的注册" class="headerlink" title="二、SM.MS的注册"></a>二、SM.MS的注册</h3><h4 id="1、使用sm-ms官网进行注册"><a href="#1、使用sm-ms官网进行注册" class="headerlink" title="1、使用sm.ms官网进行注册"></a>1、使用<a href="https://sm.ms/">sm.ms官网</a>进行注册</h4><p><img src="https://s2.loli.net/2022/06/17/m6LKEzGVPZrcTwb.png" alt="注册账号"></p><h4 id="2、登录后进入面板界面"><a href="#2、登录后进入面板界面" class="headerlink" title="2、登录后进入面板界面"></a>2、登录后进入面板界面</h4><p><img src="https://s2.loli.net/2022/06/17/4qp3dZUlAORuhz9.png" alt="dashborad"></p><h4 id="3、获取token"><a href="#3、获取token" class="headerlink" title="3、获取token"></a>3、获取token</h4><p><img src="https://s2.loli.net/2022/06/17/9Blvpjqmx7yFzLE.png" alt="获取token"></p><h4 id="4、Typora配置图床"><a href="#4、Typora配置图床" class="headerlink" title="4、Typora配置图床"></a>4、Typora配置图床</h4><p><img src="https://s2.loli.net/2022/06/17/JHTGzmK9g8tMcN2.png" alt="文件-偏好设置"></p><p>在第5步的时候将文件配置为</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs json"><span class="hljs-punctuation">&#123;</span><br>  <span class="hljs-attr">&quot;picBed&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><br>    <span class="hljs-attr">&quot;current&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;smms&quot;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;smms&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><br>      <span class="hljs-attr">&quot;token&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;这里是你的 SM.MS 账号的 API Token&quot;</span><br>    <span class="hljs-punctuation">&#125;</span><br>  <span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">,</span><br>  <span class="hljs-attr">&quot;picgoPlugins&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><span class="hljs-punctuation">&#125;</span><br><span class="hljs-punctuation">&#125;</span><br></code></pre></td></tr></table></figure><h4 id="5、复制图片即可返回文件的url地址，也可在官网中查看到已上传的图片"><a href="#5、复制图片即可返回文件的url地址，也可在官网中查看到已上传的图片" class="headerlink" title="5、复制图片即可返回文件的url地址，也可在官网中查看到已上传的图片"></a>5、复制图片即可返回文件的url地址，也可在官网中查看到已上传的图片</h4><p><img src="https://s2.loli.net/2022/06/17/ONYnAc6QmiWfTHk.png" alt="已上传的图片"></p><h3 id="三、发布文章"><a href="#三、发布文章" class="headerlink" title="三、发布文章"></a>三、发布文章</h3><p><img src="https://s2.loli.net/2022/06/17/jWp2nRHk4QGr3TM.png" alt="发布文章"></p><h3 id="后话"><a href="#后话" class="headerlink" title="后话"></a>后话</h3><h4 id="1、SM-MS一个账号只有5G的空间，所以如果存满了可以使用其他账号注册"><a href="#1、SM-MS一个账号只有5G的空间，所以如果存满了可以使用其他账号注册" class="headerlink" title="1、SM.MS一个账号只有5G的空间，所以如果存满了可以使用其他账号注册"></a>1、SM.MS一个账号只有5G的空间，所以如果存满了可以使用其他账号注册</h4><h4 id="2、图片可以访问，但是有些延迟，也可以使用腾讯云与阿里云等其他付费存储"><a href="#2、图片可以访问，但是有些延迟，也可以使用腾讯云与阿里云等其他付费存储" class="headerlink" title="2、图片可以访问，但是有些延迟，也可以使用腾讯云与阿里云等其他付费存储"></a>2、图片可以访问，但是有些延迟，也可以使用腾讯云与阿里云等其他付费存储</h4><p>参考文章<a href="https://blog.csdn.net/m0_37172770/article/details/125379175">花钱的图片服务就是好用哈（picGo+阿里云OSS）</a></p>]]></content>
    
    
    <categories>
      
      <category>hexo</category>
      
    </categories>
    
    
    <tags>
      
      <tag>hexo,picgo</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>给blog增加上Fluid主题，快乐到飞起</title>
    <link href="/blog/docs/hexo-fluid/hexo/hexo-fluid/"/>
    <url>/blog/docs/hexo-fluid/hexo/hexo-fluid/</url>
    
    <content type="html"><![CDATA[<h3 id="配置fluid主题"><a href="#配置fluid主题" class="headerlink" title="配置fluid主题"></a>配置fluid主题</h3><p>可以参考<a href="https://hexo.fluid-dev.com/">fluid官网</a>进行配置</p><h4 id="一、下载"><a href="#一、下载" class="headerlink" title="一、下载"></a>一、下载</h4><h5 id="1、下载最新-release-版本"><a href="#1、下载最新-release-版本" class="headerlink" title="1、下载最新 release 版本"></a>1、下载<a href="https://github.com/fluid-dev/hexo-theme-fluid/releases">最新 release 版本</a></h5><p><img src="/blog/hexo-fluid/fluid-download.png" alt="下载fluid主题"></p><h5 id="2、解压到-themes-目录，并将解压出的文件夹重命名为-fluid"><a href="#2、解压到-themes-目录，并将解压出的文件夹重命名为-fluid" class="headerlink" title="2、解压到 themes 目录，并将解压出的文件夹重命名为 fluid"></a>2、解压到 themes 目录，并将解压出的文件夹重命名为 fluid</h5><p><img src="/blog/hexo-fluid/theme-fluid.png" alt="更改下载后的文件夹名称"></p><h4 id="二、配置主题"><a href="#二、配置主题" class="headerlink" title="二、配置主题"></a>二、配置主题</h4><h5 id="1、修改-config-yml文件中的theme配置"><a href="#1、修改-config-yml文件中的theme配置" class="headerlink" title="1、修改_config.yml文件中的theme配置"></a>1、修改_config.yml文件中的theme配置</h5><p><img src="/blog/hexo-fluid/theme.png" alt="配置主题"></p><h5 id="2、复制-conrfig-yml-为-config-fluid-yml-后续只需修改-config-fluid-yml-配置即可"><a href="#2、复制-conrfig-yml-为-config-fluid-yml-后续只需修改-config-fluid-yml-配置即可" class="headerlink" title="2、复制_conrfig.yml 为 _config.fluid.yml  ,后续只需修改 _config.fluid.yml 配置即可"></a>2、复制_conrfig.yml 为 _config.fluid.yml  ,后续只需修改 _config.fluid.yml 配置即可</h5><p><img src="/blog/hexo-fluid/theme-config.png" alt="_config.fluid.yml"></p><h5 id="3、修改显示的文字"><a href="#3、修改显示的文字" class="headerlink" title="3、修改显示的文字"></a>3、修改显示的文字</h5><p>修改 themes\fluid_config.yml 文件</p><p><img src="/blog/hexo-fluid/fluid-text.png" alt="fluid-text"></p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs yml"><span class="hljs-attr">blog_title:</span> <span class="hljs-string">&quot;纯码农的博客&quot;</span><br></code></pre></td></tr></table></figure><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs yml"><span class="hljs-attr">text:</span> <span class="hljs-string">&quot;Sometimes it is the very people who no one imagines anything of ,</span><br><span class="hljs-string">         who do the things that no one can imagine. --《模仿游戏》&quot;</span><br></code></pre></td></tr></table></figure><p><img src="/blog/hexo-fluid/fluid-text2.png" alt="fluid-text"></p><h4 id="三、配置关于页测试"><a href="#三、配置关于页测试" class="headerlink" title="三、配置关于页测试"></a>三、配置关于页测试</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">hexo new page about<br></code></pre></td></tr></table></figure><p>创建成功后，编辑博客目录下 <code>/source/about/index.md</code>，添加 <code>layout</code> 属性</p><p>修改后的文件示例如下：</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs yml"><span class="hljs-meta">---</span><br><span class="hljs-attr">title:</span> <span class="hljs-string">about</span><br><span class="hljs-attr">date:</span> <span class="hljs-number">2022-05-19 17:03:18</span><br><span class="hljs-attr">layout:</span> <span class="hljs-string">about</span><br><span class="hljs-meta">---</span><br></code></pre></td></tr></table></figure><p><img src="/blog/hexo-fluid/fluid-about.png" alt="about页"></p><h4 id="四、配置阅读数"><a href="#四、配置阅读数" class="headerlink" title="四、配置阅读数"></a>四、配置阅读数</h4><h5 id="1、注册LeanCloud账号，需要支付宝与邮箱验证，LeanCloud官网"><a href="#1、注册LeanCloud账号，需要支付宝与邮箱验证，LeanCloud官网" class="headerlink" title="1、注册LeanCloud账号，需要支付宝与邮箱验证，LeanCloud官网"></a>1、注册LeanCloud账号，需要支付宝与邮箱验证，<a href="https://console.leancloud.cn/apps">LeanCloud官网</a></h5><p>注册号账号，验证成功后，创建项目，创建成功后进入项目获取appid、appkey</p><p><img src="/blog/hexo-fluid/fluid-LeanCloud.png" alt="获取appid"></p><h5 id="2、创建Class-Counter"><a href="#2、创建Class-Counter" class="headerlink" title="2、创建Class   Counter"></a>2、创建Class   Counter</h5><p>创建的名称必须是Counter，且要配置无限制，这样才会更新浏览次数，不然接口403，不会更新数据。</p><p><img src="/blog/hexo-fluid/LeanCloud-Class.png" alt="创建Class"></p><h5 id="3、配置themes-fluid-config-yml文件"><a href="#3、配置themes-fluid-config-yml文件" class="headerlink" title="3、配置themes/fluid/_config.yml文件"></a>3、配置themes/fluid/_config.yml文件</h5><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs yml"><span class="hljs-attr">web_analytics:</span>  <span class="hljs-comment"># 网页访问统计</span><br>  <span class="hljs-attr">enable:</span> <span class="hljs-literal">true</span><br>  <span class="hljs-attr">leancloud:</span><br>    <span class="hljs-attr">app_id:</span> <span class="hljs-string">获取的appid</span><br>    <span class="hljs-attr">app_key:</span> <span class="hljs-string">获取的appkey</span><br>    <span class="hljs-attr">server_url:</span> <span class="hljs-string">https://1epgvtla.lc-cn-n1-shared.com</span><br></code></pre></td></tr></table></figure><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs yml"><span class="hljs-attr">statistics:</span><br>   <span class="hljs-attr">enable:</span> <span class="hljs-literal">true</span><br>   <span class="hljs-attr">source:</span> <span class="hljs-string">&quot;leancloud&quot;</span><br>   <span class="hljs-attr">pv_format:</span> <span class="hljs-string">&quot;总访问量 &#123;&#125; 次&quot;</span><br>   <span class="hljs-attr">uv_format:</span> <span class="hljs-string">&quot;总访客数 &#123;&#125; 人&quot;</span><br></code></pre></td></tr></table></figure><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs yml"><span class="hljs-comment"># 浏览量计数</span><br><span class="hljs-comment"># Number of visits</span><br><span class="hljs-attr">views:</span><br>  <span class="hljs-attr">enable:</span> <span class="hljs-literal">true</span><br>  <span class="hljs-comment"># 统计数据来源</span><br>  <span class="hljs-comment"># Data Source</span><br>  <span class="hljs-comment"># Options: busuanzi | leancloud</span><br>  <span class="hljs-attr">source:</span> <span class="hljs-string">&quot;leancloud&quot;</span><br>  <span class="hljs-attr">format:</span> <span class="hljs-string">&quot;&#123;&#125; 次&quot;</span><br></code></pre></td></tr></table></figure><h5 id="3、刷新页面查看文件的阅读量"><a href="#3、刷新页面查看文件的阅读量" class="headerlink" title="3、刷新页面查看文件的阅读量"></a>3、刷新页面查看文件的阅读量</h5><p><img src="/blog/hexo-fluid/LeanCloud-count.png" alt="阅读量"></p><h4 id="五、更多配置"><a href="#五、更多配置" class="headerlink" title="五、更多配置"></a>五、更多配置</h4><p>可参考文档，<a href="https://hexo.fluid-dev.com/docs/guide/#%E5%85%B3%E4%BA%8E%E6%8C%87%E5%8D%97">其他fluid配置</a></p><p><img src="/blog/hexo-fluid/fluid-doc.png" alt="配置指南"></p>]]></content>
    
    
    <categories>
      
      <category>hexo</category>
      
    </categories>
    
    
    <tags>
      
      <tag>hexo,fluid</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>hexo的其他配置</title>
    <link href="/blog/docs/hexo-other/hexo/hexo-other/"/>
    <url>/blog/docs/hexo-other/hexo/hexo-other/</url>
    
    <content type="html"><![CDATA[<blockquote><p>更好的归纳整理博客文章，提供一些简单的操作，便于管理，随时更新</p></blockquote><h3 id="1、文章分目录"><a href="#1、文章分目录" class="headerlink" title="1、文章分目录"></a>1、文章分目录</h3><p>将文章放在不同的目录下</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta prompt_">$ </span><span class="language-bash">hexo new 标题名 --path 目录名/文件名</span><br>例：<br><span class="hljs-meta prompt_">$ </span><span class="language-bash">hexo new hadoop-01 --path bigdata/hadoop/hadoop-01</span><br></code></pre></td></tr></table></figure><h3 id="2、配置文章的表头模板"><a href="#2、配置文章的表头模板" class="headerlink" title="2、配置文章的表头模板"></a>2、配置文章的表头模板</h3><p><code>_config.fluid.yml</code> 中的配置</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs yml"><span class="hljs-attr">default_layout:</span> <span class="hljs-string">post</span><br></code></pre></td></tr></table></figure><p>这个post就是根目录下的 <code>scaffolds\post.md</code>文件，可再自定义layout，也可修改此文件进行配置</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs yml"><span class="hljs-meta">---</span><br><span class="hljs-attr">title:</span> &#123;&#123; <span class="hljs-string">title</span> &#125;&#125;<br><span class="hljs-attr">date:</span> &#123;&#123; <span class="hljs-string">date</span> &#125;&#125;<br><span class="hljs-attr">tags:</span><br><span class="hljs-attr">categories:</span> <br><span class="hljs-attr">index_img:</span> <span class="hljs-string">https://jimmy-blog-images.oss-cn-shanghai.aliyuncs.com/cover_img/1.jpeg</span><br><span class="hljs-attr">md_url:</span> <span class="hljs-string">docs/</span><br><span class="hljs-meta">---</span><br></code></pre></td></tr></table></figure><p>这样再新建的时候就会默认显示</p>]]></content>
    
    
    <categories>
      
      <category>hexo</category>
      
    </categories>
    
    
    <tags>
      
      <tag>hexo</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>原来建自己的blog这么简单（Gitee+Git+Hexo+Fluid+NodeJs）</title>
    <link href="/blog/docs/hexo/hexo/hexo-build/"/>
    <url>/blog/docs/hexo/hexo/hexo-build/</url>
    
    <content type="html"><![CDATA[<h3 id="一、前提"><a href="#一、前提" class="headerlink" title="一、前提"></a>一、前提</h3><h4 id="1、注册Gitee账号并创建仓库"><a href="#1、注册Gitee账号并创建仓库" class="headerlink" title="1、注册Gitee账号并创建仓库"></a>1、注册Gitee账号并创建仓库</h4><p><a href="https://gitee.com/">Gitee官网</a></p><p>可以在Gitee官网注册账号，注册账号可自行百度，注册后可新建一个仓库</p><p><img src="/blog/hexo-build/gitee_new.png" alt="新建仓库"></p><p><img src="/blog/hexo-build/gitee_1.png" alt="新建仓库名称与路径"></p><p>名称与路径可一致，新建仓库截图部分使用 purecodefarmer-test 进行截图使用，本项目是使用purecodefarmer-blog，后续也是使用这个名称。新建完成可点击创建仓库进入目录下</p><p><img src="/blog/hexo-build/gitee_2.png" alt="新建仓库目录"></p><h4 id="2、下载NodeJs"><a href="#2、下载NodeJs" class="headerlink" title="2、下载NodeJs"></a>2、下载NodeJs</h4><p><a href="https://nodejs.org/zh-cn/download/">NodeJs下载地址</a></p><p><img src="/blog/hexo-build/nodeJs_download.png" alt="NodeJs-windows版本下载"></p><p>下载下来正常步骤安装即可，安装后按windows键+R键，输入cmd</p><p><img src="/blog/hexo-build/cmd.png" alt="cmd"></p><p>查看nodeJs 与npm的版本，可正常输入版本号说明安装成功</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta prompt_">$ </span><span class="language-bash">node -v</span><br><span class="hljs-meta prompt_">$ </span><span class="language-bash">npm -v</span><br></code></pre></td></tr></table></figure><p><img src="/blog/hexo-build/nodeJs_cmd.png" alt="node_cmd"></p><h4 id="3、下载Git"><a href="#3、下载Git" class="headerlink" title="3、下载Git"></a>3、下载Git</h4><p><a href="https://git-scm.com/downloads">Git下载地址</a></p><p><img src="/blog/hexo-build/git_download.png" alt="Git下载"></p><p>下载结束后按照正常流程安装即可，安装完成后检测是否安装成功</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta prompt_">$ </span><span class="language-bash">git --version</span><br></code></pre></td></tr></table></figure><p><img src="/blog/hexo-build/git_cmd.png" alt="git_cmd"></p><p><img src="/blog/hexo-build/git_right.png" alt="鼠标右击显示Git"></p><p>出现版本号表示安装成功</p><h4 id="4、仓库公钥配置"><a href="#4、仓库公钥配置" class="headerlink" title="4、仓库公钥配置"></a>4、仓库公钥配置</h4><p>cmd后输入命令生成公钥与私钥, “<a href="mailto:&#120;&#x78;&#120;&#x78;&#x78;&#64;&#x71;&#x71;&#46;&#99;&#111;&#109;">&#120;&#x78;&#120;&#x78;&#x78;&#64;&#x71;&#x71;&#46;&#99;&#111;&#109;</a>“ 是自己的邮箱，可使用其他邮箱</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta prompt_">$ </span><span class="language-bash">ssh-keygen -t ed25519 -C <span class="hljs-string">&quot;xxxxx@qq.com&quot;</span></span>  <br></code></pre></td></tr></table></figure><p><img src="/blog/hexo-build/ssh_create.png" alt="生成ssh密钥"></p><p>之后会在 C:\Users\Administrator 路径下生成  .ssh 文件夹，文件夹下会有公钥(id_ed25519.pub)、私钥(id_ed25519)、hosts文件(known_hosts)</p><p><img src="/blog/hexo-build/ssh_file.png" alt="生成.ssh文件夹"></p><p><img src="/blog/hexo-build/ssh_files.png" alt="生成.ssh文件内容"></p><p>复制公钥(id_ed25519.pub)内容，打开Gitee自己新创建的仓库，点击管理</p><p><img src="/blog/hexo-build/git_manage.png" alt="gitee管理"></p><p>部署公钥管理–&gt;添加公钥</p><p><img src="/blog/hexo-build/git_ssh.png" alt="git配置公钥"></p><h3 id="二、配置Hexo"><a href="#二、配置Hexo" class="headerlink" title="二、配置Hexo"></a>二、配置Hexo</h3><h4 id="1、配置国内的镜像源"><a href="#1、配置国内的镜像源" class="headerlink" title="1、配置国内的镜像源"></a>1、配置国内的镜像源</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta prompt_">$ </span><span class="language-bash">npm config <span class="hljs-built_in">set</span> registry https://registry.npm.taobao.org</span><br></code></pre></td></tr></table></figure><h4 id="2、安装Hexo"><a href="#2、安装Hexo" class="headerlink" title="2、安装Hexo"></a>2、安装Hexo</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta prompt_">$ </span><span class="language-bash">npm install -g hexo</span><br></code></pre></td></tr></table></figure><h4 id="3、初始化创建-purecodefarmer"><a href="#3、初始化创建-purecodefarmer" class="headerlink" title="3、初始化创建 purecodefarmer"></a>3、初始化创建 purecodefarmer</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta prompt_"># </span><span class="language-bash">初始化创建hexo</span><br><span class="hljs-meta prompt_">$ </span><span class="language-bash">hexo init purecodefarmer</span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">创建完成进入文件夹</span><br><span class="hljs-meta prompt_">$ </span><span class="language-bash"><span class="hljs-built_in">cd</span> purecodefarmer</span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">安装hexo需要的文件</span><br><span class="hljs-meta prompt_">$ </span><span class="language-bash">npm install</span> <br></code></pre></td></tr></table></figure><p><img src="/blog/hexo-build/hexo_cmd.png" alt="hexo_cmd"></p><h4 id="4、启动Hexo"><a href="#4、启动Hexo" class="headerlink" title="4、启动Hexo"></a>4、启动Hexo</h4><p><a href="https://hexo.io/zh-cn/docs/commands">使用hexo的命令进行启动</a></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta prompt_"># </span><span class="language-bash">每次更改数据后都要执行下面三个命令</span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">清除缓存文件</span><br><span class="hljs-meta prompt_">$ </span><span class="language-bash">hexo clean</span><br><span class="hljs-meta prompt_"># </span><span class="language-bash"> 生成静态文件 可简写为 hexo g</span><br><span class="hljs-meta prompt_">$ </span><span class="language-bash">hexo generate</span>   <br><span class="hljs-meta prompt_"># </span><span class="language-bash">启动服务器 可简写为 hexo s</span><br><span class="hljs-meta prompt_">$ </span><span class="language-bash">hexo server</span><br></code></pre></td></tr></table></figure><p><img src="/blog/hexo-build/hexo_start.png" alt="hexo_start"></p><p>在网页上输入 <a href="http://localhost:4000/">http://localhost:4000/</a>  即可展示hexo的页面</p><p><img src="/blog/hexo-build/hexo_home.png" alt="hexo首页"></p><h4 id="5、配置文章封面图片"><a href="#5、配置文章封面图片" class="headerlink" title="5、配置文章封面图片"></a>5、配置文章封面图片</h4><p>文章封面的图片需要放在 purecodefarmer\source\img  目录下 单独建一个封面文件夹 cover_image</p><p>修改md文件头中的 index_img </p><p><img src="/blog/hexo-build/hexo_index_img.png"></p><h4 id="6、配置-url-地址"><a href="#6、配置-url-地址" class="headerlink" title="6、配置 url 地址"></a>6、配置 url 地址</h4><p>增加md文件头  md_url: docs/hexo    （可视每个页面进行修改，但docs不变，相当于页面的路径）</p><p><img src="/blog/hexo-build/hexo_md_url.png" alt="增加配置"></p><p>修改 _config.yml 文件</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs yml"><span class="hljs-attr">permalink:</span> <span class="hljs-string">:md_url/:title/</span><br></code></pre></td></tr></table></figure><p><img src="/blog/hexo-build/hexo_md_url2.png" alt="博客路径地址"></p><h4 id="5、配置关于页"><a href="#5、配置关于页" class="headerlink" title="5、配置关于页"></a>5、配置关于页</h4><p>执行命令新增 about 页面</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta prompt_">$ </span><span class="language-bash">hexo new page about</span><br></code></pre></td></tr></table></figure><p>添加 about 页面的布局参数</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs yml"><span class="hljs-attr">layout:</span> <span class="hljs-string">about</span><br></code></pre></td></tr></table></figure><p><img src="/blog/hexo-build/hexo_about.png" alt="配置关于页"></p><p>更改头像与名称  将head.jpg 放到 img目录下</p><p><img src="/blog/hexo-build/about.png" alt="配置关于页"></p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs text"># 配置头像与名称<br>avatar: /img/head.jpg<br>name: &quot;纯码农&quot;<br><br># 配置链接<br>- &#123; class: &quot;iconfont icon-github-fill&quot;, link: &quot;https://github.com&quot;, tip: &quot;Github&quot; &#125;<br>- &#123; class: &quot;iconfont icon-douban-fill&quot;, link: &quot;https://douban.com&quot;, tip: &quot;豆瓣&quot; &#125;<br>- &#123; class: &quot;iconfont icon-wechat-fill&quot;, qrcode: &quot;/img/favicon.png&quot; &#125;<br>- &#123; class: &quot;iconfont icon-gitee-fill&quot;, link: &quot;https://gitee.com&quot;, tip: &quot;Gitee&quot;&#125;<br></code></pre></td></tr></table></figure><p>如果要找对应的图标，可参考<a href="https://www.iconfont.cn/">阿里巴巴iconfont</a><br><img src="/blog/hexo-build/about_1.png" alt="配置后的关于页"></p><h4 id="6、发布到Gitee上"><a href="#6、发布到Gitee上" class="headerlink" title="6、发布到Gitee上"></a>6、发布到Gitee上</h4><p>修改 _config.yml 文件  repo是自己的仓库地址</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs yml"><span class="hljs-attr">deploy:</span><br>  <span class="hljs-attr">type:</span> <span class="hljs-string">git</span><br>  <span class="hljs-attr">repo:</span> <span class="hljs-string">https://gitee.com/purecodefarmer/blog</span><br></code></pre></td></tr></table></figure><p>执行以下命令上传</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta prompt_"># </span><span class="language-bash">清除缓存文件</span><br><span class="hljs-meta prompt_">$ </span><span class="language-bash">hexo clean</span><br><span class="hljs-meta prompt_"># </span><span class="language-bash"> 生成静态文件 可简写为 hexo g</span><br><span class="hljs-meta prompt_">$ </span><span class="language-bash">hexo generate</span>   <br><span class="hljs-meta prompt_"># </span><span class="language-bash">部署网站 可简写为 hexo d</span><br><span class="hljs-meta prompt_">$ </span><span class="language-bash">hexo deploy</span><br></code></pre></td></tr></table></figure><p><img src="/blog/hexo-build/hexo_git.png" alt="上传文件到Gitee"></p><h3 id="三、发布到Gitee-Pages"><a href="#三、发布到Gitee-Pages" class="headerlink" title="三、发布到Gitee Pages"></a>三、发布到Gitee Pages</h3><h4 id="1、进入Gitee中的仓库点击Gitee-Pages"><a href="#1、进入Gitee中的仓库点击Gitee-Pages" class="headerlink" title="1、进入Gitee中的仓库点击Gitee Pages"></a>1、进入Gitee中的仓库点击Gitee Pages</h4><p><img src="/blog/hexo-build/hexo_giteePage.png" alt="Gitee Pages"></p><h4 id="2、进入Gitee-Pages-需要申请"><a href="#2、进入Gitee-Pages-需要申请" class="headerlink" title="2、进入Gitee Pages 需要申请"></a>2、进入Gitee Pages 需要申请</h4><h4 id="申请时需要上传自己的身份证正反面照片与手持身份证照片，一般申请成功后一到两个工作日就会开通"><a href="#申请时需要上传自己的身份证正反面照片与手持身份证照片，一般申请成功后一到两个工作日就会开通" class="headerlink" title="申请时需要上传自己的身份证正反面照片与手持身份证照片，一般申请成功后一到两个工作日就会开通"></a>申请时需要上传自己的身份证正反面照片与手持身份证照片，一般申请成功后一到两个工作日就会开通</h4><h4 id="3、申请后可进行部署"><a href="#3、申请后可进行部署" class="headerlink" title="3、申请后可进行部署"></a>3、申请后可进行部署</h4><p><img src="/blog/hexo-build/hexo_giteePage_update.png" alt="进行部署更新"></p><p>如果有代码提交后，需要点击更新才可，开启后的网址：<a href="https://purecodefarmer.gitee.io/blog">纯码农的博客</a></p><p><img src="/blog/hexo-build/blog_url.png" alt="博客截图"></p><h3 id="四、问题解决"><a href="#四、问题解决" class="headerlink" title="四、问题解决"></a>四、问题解决</h3><h4 id="1、本地图片不显示问题"><a href="#1、本地图片不显示问题" class="headerlink" title="1、本地图片不显示问题"></a>1、本地图片不显示问题</h4><h5 id="1、下载插件"><a href="#1、下载插件" class="headerlink" title="1、下载插件"></a>1、下载插件</h5><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta prompt_">$ </span><span class="language-bash">npm install hexo-asset-image --save</span><br></code></pre></td></tr></table></figure><h5 id="2、修改-config-yml-文件中的-post-asset-folder"><a href="#2、修改-config-yml-文件中的-post-asset-folder" class="headerlink" title="2、修改  _config.yml 文件中的 post_asset_folder"></a>2、修改  _config.yml 文件中的 post_asset_folder</h5><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs yml"><span class="hljs-attr">post_asset_folder:</span> <span class="hljs-literal">true</span><br></code></pre></td></tr></table></figure><h5 id="3、替换-node-modules-下的-hexo-asset-image-文件夹的文件"><a href="#3、替换-node-modules-下的-hexo-asset-image-文件夹的文件" class="headerlink" title="3、替换 node_modules 下的 hexo-asset-image 文件夹的文件"></a>3、替换 node_modules 下的 hexo-asset-image 文件夹的文件</h5><p>可下载<a href="https://github.com/7ym0n/hexo-asset-image">hexo-asset-image替换包</a>，将里面的文件进行替换</p><h5 id="4、文件使用"><a href="#4、文件使用" class="headerlink" title="4、文件使用"></a>4、文件使用</h5><p>新建测试文件,只能在当前目录下的文件进行引用，不能引用其他文件夹的图片</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta prompt_">$ </span><span class="language-bash">hexo new post hexo-build</span><br></code></pre></td></tr></table></figure><p>在 purecodefarmer\source\_posts  目录下会生成 hexo-build.md 与hexo-build文件夹</p><p>将文件 about_1.png 放到 hexo-build 文件夹下，使用</p><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs scss">!<span class="hljs-selector-attr">[关于]</span>(hexo-build/about_1.png)<br></code></pre></td></tr></table></figure><p>即可在本地与网页都可展示图片</p><p><img src="/blog/hexo-build/about_1.png" alt="关于"></p><h4 id="2、发布到Gitee-Pages不显示图片与页面404问题"><a href="#2、发布到Gitee-Pages不显示图片与页面404问题" class="headerlink" title="2、发布到Gitee Pages不显示图片与页面404问题"></a>2、发布到Gitee Pages不显示图片与页面404问题</h4><p>修改 _config.yml</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs yml"><span class="hljs-attr">url:</span> <span class="hljs-string">https://purecodefarmer.gitee.io</span><br><span class="hljs-attr">root:</span> <span class="hljs-string">/blog</span><br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>hexo</category>
      
    </categories>
    
    
    <tags>
      
      <tag>hexo,nodeJs,fluid</tag>
      
    </tags>
    
  </entry>
  
  
  
  
</search>
